{"version":3,"sources":["webpack:///webpack/bootstrap 572c6fcfb96d56c241e7","webpack:///external \"jQuery\"","webpack:///./assets/js/lib/layout-mode.js","webpack:///./node_modules/get-size/get-size.js","webpack:///./node_modules/outlayer/outlayer.js","webpack:///./node_modules/ev-emitter/ev-emitter.js","webpack:///./assets/js/envira.js","webpack:///./assets/js/lib/pollyfills.js","webpack:///./assets/js/lib/mousewheel.js","webpack:///./assets/js/gallery-themes.js","webpack:///./assets/js/lib/jquery.justifiedGallery.js","webpack:///./assets/js/lib/enviraJustifiedGallery-extensions.js","webpack:///./assets/js/lib/isotope.js","webpack:///./node_modules/fizzy-ui-utils/utils.js","webpack:///./node_modules/desandro-matches-selector/matches-selector.js","webpack:///./node_modules/outlayer/item.js","webpack:///./assets/js/lib/layout-modes/masonry.js","webpack:///./node_modules/masonry-layout/masonry.js","webpack:///./assets/js/lib/layout-modes/fit-rows.js","webpack:///./assets/js/lib/layout-modes/vertical.js","webpack:///./assets/js/lib/enviratope-item.js","webpack:///./assets/js/lib/imagesloaded.js","webpack:///./assets/js/lib/envirabox.js","webpack:///./assets/js/lib/envirabox-fullscreen.js","webpack:///./assets/js/lib/envirabox-media.js","webpack:///./assets/js/lib/envirabox-wheel.js","webpack:///./assets/js/lib/envirabox-guestures.js","webpack:///./assets/js/lib/envirabox-thumbs.js","webpack:///./assets/js/lib/envirabox-slideshow.js","webpack:///./assets/js/gallery-init.js","webpack:///./assets/js/lib/enviraLazy.js","webpack:///./assets/js/gallery-link.js"],"names":["window","factory","define","module","exports","require","Isotope","LayoutMode","getSize","Outlayer","isotope","options","namespace","element","items","filteredItems","size","proto","prototype","facadeMethods","forEach","methodName","apply","arguments","needsVerticalResizeLayout","hasSizes","innerHeight","_getMeasurement","getColumnWidth","getSegmentSize","getRowHeight","segment","segmentName","outerSize","firstItemSize","getFirstItemSize","firstItem","layout","modes","create","Mode","Object","constructor","envira_galleries","envira_links","$","document","Envira","Envira_Link","envira_gallery","on","e","stopPropagation","each","$this","$id","data","$envira_galleries","$envira_images","$envira_lightbox","undefined","trigger","debug","console","log","location","pathname","replace","hostname","envirabox","close","event","image_id","envira_container","gallery_id","find","hasClass","closest","delay","show","envira_lazy_width","width","ratio1","naturalHeight","naturalWidth","ratio2","ratio","padding_bottom","parent","div_envira_lazy","caption_height","height","css","attr","div_overlay","laidOutItems","jQuery","entries","obj","ownProps","keys","i","length","resArray","Array","toFix","toBind","documentMode","slice","nullLowestDeltaTimeout","lowestDelta","fixHooks","mouseHooks","special","mousewheel","version","setup","addEventListener","handler","onmousewheel","getLineHeight","getPageHeight","teardown","removeEventListener","removeData","elem","$elem","$parent","fn","parseInt","settings","adjustOldDeltas","normalizeOffset","extend","bind","unmousewheel","unbind","orgEvent","args","call","delta","deltaX","deltaY","absDelta","offsetX","offsetY","fix","type","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaMode","lineHeight","pageHeight","Math","max","abs","shouldAdjustOldDeltas","getBoundingClientRect","boundingRect","clientX","left","clientY","top","deltaFactor","unshift","clearTimeout","setTimeout","nullLowestDelta","dispatch","handle","jg_effect_desaturate","src","supportsCanvas","createElement","getContext","canvas","context","imageData","px","gray","img","Image","drawImage","getImageData","putImageData","toDataURL","jg_effect_threshold","threshold","r","g","b","v","jg_effect_blur","top_x","top_y","radius","iterations","pixels","rsum","gsum","bsum","asum","x","y","p","p1","p2","yp","yi","yw","idx","wm","hm","wh","rad1","mul_sum","mul_table","shg_sum","shg_table","vmin","vmax","jg_effect_vintage","onError","alert","effect","vignette","sepia","noise","desaturate","lighten","VintageJS","hasScrollBar","JustifiedGallery","$gallery","checkSettings","imgAnalyzerTimeout","buildingRow","entriesBuff","aspectRatio","lastAnalyzedIndex","yield","every","flushed","border","margins","maxRowHeight","retrieveMaxRowHeight","suffixRanges","retrieveSuffixRanges","offY","rows","spinner","phase","timeSlot","$el","intervalId","checkWidthIntervalId","galleryWidth","getSuffix","longestSide","sizeRangeSuffixes","removeSuffix","str","suffix","substring","endsWith","indexOf","getUsedSuffix","si","hasOwnProperty","newSrc","imageSrc","imgWidth","imgHeight","newImageSrc","thumbnailPath","matchRes","match","extension","ext","showImg","$entry","callback","cssAnimation","addClass","stop","fadeTo","imagesAnimationDuration","extractImgSrcFromImage","$image","imgFromEntry","$img","captionFromEntry","$caption","displayEntry","rowHeight","one","loadNewImage","onImageEvent","proxy","displayEntryCaption","captions","$imgCaption","caption","isValidCaption","append","captionSettings","nonVisibleOpacity","addCaptionEventsHandlers","removeCaptionEventsHandlers","onEntryMouseEnterForCaption","eventObject","currentTarget","removeClass","animationDuration","visibleOpacity","onEntryMouseLeaveForCaption","captionMouseEvents","mouseenter","mouseleave","off","prepareBuildingRow","isLastRow","imgAspectRatio","newImgW","newImgH","justify","minHeight","availableWidth","defaultRowHeight","justifiable","justifyThreshold","lastRow","round","ceil","fixedHeight","clearBuildingRow","flushRow","buildingRowRes","offX","isPercentage","value","galleryHeightToSet","getSpinnerHeight","scrollBarOn","checkWidth","setInterval","parseFloat","refreshSensitivity","rewind","startImgAnalyzer","refreshTime","isSpinnerActive","stopLoadingSpinnerAnimation","clearInterval","detach","startLoadingSpinnerAnimation","spinnerContext","$spinnerPoints","eq","updateEntries","norewind","selector","toArray","filter","modifyEntries","filterArray","resetFilters","isFunction","sort","sortArray","randomize","shuffleArray","insertToGallery","that","appendTo","a","j","temp","floor","random","el","is","functionToApply","lastEntries","splice","concat","destroy","_","entry","remove","analyzeImages","isForResize","push","stopImgAnalyzerStarter","onLoad","memImage","$memImage","init","imagesToLoad","skippedImages","index","rel","target","waitThumbnailsLoad","isNaN","loadImg","checkOrConvertNumber","settingContainer","settingName","checkSizeRangesSuffixes","rangeIdx","newSizeRngSuffixes","numIdx","newMaxRowHeight","lastRowModes","join","updateSettings","newSettings","justifiedGallery","arg","gallery","controller","defaults","EnviraJustifiedGallery","enviraJustifiedGallery","revised_caption","html","text","after","imgCaptionHeight","jQueryBridget","arraySlice","logError","message","error","PluginClass","option","opts","isPlainObject","arg0","methodCall","plainCall","$elems","returnValue","pluginMethodStr","instance","method","charAt","_init","updateJQuery","bridget","global","EvEmitter","eventName","listener","events","_events","listeners","once","onceEvents","_onceEvents","onceListeners","emitEvent","isOnce","getStyleSize","num","isValid","noop","measurements","measurementsLength","getZeroSize","innerWidth","outerWidth","outerHeight","measurement","getStyle","style","getComputedStyle","isSetup","isBoxSizeOuter","div","padding","borderStyle","borderWidth","boxSizing","body","documentElement","appendChild","removeChild","querySelector","nodeType","display","offsetWidth","offsetHeight","isBorderBox","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","prefix","fizzyUIUtils","utils","prop","modulo","makeArray","ary","isArray","removeFrom","getParent","parentNode","getQueryElement","handleEvent","filterFindElements","elems","ffElems","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","timeoutName","timeout","_this","docReady","readyState","toDashed","$1","$2","toLowerCase","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","dataOptionsAttr","getAttribute","JSON","parse","className","Item","isEmptyObj","docElemStyle","transitionProperty","transition","transformProperty","transform","transitionEndEvent","WebkitTransition","vendorProperties","transitionDuration","transitionDelay","position","_create","_transn","ingProperties","clean","onEnd","elemStyle","supportedProp","getPosition","isOriginLeft","_getOption","isOriginTop","xValue","yValue","layoutSize","layoutPosition","xPadding","xProperty","xResetProperty","getXValue","yPadding","yProperty","yResetProperty","getYValue","isHorizontal","percentPosition","_transitionTo","curX","curY","compareX","compareY","didNotMove","setPosition","isTransitioning","transX","transY","transitionStyle","getTranslate","to","onTransitionEnd","isCleaning","goTo","moveTo","_nonTransition","_removeStyles","_transition","from","h","enableTransition","toDashedAll","transitionProps","duration","staggerDelay","onwebkitTransitionEnd","ontransitionend","onotransitionend","dashedVendorProperties","propertyName","disableTransition","removeTransitionStyles","cleanStyle","cleanTransitionStyle","stagger","removeElem","hide","reveal","isHidden","transitionEndProperty","getHideRevealTransitionEndProperty","onRevealTransitionEnd","hiddenStyle","visibleStyle","styleProperty","optionStyle","opacity","onHideTransitionEnd","right","bottom","GUID","instances","queryElement","$element","id","outlayerGUID","isInitLayout","containerStyle","initLayout","originLeft","originTop","resize","resizeContainer","oldOption","compatOptions","horizontal","layoutInstant","reloadItems","stamps","stamp","canBindResize","bindResize","_itemize","children","itemElems","_filterFindItemElements","item","itemSelector","getItemElements","map","_resetLayout","_manageStamps","isInstant","_isLayoutInited","layoutItems","_getItemsForLayout","_layoutItems","_postLayout","isIgnored","_emitCompleteOnItems","queue","_getItemLayoutPosition","isLayoutInstant","_processLayoutQueue","updateStagger","_positionItem","getMilliseconds","isResizingContainer","_getContainerSize","_setContainerMeasure","measure","isWidth","elemSize","onComplete","dispatchEvent","count","doneCount","tick","emitArgs","$event","Event","ignore","getItem","unignore","_find","unstamp","_getBoundingRect","_manageStamp","_boundingRect","_getElementOffset","thisRect","offset","isResizeBound","unbindResize","onresize","needsResizeLayout","addItems","appended","prepended","previousItems","revealItemElements","getItems","hideItemElements","removeItems","Layout","subclass","Parent","SubClass","msUnits","ms","s","time","unit","mult","Enviratope","itemGUID","sortData","updateSortData","getSortData","sorters","_sorters","key","sorter","_destroy","enviratope","Masonry","fitWidth","measureColumns","colYs","cols","maxY","getContainerWidth","columnWidth","firstItemElem","containerWidth","gutter","excess","mathMethod","isFitWidth","container","remainder","colSpan","min","colGroup","_getColGroup","minimumY","shortColIndex","setHeight","setSpan","groupCount","groupColYs","stampSize","firstX","lastX","firstCol","lastCol","stampMaxY","_getContainerFitWidth","unusedCols","previousWidth","MasonryMode","keepModeMethods","FitRows","itemWidth","Vertical","horizontalAlignment","trim","String","layoutMode","isJQueryFiltering","sortAscending","_getSorters","sortHistory","name","_initLayoutMode","_updateItemsSortData","initialOpts","arrange","_layout","_getIsInstant","filtered","_filter","_bindArrangeComplete","_isInstant","_noTransition","_hideReveal","_sort","needReveal","needHide","isLayoutComplete","isHideComplete","isRevealComplete","arrangeParallelCallback","hiddenMatched","visibleUnmatched","test","_getFilterTest","isMatched","mungeSorter","len","split","query","attrMatch","getValue","getValueGetter","parser","sortDataParsers","getChildText","child","textContent","val","sortByOpt","sortBy","sortBys","itemSorter","getItemSorter","sortAsc","itemA","itemB","isAscending","direction","_mode","mode","Error","_filterRevealAdded","insert","filteredInsertItems","_remove","shuffle","getFilteredItemElements","enviraImagesLoaded","EnviraImagesLoaded","onAlways","elements","getImages","jqDeferred","Deferred","check","images","addElementImages","nodeName","addImage","background","addElementBackgroundImages","elementNodeTypes","childImgs","reURL","exec","backgroundImage","url","addBackground","loadingImage","LoadingImage","Background","progressedCount","hasAnyBroken","complete","onProgress","image","progress","isLoaded","notify","isComplete","jqMethod","getIsImageComplete","confirm","proxyImage","pendingSrc","currentSrc","onload","unbindEvents","onerror","makeJQueryPlugin","promise","info","stuff","loop","margin","keyboard","arrows","infobar","toolbar","buttons","idleTime","smallBtn","protect","modal","preload","ajax","iframe","tpl","scrolling","genericDiv","provider","animationEffect","zoomOpacity","transitionEffect","slideClass","baseClass","baseTpl","spinnerTpl","errorTpl","btnTpl","slideShow","fullScreen","thumbs","download","exif","arrowLeft","arrowRight","parentEl","autoFocus","backFocus","trapFocus","autoStart","touch","vertical","momentum","hash","media","speed","hideOnClose","wheel","onInit","beforeLoad","afterLoad","beforeShow","afterShow","beforeClose","afterClose","onActivate","onDeactivate","clickContent","current","clickSlide","clickOutside","dblclickContent","dblclickSlide","dblclickOutside","mobile","lang","i18n","CLOSE","NEXT","PREV","ERROR","PLAY_START","PLAY_STOP","FULL_SCREEN","THUMBS","$W","$D","called","isQuery","requestAFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","transitionEnd","t","transitions","forceRedraw","mergeOpts","opts1","opts2","rez","EnviraBox","content","self","group","currIndex","prevIndex","prevPos","currPos","firstRun","createGroup","$lastFocus","activeElement","blur","slides","testWidth","$container","buttonStr","firstItemOpts","scrollTop","scrollLeft","getInstance","isMobile","translate","prependTo","$refs","activate","jumpTo","arr","n","$item","found","srcParts","srcset","$orig","videoFormat","$thumb","shift","addEvents","removeEvents","preventDefault","previous","next","originalEvent","update","stage","isClosing","has","focus","keycode","keyCode","which","idleSecondsCounter","isIdle","showControls","idleInterval","hideControls","pos","slide","canvasWidth","currentPos","groupLen","isSliding","isAnimating","createSlide","updateControls","$slide","isMoved","forcedDuration","isNumeric","loadSlide","animate","removeAttr","revealContent","updateSlide","scaleToActual","$what","$content","imgPos","posX","posY","scaleX","scaleY","canvasHeight","newImgWidth","newImgHeight","hasError","updateCursor","SlideShow","isActive","scaleToFit","end","getFitPos","minRatio","setTranslate","nextWidth","nextHeight","isScaledDown","isZoomable","fitPos","canPan","ajaxLoad","isLoading","setImage","setVideo","setIframe","setGenericDiv","setContent","setError","showLoading","success","textStatus","jqXHR","abort","hideLoading","empty","style_width","style_height","videoWidthHeight","videoControls","videoControlsList","videoClasses","videoPlayPause","videoProgressBar","videoPlaybackTime","videoVideoLength","videoVolumeControls","videoControlBar","videoFullscreen","videoDownload","videoWidth","videoHeight","arrow_position","prepend","insideCap","cap","capPosition","video","pxRatio","windowWidth","devicePixelRatio","ret","postfix","thumb","$ghost","setBigImage","timouts","$iframe","css_width","css_height","Date","getTime","contentProvider","isReady","$contents","$body","contents","frameWidth","clientWidth","frameHeight","clientHeight","$genericDiv","$placeholder","insertAfter","$smallBtn","first","$spinner","button","effectClassName","start","getThumbPos","isElementVisible","elementRect","parentRects","visibleInAllParents","parentElement","parentRect","visiblePixelX","visiblePixelY","thumbPos","slidePos","ownerDocument","siblings","prev","uid","d","done","cleanUp","force","isHiddenControls","toggleClass","toggleControls","command","open","all","createTouch","navigator","userAgent","use3d","getPropertyValue","matrix","transRegex","transRez","props","leaveAnimationName","_run","active","fnMap","FullScreen","request","requestFullscreen","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","toggle","isFullscreen","Boolean","fullscreenElement","enabled","fullscreenEnabled","$button","keypress","fullscreenchange","format","params","param","youtube_playlist","matcher","autoplay","autohide","fs","hd","wmode","enablejsapi","html5","paramPlace","youtube","vimeo","show_title","show_byline","show_portrait","fullscreen","api","metacafe","dailymotion","additionalInfos","facebook","subtype","instagram","instagram_tv","wistia","twitch","videopress","gmap_place","gmap_search","urlParams","o","m","decodeURIComponent","prevTime","currTime","cancelAFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","pointers","result","touches","changedTouches","pageX","pageY","distance","point2","point1","what","sqrt","pow","isClickable","get","onclick","atts","attributes","substr","hasScrollbars","overflowY","overflowX","scrollHeight","scrollWidth","isScrollable","Guestures","$bg","bg","$stage","ontouchstart","$target","isTouchDevice","startPoints","canTap","startTime","distanceX","distanceY","isPanning","isSwiping","isZooming","sliderStartPos","sliderLastPos","contentStartPos","contentLastPos","centerPointStartX","centerPointStartY","percentageOfImageAtPinchPointX","percentageOfImageAtPinchPointY","startDistanceBetweenFingers","ontouchmove","newPoints","onSwipe","onPan","onZoom","swiping","angle","atan2","PI","inTransition","requestId","newOffsetX","newOffsetY","newPos","limitMovement","newWidth","newHeight","minTranslateX","minTranslateY","maxTranslateX","maxTranslateY","currentOffsetX","currentOffsetY","limitPosition","currentWidth","currentHeight","endDistanceBetweenFingers","pinchRatio","translateFromZoomingX","translateFromZoomingY","centerPointEndX","centerPointEndY","translateFromTranslatingX","translateFromTranslatingY","ontouchend","dMs","panning","zooming","endPoints","onTap","velocityX","velocityY","speedX","endPanning","endZooming","endSwiping","reset","tapX","tapY","where","process","action","startEvent","tapped","FancyThumbs","$grid","$list","isVisible","second","list","thumbWidth","thumbHeight","widthRatio","heightRatio","Thumbs","timer","set","clear","hidden","lightbox","envirabox_config","initImage","get_config","justified","load_images","scroll","enviratopes","run","is_mobile","envira_isotopes_config","masonry","get_lightbox_config","slideshow","lightbox_images","overlay_divs","lightbox_options","lightbox_theme","prepend_cap","$images","stopImmediatePropagation","enviraLazy","hasWebPSupport","windowHeight","justifiedReady","galleryClass","hasIntersectionObserverSupport","IntersectionObserver","rect","elementTop","elementLeft","elementWidth","elementHeight","exists","updateElement","optionsCount","spaceIndex","lastIndexOf","optionImage","optionWidth","add","bestSelectedOption","optionData","lastSetOption","fireEvent","setAttribute","Function","not","the_image","firstElementChild","the_container","image_src","updateWindowSize","setGalleryClass","theClass","unknownHeight","elementsCount","ll_delay","ll_initial","myVar","updateIntersectionObservers","responsivelyLazyObserverAttached","intersectionObserver","observe","intersectionRatio","tagName","requestAnimationFrameFunction","hasChange","runIfHasChange","setChanged","updateParentNodesScrollListeners","responsivelyLazyScrollAttached","attachEvents","resizeTimeout","MutationObserver","observer","childList","subtree","video_defaults","link","sorted_ids","sorting_factor","gallery_sort","sorting_factor_data"],"mappings":"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AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,gBAAgB,wBAAwB;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,CAAC;;;;;;;AChND;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCACA;AACA;AACA;AAAA,oGACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA,WAAW,gBAAgB;AAC3B,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC;AACjC;;AAEA;AACA;AACA,iCAAiC;AACjC,yBAAyB;;AAEzB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,WAAW,iCAAiC;AAC5C,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,iCAAiC;AAC5C,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,oCAAoC;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,4BAA4B;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,oCAAoC;AAC/C,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,6BAA6B;AACxC,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,6BAA6B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,6BAA6B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,wBAAwB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,wBAAwB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,MAAM,GAAG,QAAQ,GAAG,SAAS;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM,GAAG,QAAQ,GAAG,SAAS;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa,cAAc;AAC3B;AACA;AACA;AACA,gBAAgB,uBAAuB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,WAAW,6BAA6B;AACxC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA,yCAAyC;;AAEzC;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,CAAC;;;;;;;AC16BD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;A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UH,IAAV,EAAiB;AAC9C,aAAOA,KAAK9pB,OAAZ;AACD,KAFM,CAAP;AAGD,GAJD;;AAMA;;AAEA,SAAOkuB,UAAP;AAED,CA1lBC,CAAF,C;;;;;;AC91FA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AAAA;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,uBAAuB;AACzC;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,GAAG;AACH;;AAEA;;AAEA;;AAEA,CAAC;;;;;;;AC7OD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,qBAAqB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;;;;;;ACpDD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CACA;AAAA;AAAA;AAAA,oGACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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A;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,YAAY;AAC9C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,OAAO;AACpB,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,cAAc;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;;;;;;;;;;;;AC9OD;;;;AAIE,WAAU7xB,MAAV,EAAkBC,OAAlB,EAA4B;AAC5B;AACA,4BAF4B,CAED;AAC3B,MAAK,IAAL,EAAiD;AAC/C;AACAC,IAAA,iCAAQ,CACJ,sBADI,CAAR,oCAGED,OAHF;AAAA;AAAA;AAAA;AAID,GAND,MAMO,IAAK,QAAOG,OAAP,yCAAOA,OAAP,MAAkB,QAAvB,EAAkC;AACvC;AACAD,WAAOC,OAAP,GAAiBH,QACfI,QAAQ,gBAAR,CADe,CAAjB;AAGD,GALM,MAKA;AACL;AACAJ,YACED,OAAOM,OAAP,CAAeC,UADjB;AAGD;AAEF,CArBC,EAqBCP,MArBD,EAqBS,SA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","file":"envira-min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 572c6fcfb96d56c241e7","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 0","/**\n * Isotope LayoutMode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'get-size/get-size',\n        'outlayer/outlayer'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('get-size'),\n      require('outlayer')\n    );\n  } else {\n    // browser global\n    window.Isotope = window.Isotope || {};\n    window.Isotope.LayoutMode = factory(\n      window.getSize,\n      window.Outlayer\n    );\n  }\n\n}( window, function factory( getSize, Outlayer ) {\n  'use strict';\n\n  // layout mode class\n  function LayoutMode( isotope ) {\n    this.isotope = isotope;\n    // link properties\n    if ( isotope ) {\n      this.options = isotope.options[ this.namespace ];\n      this.element = isotope.element;\n      this.items = isotope.filteredItems;\n      this.size = isotope.size;\n    }\n  }\n\n  var proto = LayoutMode.prototype;\n\n  /**\n   * some methods should just defer to default Outlayer method\n   * and reference the Isotope instance as `this`\n  **/\n  var facadeMethods = [\n    '_resetLayout',\n    '_getItemLayoutPosition',\n    '_manageStamp',\n    '_getContainerSize',\n    '_getElementOffset',\n    'needsResizeLayout',\n    '_getOption'\n  ];\n\n  facadeMethods.forEach( function( methodName ) {\n    proto[ methodName ] = function() {\n      return Outlayer.prototype[ methodName ].apply( this.isotope, arguments );\n    };\n  });\n\n  // -----  ----- //\n\n  // for horizontal layout modes, check vertical size\n  proto.needsVerticalResizeLayout = function() {\n    // don't trigger if size did not change\n    var size = getSize( this.isotope.element );\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var hasSizes = this.isotope.size && size;\n    return hasSizes && size.innerHeight != this.isotope.size.innerHeight;\n  };\n\n  // ----- measurements ----- //\n\n  proto._getMeasurement = function() {\n    this.isotope._getMeasurement.apply( this, arguments );\n  };\n\n  proto.getColumnWidth = function() {\n    this.getSegmentSize( 'column', 'Width' );\n  };\n\n  proto.getRowHeight = function() {\n    this.getSegmentSize( 'row', 'Height' );\n  };\n\n  /**\n   * get columnWidth or rowHeight\n   * segment: 'column' or 'row'\n   * size 'Width' or 'Height'\n  **/\n  proto.getSegmentSize = function( segment, size ) {\n    var segmentName = segment + size;\n    var outerSize = 'outer' + size;\n    // columnWidth / outerWidth // rowHeight / outerHeight\n    this._getMeasurement( segmentName, outerSize );\n    // got rowHeight or columnWidth, we can chill\n    if ( this[ segmentName ] ) {\n      return;\n    }\n    // fall back to item of first element\n    var firstItemSize = this.getFirstItemSize();\n    this[ segmentName ] = firstItemSize && firstItemSize[ outerSize ] ||\n      // or size of container\n      this.isotope.size[ 'inner' + size ];\n  };\n\n  proto.getFirstItemSize = function() {\n    var firstItem = this.isotope.filteredItems[0];\n    return firstItem && firstItem.element && getSize( firstItem.element );\n  };\n\n  // ----- methods that should reference isotope ----- //\n\n  proto.layout = function() {\n    this.isotope.layout.apply( this.isotope, arguments );\n  };\n\n  proto.getSize = function() {\n    this.isotope.getSize();\n    this.size = this.isotope.size;\n  };\n\n  // -------------------------- create -------------------------- //\n\n  LayoutMode.modes = {};\n\n  LayoutMode.create = function( namespace, options ) {\n\n    function Mode() {\n      LayoutMode.apply( this, arguments );\n    }\n\n    Mode.prototype = Object.create( proto );\n    Mode.prototype.constructor = Mode;\n\n    // default options\n    if ( options ) {\n      Mode.options = options;\n    }\n\n    Mode.prototype.namespace = namespace;\n    // register in Isotope\n    LayoutMode.modes[ namespace ] = Mode;\n\n    return Mode;\n  };\n\n  return LayoutMode;\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/layout-mode.js","/*!\n * getSize v2.0.2\n * measure size of elements\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n/*global define: false, module: false, console: false */\n\n( function( window, factory ) {\n  'use strict';\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( function() {\n      return factory();\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.getSize = factory();\n  }\n\n})( window, function factory() {\n'use strict';\n\n// -------------------------- helpers -------------------------- //\n\n// get a number from a string, not a percentage\nfunction getStyleSize( value ) {\n  var num = parseFloat( value );\n  // not a percent like '100%', and a number\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\n  return isValid && num;\n}\n\nfunction noop() {}\n\nvar logError = typeof console == 'undefined' ? noop :\n  function( message ) {\n    console.error( message );\n  };\n\n// -------------------------- measurements -------------------------- //\n\nvar measurements = [\n  'paddingLeft',\n  'paddingRight',\n  'paddingTop',\n  'paddingBottom',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'marginBottom',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderTopWidth',\n  'borderBottomWidth'\n];\n\nvar measurementsLength = measurements.length;\n\nfunction getZeroSize() {\n  var size = {\n    width: 0,\n    height: 0,\n    innerWidth: 0,\n    innerHeight: 0,\n    outerWidth: 0,\n    outerHeight: 0\n  };\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    size[ measurement ] = 0;\n  }\n  return size;\n}\n\n// -------------------------- getStyle -------------------------- //\n\n/**\n * getStyle, get style of element, check for Firefox bug\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n */\nfunction getStyle( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    logError( 'Style returned ' + style +\n      '. Are you running this code in a hidden iframe on Firefox? ' +\n      'See http://bit.ly/getsizebug1' );\n  }\n  return style;\n}\n\n// -------------------------- setup -------------------------- //\n\nvar isSetup = false;\n\nvar isBoxSizeOuter;\n\n/**\n * setup\n * check isBoxSizerOuter\n * do on first getSize() rather than on page load for Firefox bug\n */\nfunction setup() {\n  // setup once\n  if ( isSetup ) {\n    return;\n  }\n  isSetup = true;\n\n  // -------------------------- box sizing -------------------------- //\n\n  /**\n   * WebKit measures the outer-width on style.width on border-box elems\n   * IE & Firefox<29 measures the inner-width\n   */\n  var div = document.createElement('div');\n  div.style.width = '200px';\n  div.style.padding = '1px 2px 3px 4px';\n  div.style.borderStyle = 'solid';\n  div.style.borderWidth = '1px 2px 3px 4px';\n  div.style.boxSizing = 'border-box';\n\n  var body = document.body || document.documentElement;\n  body.appendChild( div );\n  var style = getStyle( div );\n\n  getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize( style.width ) == 200;\n  body.removeChild( div );\n\n}\n\n// -------------------------- getSize -------------------------- //\n\nfunction getSize( elem ) {\n  setup();\n\n  // use querySeletor if elem is string\n  if ( typeof elem == 'string' ) {\n    elem = document.querySelector( elem );\n  }\n\n  // do not proceed on non-objects\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\n    return;\n  }\n\n  var style = getStyle( elem );\n\n  // if hidden, everything is 0\n  if ( style.display == 'none' ) {\n    return getZeroSize();\n  }\n\n  var size = {};\n  size.width = elem.offsetWidth;\n  size.height = elem.offsetHeight;\n\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\n\n  // get all measurements\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    var value = style[ measurement ];\n    var num = parseFloat( value );\n    // any 'auto', 'medium' value will be 0\n    size[ measurement ] = !isNaN( num ) ? num : 0;\n  }\n\n  var paddingWidth = size.paddingLeft + size.paddingRight;\n  var paddingHeight = size.paddingTop + size.paddingBottom;\n  var marginWidth = size.marginLeft + size.marginRight;\n  var marginHeight = size.marginTop + size.marginBottom;\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n\n  // overwrite width and height if we can get it from style\n  var styleWidth = getStyleSize( style.width );\n  if ( styleWidth !== false ) {\n    size.width = styleWidth +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\n  }\n\n  var styleHeight = getStyleSize( style.height );\n  if ( styleHeight !== false ) {\n    size.height = styleHeight +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\n  }\n\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\n\n  size.outerWidth = size.width + marginWidth;\n  size.outerHeight = size.height + marginHeight;\n\n  return size;\n}\n\nreturn getSize;\n\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/get-size/get-size.js\n// module id = 2\n// module chunks = 0","/*!\n * Outlayer v2.1.1\n * the brains and guts of a layout library\n * MIT license\n */\n\n( function( window, factory ) {\n  'use strict';\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( [\n        'ev-emitter/ev-emitter',\n        'get-size/get-size',\n        'fizzy-ui-utils/utils',\n        './item'\n      ],\n      function( EvEmitter, getSize, utils, Item ) {\n        return factory( window, EvEmitter, getSize, utils, Item);\n      }\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      window,\n      require('ev-emitter'),\n      require('get-size'),\n      require('fizzy-ui-utils'),\n      require('./item')\n    );\n  } else {\n    // browser global\n    window.Outlayer = factory(\n      window,\n      window.EvEmitter,\n      window.getSize,\n      window.fizzyUIUtils,\n      window.Outlayer.Item\n    );\n  }\n\n}( window, function factory( window, EvEmitter, getSize, utils, Item ) {\n'use strict';\n\n// ----- vars ----- //\n\nvar console = window.console;\nvar jQuery = window.jQuery;\nvar noop = function() {};\n\n// -------------------------- Outlayer -------------------------- //\n\n// globally unique identifiers\nvar GUID = 0;\n// internal store of all Outlayer intances\nvar instances = {};\n\n\n/**\n * @param {Element, String} element\n * @param {Object} options\n * @constructor\n */\nfunction Outlayer( element, options ) {\n  var queryElement = utils.getQueryElement( element );\n  if ( !queryElement ) {\n    if ( console ) {\n      console.error( 'Bad element for ' + this.constructor.namespace +\n        ': ' + ( queryElement || element ) );\n    }\n    return;\n  }\n  this.element = queryElement;\n  // add jQuery\n  if ( jQuery ) {\n    this.$element = jQuery( this.element );\n  }\n\n  // options\n  this.options = utils.extend( {}, this.constructor.defaults );\n  this.option( options );\n\n  // add id for Outlayer.getFromElement\n  var id = ++GUID;\n  this.element.outlayerGUID = id; // expando\n  instances[ id ] = this; // associate via id\n\n  // kick it off\n  this._create();\n\n  var isInitLayout = this._getOption('initLayout');\n  if ( isInitLayout ) {\n    this.layout();\n  }\n}\n\n// settings are for internal use only\nOutlayer.namespace = 'outlayer';\nOutlayer.Item = Item;\n\n// default options\nOutlayer.defaults = {\n  containerStyle: {\n    position: 'relative'\n  },\n  initLayout: true,\n  originLeft: true,\n  originTop: true,\n  resize: true,\n  resizeContainer: true,\n  // item options\n  transitionDuration: '0.4s',\n  hiddenStyle: {\n    opacity: 0,\n    transform: 'scale(0.001)'\n  },\n  visibleStyle: {\n    opacity: 1,\n    transform: 'scale(1)'\n  }\n};\n\nvar proto = Outlayer.prototype;\n// inherit EvEmitter\nutils.extend( proto, EvEmitter.prototype );\n\n/**\n * set options\n * @param {Object} opts\n */\nproto.option = function( opts ) {\n  utils.extend( this.options, opts );\n};\n\n/**\n * get backwards compatible option value, check old name\n */\nproto._getOption = function( option ) {\n  var oldOption = this.constructor.compatOptions[ option ];\n  return oldOption && this.options[ oldOption ] !== undefined ?\n    this.options[ oldOption ] : this.options[ option ];\n};\n\nOutlayer.compatOptions = {\n  // currentName: oldName\n  initLayout: 'isInitLayout',\n  horizontal: 'isHorizontal',\n  layoutInstant: 'isLayoutInstant',\n  originLeft: 'isOriginLeft',\n  originTop: 'isOriginTop',\n  resize: 'isResizeBound',\n  resizeContainer: 'isResizingContainer'\n};\n\nproto._create = function() {\n  // get items from children\n  this.reloadItems();\n  // elements that affect layout, but are not laid out\n  this.stamps = [];\n  this.stamp( this.options.stamp );\n  // set container style\n  utils.extend( this.element.style, this.options.containerStyle );\n\n  // bind resize method\n  var canBindResize = this._getOption('resize');\n  if ( canBindResize ) {\n    this.bindResize();\n  }\n};\n\n// goes through all children again and gets bricks in proper order\nproto.reloadItems = function() {\n  // collection of item elements\n  this.items = this._itemize( this.element.children );\n};\n\n\n/**\n * turn elements into Outlayer.Items to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - collection of new Outlayer Items\n */\nproto._itemize = function( elems ) {\n\n  var itemElems = this._filterFindItemElements( elems );\n  var Item = this.constructor.Item;\n\n  // create new Outlayer Items for collection\n  var items = [];\n  for ( var i=0; i < itemElems.length; i++ ) {\n    var elem = itemElems[i];\n    var item = new Item( elem, this );\n    items.push( item );\n  }\n\n  return items;\n};\n\n/**\n * get item elements to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - item elements\n */\nproto._filterFindItemElements = function( elems ) {\n  return utils.filterFindElements( elems, this.options.itemSelector );\n};\n\n/**\n * getter method for getting item elements\n * @returns {Array} elems - collection of item elements\n */\nproto.getItemElements = function() {\n  return this.items.map( function( item ) {\n    return item.element;\n  });\n};\n\n// ----- init & layout ----- //\n\n/**\n * lays out all items\n */\nproto.layout = function() {\n  this._resetLayout();\n  this._manageStamps();\n\n  // don't animate first layout\n  var layoutInstant = this._getOption('layoutInstant');\n  var isInstant = layoutInstant !== undefined ?\n    layoutInstant : !this._isLayoutInited;\n  this.layoutItems( this.items, isInstant );\n\n  // flag for initalized\n  this._isLayoutInited = true;\n};\n\n// _init is alias for layout\nproto._init = proto.layout;\n\n/**\n * logic before any new layout\n */\nproto._resetLayout = function() {\n  this.getSize();\n};\n\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * get measurement from option, for columnWidth, rowHeight, gutter\n * if option is String -> get element from selector string, & get size of element\n * if option is Element -> get size of element\n * else use option as a number\n *\n * @param {String} measurement\n * @param {String} size - width or height\n * @private\n */\nproto._getMeasurement = function( measurement, size ) {\n  var option = this.options[ measurement ];\n  var elem;\n  if ( !option ) {\n    // default to 0\n    this[ measurement ] = 0;\n  } else {\n    // use option as an element\n    if ( typeof option == 'string' ) {\n      elem = this.element.querySelector( option );\n    } else if ( option instanceof HTMLElement ) {\n      elem = option;\n    }\n    // use size of element, if element\n    this[ measurement ] = elem ? getSize( elem )[ size ] : option;\n  }\n};\n\n/**\n * layout a collection of item elements\n * @api public\n */\nproto.layoutItems = function( items, isInstant ) {\n  items = this._getItemsForLayout( items );\n\n  this._layoutItems( items, isInstant );\n\n  this._postLayout();\n};\n\n/**\n * get the items to be laid out\n * you may want to skip over some items\n * @param {Array} items\n * @returns {Array} items\n */\nproto._getItemsForLayout = function( items ) {\n  return items.filter( function( item ) {\n    return !item.isIgnored;\n  });\n};\n\n/**\n * layout items\n * @param {Array} items\n * @param {Boolean} isInstant\n */\nproto._layoutItems = function( items, isInstant ) {\n  this._emitCompleteOnItems( 'layout', items );\n\n  if ( !items || !items.length ) {\n    // no items, emit event with empty array\n    return;\n  }\n\n  var queue = [];\n\n  items.forEach( function( item ) {\n    // get x/y object from method\n    var position = this._getItemLayoutPosition( item );\n    // enqueue\n    position.item = item;\n    position.isInstant = isInstant || item.isLayoutInstant;\n    queue.push( position );\n  }, this );\n\n  this._processLayoutQueue( queue );\n};\n\n/**\n * get item layout position\n * @param {Outlayer.Item} item\n * @returns {Object} x and y position\n */\nproto._getItemLayoutPosition = function( /* item */ ) {\n  return {\n    x: 0,\n    y: 0\n  };\n};\n\n/**\n * iterate over array and position each item\n * Reason being - separating this logic prevents 'layout invalidation'\n * thx @paul_irish\n * @param {Array} queue\n */\nproto._processLayoutQueue = function( queue ) {\n  this.updateStagger();\n  queue.forEach( function( obj, i ) {\n    this._positionItem( obj.item, obj.x, obj.y, obj.isInstant, i );\n  }, this );\n};\n\n// set stagger from option in milliseconds number\nproto.updateStagger = function() {\n  var stagger = this.options.stagger;\n  if ( stagger === null || stagger === undefined ) {\n    this.stagger = 0;\n    return;\n  }\n  this.stagger = getMilliseconds( stagger );\n  return this.stagger;\n};\n\n/**\n * Sets position of item in DOM\n * @param {Outlayer.Item} item\n * @param {Number} x - horizontal position\n * @param {Number} y - vertical position\n * @param {Boolean} isInstant - disables transitions\n */\nproto._positionItem = function( item, x, y, isInstant, i ) {\n  if ( isInstant ) {\n    // if not transition, just set CSS\n    item.goTo( x, y );\n  } else {\n    item.stagger( i * this.stagger );\n    item.moveTo( x, y );\n  }\n};\n\n/**\n * Any logic you want to do after each layout,\n * i.e. size the container\n */\nproto._postLayout = function() {\n  this.resizeContainer();\n};\n\nproto.resizeContainer = function() {\n  var isResizingContainer = this._getOption('resizeContainer');\n  if ( !isResizingContainer ) {\n    return;\n  }\n  var size = this._getContainerSize();\n  if ( size ) {\n    this._setContainerMeasure( size.width, true );\n    this._setContainerMeasure( size.height, false );\n  }\n};\n\n/**\n * Sets width or height of container if returned\n * @returns {Object} size\n *   @param {Number} width\n *   @param {Number} height\n */\nproto._getContainerSize = noop;\n\n/**\n * @param {Number} measure - size of width or height\n * @param {Boolean} isWidth\n */\nproto._setContainerMeasure = function( measure, isWidth ) {\n  if ( measure === undefined ) {\n    return;\n  }\n\n  var elemSize = this.size;\n  // add padding and border width if border box\n  if ( elemSize.isBorderBox ) {\n    measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\n      elemSize.borderLeftWidth + elemSize.borderRightWidth :\n      elemSize.paddingBottom + elemSize.paddingTop +\n      elemSize.borderTopWidth + elemSize.borderBottomWidth;\n  }\n\n  measure = Math.max( measure, 0 );\n  this.element.style[ isWidth ? 'width' : 'height' ] = measure + 'px';\n};\n\n/**\n * emit eventComplete on a collection of items events\n * @param {String} eventName\n * @param {Array} items - Outlayer.Items\n */\nproto._emitCompleteOnItems = function( eventName, items ) {\n  var _this = this;\n  function onComplete() {\n    _this.dispatchEvent( eventName + 'Complete', null, [ items ] );\n  }\n\n  var count = items.length;\n  if ( !items || !count ) {\n    onComplete();\n    return;\n  }\n\n  var doneCount = 0;\n  function tick() {\n    doneCount++;\n    if ( doneCount == count ) {\n      onComplete();\n    }\n  }\n\n  // bind callback\n  items.forEach( function( item ) {\n    item.once( eventName, tick );\n  });\n};\n\n/**\n * emits events via EvEmitter and jQuery events\n * @param {String} type - name of event\n * @param {Event} event - original event\n * @param {Array} args - extra arguments\n */\nproto.dispatchEvent = function( type, event, args ) {\n  // add original event to arguments\n  var emitArgs = event ? [ event ].concat( args ) : args;\n  this.emitEvent( type, emitArgs );\n\n  if ( jQuery ) {\n    // set this.$element\n    this.$element = this.$element || jQuery( this.element );\n    if ( event ) {\n      // create jQuery event\n      var $event = jQuery.Event( event );\n      $event.type = type;\n      this.$element.trigger( $event, args );\n    } else {\n      // just trigger with type if no event available\n      this.$element.trigger( type, args );\n    }\n  }\n};\n\n// -------------------------- ignore & stamps -------------------------- //\n\n\n/**\n * keep item in collection, but do not lay it out\n * ignored items do not get skipped in layout\n * @param {Element} elem\n */\nproto.ignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    item.isIgnored = true;\n  }\n};\n\n/**\n * return item to layout collection\n * @param {Element} elem\n */\nproto.unignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    delete item.isIgnored;\n  }\n};\n\n/**\n * adds elements to stamps\n * @param {NodeList, Array, Element, or String} elems\n */\nproto.stamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ) {\n    return;\n  }\n\n  this.stamps = this.stamps.concat( elems );\n  // ignore\n  elems.forEach( this.ignore, this );\n};\n\n/**\n * removes elements to stamps\n * @param {NodeList, Array, or Element} elems\n */\nproto.unstamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ){\n    return;\n  }\n\n  elems.forEach( function( elem ) {\n    // filter out removed stamp elements\n    utils.removeFrom( this.stamps, elem );\n    this.unignore( elem );\n  }, this );\n};\n\n/**\n * finds child elements\n * @param {NodeList, Array, Element, or String} elems\n * @returns {Array} elems\n */\nproto._find = function( elems ) {\n  if ( !elems ) {\n    return;\n  }\n  // if string, use argument as selector string\n  if ( typeof elems == 'string' ) {\n    elems = this.element.querySelectorAll( elems );\n  }\n  elems = utils.makeArray( elems );\n  return elems;\n};\n\nproto._manageStamps = function() {\n  if ( !this.stamps || !this.stamps.length ) {\n    return;\n  }\n\n  this._getBoundingRect();\n\n  this.stamps.forEach( this._manageStamp, this );\n};\n\n// update boundingLeft / Top\nproto._getBoundingRect = function() {\n  // get bounding rect for container element\n  var boundingRect = this.element.getBoundingClientRect();\n  var size = this.size;\n  this._boundingRect = {\n    left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n    top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n    right: boundingRect.right - ( size.paddingRight + size.borderRightWidth ),\n    bottom: boundingRect.bottom - ( size.paddingBottom + size.borderBottomWidth )\n  };\n};\n\n/**\n * @param {Element} stamp\n**/\nproto._manageStamp = noop;\n\n/**\n * get x/y position of element relative to container element\n * @param {Element} elem\n * @returns {Object} offset - has left, top, right, bottom\n */\nproto._getElementOffset = function( elem ) {\n  var boundingRect = elem.getBoundingClientRect();\n  var thisRect = this._boundingRect;\n  var size = getSize( elem );\n  var offset = {\n    left: boundingRect.left - thisRect.left - size.marginLeft,\n    top: boundingRect.top - thisRect.top - size.marginTop,\n    right: thisRect.right - boundingRect.right - size.marginRight,\n    bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n  };\n  return offset;\n};\n\n// -------------------------- resize -------------------------- //\n\n// enable event handlers for listeners\n// i.e. resize -> onresize\nproto.handleEvent = utils.handleEvent;\n\n/**\n * Bind layout to window resizing\n */\nproto.bindResize = function() {\n  window.addEventListener( 'resize', this );\n  this.isResizeBound = true;\n};\n\n/**\n * Unbind layout to window resizing\n */\nproto.unbindResize = function() {\n  window.removeEventListener( 'resize', this );\n  this.isResizeBound = false;\n};\n\nproto.onresize = function() {\n  this.resize();\n};\n\nutils.debounceMethod( Outlayer, 'onresize', 100 );\n\nproto.resize = function() {\n  // don't trigger if size did not change\n  // or if resize was unbound. See #9\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\n    return;\n  }\n\n  this.layout();\n};\n\n/**\n * check if layout is needed post layout\n * @returns Boolean\n */\nproto.needsResizeLayout = function() {\n  var size = getSize( this.element );\n  // check that this.size and size are there\n  // IE8 triggers resize on body size change, so they might not be\n  var hasSizes = this.size && size;\n  return hasSizes && size.innerWidth !== this.size.innerWidth;\n};\n\n// -------------------------- methods -------------------------- //\n\n/**\n * add items to Outlayer instance\n * @param {Array or NodeList or Element} elems\n * @returns {Array} items - Outlayer.Items\n**/\nproto.addItems = function( elems ) {\n  var items = this._itemize( elems );\n  // add items to collection\n  if ( items.length ) {\n    this.items = this.items.concat( items );\n  }\n  return items;\n};\n\n/**\n * Layout newly-appended item elements\n * @param {Array or NodeList or Element} elems\n */\nproto.appended = function( elems ) {\n  var items = this.addItems( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // layout and reveal just the new items\n  this.layoutItems( items, true );\n  this.reveal( items );\n};\n\n/**\n * Layout prepended elements\n * @param {Array or NodeList or Element} elems\n */\nproto.prepended = function( elems ) {\n  var items = this._itemize( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // add items to beginning of collection\n  var previousItems = this.items.slice(0);\n  this.items = items.concat( previousItems );\n  // start new layout\n  this._resetLayout();\n  this._manageStamps();\n  // layout new stuff without transition\n  this.layoutItems( items, true );\n  this.reveal( items );\n  // layout previous items\n  this.layoutItems( previousItems );\n};\n\n/**\n * reveal a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.reveal = function( items ) {\n  this._emitCompleteOnItems( 'reveal', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.reveal();\n  });\n};\n\n/**\n * hide a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.hide = function( items ) {\n  this._emitCompleteOnItems( 'hide', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.hide();\n  });\n};\n\n/**\n * reveal item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.revealItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.reveal( items );\n};\n\n/**\n * hide item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.hideItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.hide( items );\n};\n\n/**\n * get Outlayer.Item, given an Element\n * @param {Element} elem\n * @param {Function} callback\n * @returns {Outlayer.Item} item\n */\nproto.getItem = function( elem ) {\n  // loop through items to get the one that matches\n  for ( var i=0; i < this.items.length; i++ ) {\n    var item = this.items[i];\n    if ( item.element == elem ) {\n      // return item\n      return item;\n    }\n  }\n};\n\n/**\n * get collection of Outlayer.Items, given Elements\n * @param {Array} elems\n * @returns {Array} items - Outlayer.Items\n */\nproto.getItems = function( elems ) {\n  elems = utils.makeArray( elems );\n  var items = [];\n  elems.forEach( function( elem ) {\n    var item = this.getItem( elem );\n    if ( item ) {\n      items.push( item );\n    }\n  }, this );\n\n  return items;\n};\n\n/**\n * remove element(s) from instance and DOM\n * @param {Array or NodeList or Element} elems\n */\nproto.remove = function( elems ) {\n  var removeItems = this.getItems( elems );\n\n  this._emitCompleteOnItems( 'remove', removeItems );\n\n  // bail if no items to remove\n  if ( !removeItems || !removeItems.length ) {\n    return;\n  }\n\n  removeItems.forEach( function( item ) {\n    item.remove();\n    // remove item from collection\n    utils.removeFrom( this.items, item );\n  }, this );\n};\n\n// ----- destroy ----- //\n\n// remove and disable Outlayer instance\nproto.destroy = function() {\n  // clean up dynamic styles\n  var style = this.element.style;\n  style.height = '';\n  style.position = '';\n  style.width = '';\n  // destroy items\n  this.items.forEach( function( item ) {\n    item.destroy();\n  });\n\n  this.unbindResize();\n\n  var id = this.element.outlayerGUID;\n  delete instances[ id ]; // remove reference to instance by id\n  delete this.element.outlayerGUID;\n  // remove data for jQuery\n  if ( jQuery ) {\n    jQuery.removeData( this.element, this.constructor.namespace );\n  }\n\n};\n\n// -------------------------- data -------------------------- //\n\n/**\n * get Outlayer instance from element\n * @param {Element} elem\n * @returns {Outlayer}\n */\nOutlayer.data = function( elem ) {\n  elem = utils.getQueryElement( elem );\n  var id = elem && elem.outlayerGUID;\n  return id && instances[ id ];\n};\n\n\n// -------------------------- create Outlayer class -------------------------- //\n\n/**\n * create a layout class\n * @param {String} namespace\n */\nOutlayer.create = function( namespace, options ) {\n  // sub-class Outlayer\n  var Layout = subclass( Outlayer );\n  // apply new options and compatOptions\n  Layout.defaults = utils.extend( {}, Outlayer.defaults );\n  utils.extend( Layout.defaults, options );\n  Layout.compatOptions = utils.extend( {}, Outlayer.compatOptions  );\n\n  Layout.namespace = namespace;\n\n  Layout.data = Outlayer.data;\n\n  // sub-class Item\n  Layout.Item = subclass( Item );\n\n  // -------------------------- declarative -------------------------- //\n\n  utils.htmlInit( Layout, namespace );\n\n  // -------------------------- jQuery bridge -------------------------- //\n\n  // make into jQuery plugin\n  if ( jQuery && jQuery.bridget ) {\n    jQuery.bridget( namespace, Layout );\n  }\n\n  return Layout;\n};\n\nfunction subclass( Parent ) {\n  function SubClass() {\n    Parent.apply( this, arguments );\n  }\n\n  SubClass.prototype = Object.create( Parent.prototype );\n  SubClass.prototype.constructor = SubClass;\n\n  return SubClass;\n}\n\n// ----- helpers ----- //\n\n// how many milliseconds are in each unit\nvar msUnits = {\n  ms: 1,\n  s: 1000\n};\n\n// munge time-like parameter into millisecond number\n// '0.4s' -> 40\nfunction getMilliseconds( time ) {\n  if ( typeof time == 'number' ) {\n    return time;\n  }\n  var matches = time.match( /(^\\d*\\.?\\d*)(\\w*)/ );\n  var num = matches && matches[1];\n  var unit = matches && matches[2];\n  if ( !num.length ) {\n    return 0;\n  }\n  num = parseFloat( num );\n  var mult = msUnits[ unit ] || 1;\n  return num * mult;\n}\n\n// ----- fin ----- //\n\n// back in global\nOutlayer.Item = Item;\n\nreturn Outlayer;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/outlayer/outlayer.js\n// module id = 3\n// module chunks = 0","/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, window */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\n\"use strict\";\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice(0);\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( var i=0; i < listeners.length; i++ ) {\n    var listener = listeners[i]\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n};\n\nreturn EvEmitter;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/ev-emitter/ev-emitter.js\n// module id = 4\n// module chunks = 0","import './lib/pollyfills.js';\nimport './lib/mousewheel.js';\nimport './gallery-themes.js';\nimport './lib/jquery.justifiedGallery.js';\nimport './lib/enviraJustifiedGallery-extensions.js';\nimport './lib/isotope.js';\nimport './lib/imagesloaded.js';\nimport './lib/envirabox.js';\nimport './lib/envirabox-fullscreen.js';\nimport './lib/envirabox-media.js';\nimport './lib/envirabox-wheel.js';\nimport './lib/envirabox-guestures.js';\nimport './lib/envirabox-thumbs.js';\nimport './lib/envirabox-slideshow.js';\n\nimport Envira from './gallery-init.js';\nimport Envira_Link from './gallery-link.js';\n\nvar envira_galleries = window.envira_galleries || {},\n\tenvira_links = window.envira_links || {};\n\n;(function ( $, window, document, Envira, Envira_Link, envira_gallery, envira_galleries ) {\n\n\t$(function() {\n\n\t\twindow.envira_galleries = envira_galleries;\n\t\twindow.envira_links = envira_links\n\n\t\t$( document ).on( 'envira_load', function(e){\n\n\t\t\te.stopPropagation();\n\t\t\tenvira_galleries = {};\n\t\t\tenvira_links = {};\n\n\t\t\t$('.envira-gallery-public').each(function() {\n\n\t\t\t\tlet $this             = $( this ),\n\t\t\t\t\t$id               = $this.data('envira-id'),\n\t\t\t\t\t$envira_galleries = $this.data('gallery-config'),\n\t\t\t\t\t$envira_images     = $this.data('gallery-images'),\n\t\t\t\t\t$envira_lightbox  = $this.data('lightbox-theme');\n\n\t\t\t\t\tif ( envira_galleries[ $envira_galleries[ 'gallery_id' ] ] === undefined ) {\n\n\t\t\t\t\t\tenvira_galleries[ $envira_galleries[ 'gallery_id' ] ] = new Envira( $id, $envira_galleries, $envira_images, $envira_lightbox );\n\n\t\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t$( '.envira-gallery-links' ).each(function( ) {\n\n\t\t\t\tlet $this = $( this ),\n\t\t\t\t\t$envira_galleries = $this.data('gallery-config'),\n\t\t\t\t\t$envira_images = $this.data('gallery-images'),\n\t\t\t\t\t$envira_lightbox = $this.data('lightbox-theme');\n\n\t\t\t\t\tif ( envira_links[ $envira_galleries[ 'gallery_id' ] ] === undefined ) {\n\n\t\t\t\t\t\tenvira_links[ $envira_galleries[ 'gallery_id' ] ] = new Envira_Link( $envira_galleries, $envira_images, $envira_lightbox );\n\n\t\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t$(document).trigger('envira_loaded', [ envira_galleries, envira_links] );\n\n\t\t});\n\n\t\t$(document).trigger('envira_load');\n\n\t\tif( envira_gallery.debug !== undefined && envira_gallery.debug ){\n\n\t\t\tconsole.log( envira_links );\n\t\t\tconsole.log( envira_galleries );\n\n\t\t}\n\n\t\t$( 'body' ).on( 'click', 'div.envirabox-title a[href*=\"#\"]:not([href=\"#\"])', function( e ) {\n\n\t\t\tif ( location.pathname.replace( /^\\//, '' ) == this.pathname.replace( /^\\//, '' ) && location.hostname == this.hostname ) {\n\t\t\t\t$.envirabox.close();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t} );\n\n\t\t/* setup lazy load event */\n\t\t$( document ).on( \"envira_image_lazy_load_complete\", function( event ) {\n\n\t\t\tif ( event !== undefined && event.image_id !== undefined && event.image_id !== null ) {\n\n\t\t\t\tlet envira_container = $('#envira-gallery-wrap-' + event.gallery_id).find('img#' + event.image_id);\n\n\t\t\t\tif ( $('#envira-gallery-wrap-' + event.gallery_id).find('div.envira-gallery-public').hasClass('envira-gallery-0-columns') ) {\n\n\t\t\t\t\t/* this is an automatic gallery */\n\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'div.envira-gallery-position-overlay' ).delay( 100 ).show();\n\n\t\t\t\t} else {\n\n\t\t\t\t\t/* this is a legacy gallery */\n\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'div.envira-gallery-position-overlay' ).delay( 100 ).show();\n\n\t\t\t\t\t/* re-do the padding bottom */\n\t\t\t\t\t/* $padding_bottom = ( $output_height / $output_width ) * 100; */\n\n\t\t\t\t\tvar envira_lazy_width = $( envira_container ).closest('div.envira-gallery-item-inner').find('.envira-lazy').width();\n\t\t\t\t\tvar ratio1 = ( event.naturalHeight / event.naturalWidth );\n\t\t\t\t\tvar ratio2 = ( event.naturalHeight / envira_lazy_width );\n\n\t\t\t\t\tif ( ratio2 < ratio1 ) {\n\t\t\t\t\t\tvar ratio = ratio2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar ratio = ratio1;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar padding_bottom = ratio * 100;\n\t\t\t\t\tif ( envira_container.closest('div.envira-gallery-public').parent().hasClass('envira-gallery-theme-sleek') ) {\n\t\t\t\t\t\t// add additional padding for this theme\n\t\t\t\t\t\tpadding_bottom = padding_bottom + 2;\n\t\t\t\t\t}\n\n\t\t\t\t    var div_envira_lazy = $( envira_container ).closest('div.envira-gallery-item-inner').find('div.envira-lazy');\n\t\t\t\t    var caption_height = div_envira_lazy.closest('div.envira-gallery-item-inner').find('.envira-gallery-captioned-data').height();\n\t\t\t\t    if ( $( envira_container ).closest('div.envira-gallery-item').hasClass('enviratope-item') ) {\n\t\t\t\t        div_envira_lazy.css('padding-bottom', padding_bottom + '%').attr('data-envira-changed', 'true');\n\t\t\t\t        var div_overlay = $( envira_container ).closest('div.envira-gallery-item-inner').find('.envira-gallery-position-overlay.envira-gallery-bottom-right');\n\t\t\t\t        div_overlay.css('bottom', caption_height);\n\t\t\t\t        div_overlay = $( envira_container ).closest('div.envira-gallery-item-inner').find('.envira-gallery-position-overlay.envira-gallery-bottom-left');\n\t\t\t\t        div_overlay.css('bottom', caption_height);\n\t\t\t\t    } else {\n\t\t\t\t        div_envira_lazy.css('height', 'auto').css('padding-bottom', '10px').attr('data-envira-changed', 'true');\n\t\t\t\t        var div_overlay = $( envira_container ).closest('div.envira-gallery-item-inner').find('.envira-gallery-position-overlay.envira-gallery-bottom-right');\n\t\t\t\t        div_overlay.css('bottom', caption_height + 10);\n\t\t\t\t        div_overlay = $( envira_container ).closest('div.envira-gallery-item-inner').find('.envira-gallery-position-overlay.envira-gallery-bottom-left');\n\t\t\t\t        div_overlay.css('bottom', caption_height + 10);\n\t\t\t\t    }\n\n\t\t\t\t    // div_envira_lazy.addClass('changed');\n\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'span.envira-title' ).delay( 1000 ).css('visibility', 'visible');\n\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'span.envira-caption' ).delay( 1000 ).css('visibility', 'visible');\n\n\t\t\t\t\tif ( window[\"envira_container_\" + event.gallery_id] !== undefined ) {\n\n\t\t\t\t\t\tif ( $('#envira-gallery-' + event.gallery_id).hasClass('enviratope') ) {\n\n\t\t\t\t\t\t\twindow[\"envira_container_\" + event.gallery_id].on( 'layoutComplete',\n\t\t\t\t\t\t\t  function( event, laidOutItems ) {\n\n\t\t\t\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'span.envira-title' ).delay( 1000 ).css('visibility', 'visible');\n\t\t\t\t\t\t\t\t$( envira_container ).closest('div.envira-gallery-item-inner').find( 'span.envira-caption' ).delay( 1000 ).css('visibility', 'visible');\n\n\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t} );\n\n})( jQuery , window, document, Envira, Envira_Link, envira_gallery, envira_galleries );\n\n\n// WEBPACK FOOTER //\n// ./assets/js/envira.js","/*!\n * Envira Pollyfills\n */\n\n/* add compatible Object.entries support for IE 11 */\n\nif (!Object.entries)\n  Object.entries = function( obj ){\n    var ownProps = Object.keys( obj ),\n        i = ownProps.length,\n        resArray = new Array(i); // preallocate the Array\n    while (i--)\n      resArray[i] = [ownProps[i], obj[ownProps[i]]];\n    \n    return resArray;\n  };\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/pollyfills.js","/*!\n * jQuery Mousewheel 3.1.13\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n */\n\n(function (factory) {\n    if ( typeof define === 'function' && define.amd ) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        // Node/CommonJS style for Browserify\n        module.exports = factory;\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n\n    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],\n        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?\n                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],\n        slice  = Array.prototype.slice,\n        nullLowestDeltaTimeout, lowestDelta;\n\n    if ( $.event.fixHooks ) {\n        for ( var i = toFix.length; i; ) {\n            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;\n        }\n    }\n\n    var special = $.event.special.mousewheel = {\n        version: '3.1.12',\n\n        setup: function() {\n            if ( this.addEventListener ) {\n                for ( var i = toBind.length; i; ) {\n                    this.addEventListener( toBind[--i], handler, false );\n                }\n            } else {\n                this.onmousewheel = handler;\n            }\n            // Store the line height and page height for this particular element\n            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));\n            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));\n        },\n\n        teardown: function() {\n            if ( this.removeEventListener ) {\n                for ( var i = toBind.length; i; ) {\n                    this.removeEventListener( toBind[--i], handler, false );\n                }\n            } else {\n                this.onmousewheel = null;\n            }\n            // Clean up the data we added to the element\n            $.removeData(this, 'mousewheel-line-height');\n            $.removeData(this, 'mousewheel-page-height');\n        },\n\n        getLineHeight: function(elem) {\n            var $elem = $(elem),\n                $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();\n            if (!$parent.length) {\n                $parent = $('body');\n            }\n            return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;\n        },\n\n        getPageHeight: function(elem) {\n            return $(elem).height();\n        },\n\n        settings: {\n            adjustOldDeltas: true, // see shouldAdjustOldDeltas() below\n            normalizeOffset: true  // calls getBoundingClientRect for each event\n        }\n    };\n\n    $.fn.extend({\n        mousewheel: function(fn) {\n            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');\n        },\n\n        unmousewheel: function(fn) {\n            return this.unbind('mousewheel', fn);\n        }\n    });\n\n\n    function handler(event) {\n        var orgEvent   = event || window.event,\n            args       = slice.call(arguments, 1),\n            delta      = 0,\n            deltaX     = 0,\n            deltaY     = 0,\n            absDelta   = 0,\n            offsetX    = 0,\n            offsetY    = 0;\n        event = $.event.fix(orgEvent);\n        event.type = 'mousewheel';\n\n        // Old school scrollwheel delta\n        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }\n        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }\n        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }\n        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }\n\n        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event\n        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {\n            deltaX = deltaY * -1;\n            deltaY = 0;\n        }\n\n        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy\n        delta = deltaY === 0 ? deltaX : deltaY;\n\n        // New school wheel delta (wheel event)\n        if ( 'deltaY' in orgEvent ) {\n            deltaY = orgEvent.deltaY * -1;\n            delta  = deltaY;\n        }\n        if ( 'deltaX' in orgEvent ) {\n            deltaX = orgEvent.deltaX;\n            if ( deltaY === 0 ) { delta  = deltaX * -1; }\n        }\n\n        // No change actually happened, no reason to go any further\n        if ( deltaY === 0 && deltaX === 0 ) { return; }\n\n        // Need to convert lines and pages to pixels if we aren't already in pixels\n        // There are three delta modes:\n        //   * deltaMode 0 is by pixels, nothing to do\n        //   * deltaMode 1 is by lines\n        //   * deltaMode 2 is by pages\n        if ( orgEvent.deltaMode === 1 ) {\n            var lineHeight = $.data(this, 'mousewheel-line-height');\n            delta  *= lineHeight;\n            deltaY *= lineHeight;\n            deltaX *= lineHeight;\n        } else if ( orgEvent.deltaMode === 2 ) {\n            var pageHeight = $.data(this, 'mousewheel-page-height');\n            delta  *= pageHeight;\n            deltaY *= pageHeight;\n            deltaX *= pageHeight;\n        }\n\n        // Store lowest absolute delta to normalize the delta values\n        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );\n\n        if ( !lowestDelta || absDelta < lowestDelta ) {\n            lowestDelta = absDelta;\n\n            // Adjust older deltas if necessary\n            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {\n                lowestDelta /= 40;\n            }\n        }\n\n        // Adjust older deltas if necessary\n        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {\n            // Divide all the things by 40!\n            delta  /= 40;\n            deltaX /= 40;\n            deltaY /= 40;\n        }\n\n        // Get a whole, normalized value for the deltas\n        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);\n        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);\n        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);\n\n        // Normalise offsetX and offsetY properties\n        if ( special.settings.normalizeOffset && this.getBoundingClientRect ) {\n            var boundingRect = this.getBoundingClientRect();\n            offsetX = event.clientX - boundingRect.left;\n            offsetY = event.clientY - boundingRect.top;\n        }\n\n        // Add information to the event object\n        event.deltaX = deltaX;\n        event.deltaY = deltaY;\n        event.deltaFactor = lowestDelta;\n        event.offsetX = offsetX;\n        event.offsetY = offsetY;\n        // Go ahead and set deltaMode to 0 since we converted to pixels\n        // Although this is a little odd since we overwrite the deltaX/Y\n        // properties with normalized deltas.\n        event.deltaMode = 0;\n\n        // Add event and delta to the front of the arguments\n        args.unshift(event, delta, deltaX, deltaY);\n\n        // Clearout lowestDelta after sometime to better\n        // handle multiple device types that give different\n        // a different lowestDelta\n        // Ex: trackpad = 3 and mouse wheel = 120\n        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }\n        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);\n\n        return ($.event.dispatch || $.event.handle).apply(this, args);\n    }\n\n    function nullLowestDelta() {\n        lowestDelta = null;\n    }\n\n    function shouldAdjustOldDeltas(orgEvent, absDelta) {\n        // If this is an older event and the delta is divisable by 120,\n        // then we are assuming that the browser is treating this as an\n        // older mouse wheel event and that we should divide the deltas\n        // by 40 to try and get a more usable deltaFactor.\n        // Side note, this actually impacts the reported scroll distance\n        // in older browsers and can cause scrolling to be slower than native.\n        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.\n        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;\n    }\n\n}));\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/mousewheel.js","function jg_effect_desaturate(src) {\n    var supportsCanvas = !!document.createElement('canvas').getContext;\n    if (supportsCanvas) {\n        var canvas = document.createElement('canvas'),\n        context = canvas.getContext('2d'),\n        imageData, px, length, i = 0, gray,\n        img = new Image();\n\n        img.src = src;\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context.drawImage(img, 0, 0);\n\n        imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        px = imageData.data;\n        length = px.length;\n\n        for (; i < length; i += 4) {\n            gray = px[i] * .3 + px[i + 1] * .59 + px[i + 2] * .11;\n            px[i] = px[i + 1] = px[i + 2] = gray;\n        }\n\n        context.putImageData(imageData, 0, 0);\n        return canvas.toDataURL();\n    } else {\n        return src;\n    }\n}\n\nfunction jg_effect_threshold(src) {\n    var supportsCanvas = !!document.createElement('canvas').getContext;\n    if (supportsCanvas) {\n        var canvas = document.createElement('canvas'),\n        context = canvas.getContext('2d'),\n        imageData, px, length, i = 0, gray,\n        img = new Image();\n\n        img.src = src;\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context.drawImage(img, 0, 0);\n\n        imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        px = imageData.data;\n        length = px.length;\n\n        threshold = 120;\n\n        for (var i=0; i<length; i+=4) {\n            var r = px[i];\n            var g = px[i+1];\n            var b = px[i+2];\n            var v = (0.2126*r + 0.7152*g + 0.0722*b >= threshold) ? 255 : 0;\n            px[i] = px[i+1] = px[i+2] = v\n        }\n\n        context.putImageData(imageData, 0, 0);\n        return canvas.toDataURL();\n    } else {\n        return src;\n    }\n}\n\nfunction jg_effect_blur(src) {\n    var supportsCanvas = !!document.createElement('canvas').getContext;\n    if (supportsCanvas) {\n        var canvas = document.createElement('canvas'),\n        context = canvas.getContext('2d'),\n        imageData, px, length, i = 0, gray, top_x = 0, top_y = 0, radius = 30, iterations = 1\n        img = new Image();\n\n        img.src = src;\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context.drawImage(img, 0, 0);\n\n        var imageData;\n        var width = img.width;\n        var height = img.height;\n\n        imageData = context.getImageData( top_x, top_y, width, height );\n        var pixels = imageData.data;\n\n        var rsum,gsum,bsum,asum,x,y,i,p,p1,p2,yp,yi,yw,idx;\n        var wm = width - 1;\n        var hm = height - 1;\n        var wh = width * height;\n        var rad1 = radius + 1;\n\n        var r = [];\n        var g = [];\n        var b = [];\n\n        var mul_sum = mul_table[radius];\n        var shg_sum = shg_table[radius];\n\n        var vmin = [];\n        var vmax = [];\n\n        while ( iterations-- > 0 ){\n            yw = yi = 0;\n\n            for ( y=0; y < height; y++ ){\n                rsum = pixels[yw]   * rad1;\n                gsum = pixels[yw+1] * rad1;\n                bsum = pixels[yw+2] * rad1;\n\n                for( i = 1; i <= radius; i++ ){\n                    p = yw + (((i > wm ? wm : i )) << 2 );\n                    rsum += pixels[p++];\n                    gsum += pixels[p++];\n                    bsum += pixels[p++];\n                }\n\n                for ( x = 0; x < width; x++ ){\n                    r[yi] = rsum;\n                    g[yi] = gsum;\n                    b[yi] = bsum;\n\n                    if( y==0) {\n                        vmin[x] = ( ( p = x + rad1) < wm ? p : wm ) << 2;\n                        vmax[x] = ( ( p = x - radius) > 0 ? p << 2 : 0 );\n                    }\n\n                    p1 = yw + vmin[x];\n                    p2 = yw + vmax[x];\n\n                    rsum += pixels[p1++] - pixels[p2++];\n                    gsum += pixels[p1++] - pixels[p2++];\n                    bsum += pixels[p1++] - pixels[p2++];\n\n                    yi++;\n                }\n                yw += ( width << 2 );\n            }\n\n            for ( x = 0; x < width; x++ ){\n                yp = x;\n                rsum = r[yp] * rad1;\n                gsum = g[yp] * rad1;\n                bsum = b[yp] * rad1;\n\n                for( i = 1; i <= radius; i++ ){\n                  yp += ( i > hm ? 0 : width );\n                  rsum += r[yp];\n                  gsum += g[yp];\n                  bsum += b[yp];\n                }\n\n                yi = x << 2;\n                for ( y = 0; y < height; y++){\n                    pixels[yi]   = (rsum * mul_sum) >>> shg_sum;\n                    pixels[yi+1] = (gsum * mul_sum) >>> shg_sum;\n                    pixels[yi+2] = (bsum * mul_sum) >>> shg_sum;\n\n                    if( x == 0 ) {\n                        vmin[y] = ( ( p = y + rad1) < hm ? p : hm ) * width;\n                        vmax[y] = ( ( p = y - radius) > 0 ? p * width : 0 );\n                    }\n\n                    p1 = x + vmin[y];\n                    p2 = x + vmax[y];\n\n                    rsum += r[p1] - r[p2];\n                    gsum += g[p1] - g[p2];\n                    bsum += b[p1] - b[p2];\n\n                    yi += width << 2;\n                }\n            }\n        }\n        context.putImageData( imageData, top_x, top_y );\n\n        return canvas.toDataURL();\n\n    } else {\n        return src;\n    }\n}\n\nfunction jg_effect_vintage( img ) {\n    var options = {\n        onError: function() {\n            alert('ERROR');\n        }\n    };\n    var effect = {\n        vignette: 1,\n        sepia: true,\n        noise: 50,\n        desaturate: .2,\n        lighten: .1\n\n    };\n    new VintageJS(img, options, effect);\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/js/gallery-themes.js","/*!\n * Justified Gallery - v3.6.2\n * http://miromannino.github.io/Justified-Gallery/\n * Copyright (c) 2016 Miro Mannino\n * Licensed under the MIT license.\n */\n(function($) {\n\n  function hasScrollBar() {\n    return $(\"body\").height() > $(window).height();\n  }\n  /**\n   * Justified Gallery controller constructor\n   *\n   * @param $gallery the gallery to build\n   * @param settings the settings (the defaults are in $.fn.justifiedGallery.defaults)\n   * @constructor\n   */\n  var JustifiedGallery = function ($gallery, settings) {\n\n    this.settings = settings;\n    this.checkSettings();\n\n    this.imgAnalyzerTimeout = null;\n    this.entries = null;\n    this.buildingRow = {\n      entriesBuff : [],\n      width : 0,\n      height : 0,\n      aspectRatio : 0\n    };\n    this.lastAnalyzedIndex = -1;\n    this.yield = {\n      every : 2, // do a flush every n flushes (must be greater than 1)\n      flushed : 0 // flushed rows without a yield\n    };\n    this.border = settings.border >= 0 ? settings.border : settings.margins;\n    this.maxRowHeight = this.retrieveMaxRowHeight();\n    this.suffixRanges = this.retrieveSuffixRanges();\n    this.offY = this.border;\n    this.rows = 0;\n    this.spinner = {\n      phase : 0,\n      timeSlot : 150,\n      $el : $('<div class=\"spinner\"><span></span><span></span><span></span></div>'),\n      intervalId : null\n    };\n    this.checkWidthIntervalId = null;\n    this.galleryWidth = $gallery.width();\n    this.$gallery = $gallery;\n\n  };\n\n  /** @returns {String} the best suffix given the width and the height */\n  JustifiedGallery.prototype.getSuffix = function (width, height) {\n    var longestSide, i;\n    longestSide = (width > height) ? width : height;\n    for (i = 0; i < this.suffixRanges.length; i++) {\n      if (longestSide <= this.suffixRanges[i]) {\n        return this.settings.sizeRangeSuffixes[this.suffixRanges[i]];\n      }\n    }\n    return this.settings.sizeRangeSuffixes[this.suffixRanges[i - 1]];\n  };\n\n  /**\n   * Remove the suffix from the string\n   *\n   * @returns {string} a new string without the suffix\n   */\n  JustifiedGallery.prototype.removeSuffix = function (str, suffix) {\n    return str.substring(0, str.length - suffix.length);\n  };\n\n  /**\n   * @returns {boolean} a boolean to say if the suffix is contained in the str or not\n   */\n  JustifiedGallery.prototype.endsWith = function (str, suffix) {\n    return str.indexOf(suffix, str.length - suffix.length) !== -1;\n  };\n\n  /**\n   * Get the used suffix of a particular url\n   *\n   * @param str\n   * @returns {String} return the used suffix\n   */\n  JustifiedGallery.prototype.getUsedSuffix = function (str) {\n    for (var si in this.settings.sizeRangeSuffixes) {\n      if (this.settings.sizeRangeSuffixes.hasOwnProperty(si)) {\n        if (this.settings.sizeRangeSuffixes[si].length === 0) continue;\n        if (this.endsWith(str, this.settings.sizeRangeSuffixes[si])) return this.settings.sizeRangeSuffixes[si];\n      }\n    }\n    return '';\n  };\n\n  /**\n   * Given an image src, with the width and the height, returns the new image src with the\n   * best suffix to show the best quality thumbnail.\n   *\n   * @returns {String} the suffix to use\n   */\n  JustifiedGallery.prototype.newSrc = function (imageSrc, imgWidth, imgHeight) {\n    var newImageSrc;\n\n    if (this.settings.thumbnailPath) {\n      newImageSrc = this.settings.thumbnailPath(imageSrc, imgWidth, imgHeight);\n    } else {\n      var matchRes = imageSrc.match(this.settings.extension);\n      var ext = (matchRes !== null) ? matchRes[0] : '';\n      newImageSrc = imageSrc.replace(this.settings.extension, '');\n      newImageSrc = this.removeSuffix(newImageSrc, this.getUsedSuffix(newImageSrc));\n      newImageSrc += this.getSuffix(imgWidth, imgHeight) + ext;\n    }\n\n    return newImageSrc;\n  };\n\n  /**\n   * Shows the images that is in the given entry\n   *\n   * @param $entry the entry\n   * @param callback the callback that is called when the show animation is finished\n   */\n  JustifiedGallery.prototype.showImg = function ($entry, callback) {\n    if (this.settings.cssAnimation) {\n      $entry.addClass('entry-visible');\n      if (callback) callback();\n    } else {\n      $entry.stop().fadeTo(this.settings.imagesAnimationDuration, 1.0, callback);\n    }\n  };\n\n  /**\n   * Extract the image src form the image, looking from the 'safe-src', and if it can't be found, from the\n   * 'src' attribute. It saves in the image data the 'jg.originalSrc' field, with the extracted src.\n   *\n   * @param $image the image to analyze\n   * @returns {String} the extracted src\n   */\n  JustifiedGallery.prototype.extractImgSrcFromImage = function ($image) {\n    var imageSrc = (typeof $image.data('safe-src') !== 'undefined') ? $image.data('safe-src') : $image.attr('src');\n    $image.data('jg.originalSrc', imageSrc);\n    return imageSrc;\n  };\n\n  /** @returns {jQuery} the image in the given entry */\n  JustifiedGallery.prototype.imgFromEntry = function ($entry) {\n    var $img = $entry.find('> img');\n    if ($img.length === 0) $img = $entry.find('> a > img');\n    return $img.length === 0 ? null : $img;\n  };\n\n  /** @returns {jQuery} the caption in the given entry */\n  JustifiedGallery.prototype.captionFromEntry = function ($entry) {\n    var $caption = $entry.find('.caption');\n    return $caption.length === 0 ? null : $caption;\n  };\n\n  /**\n   * Display the entry\n   *\n   * @param {jQuery} $entry the entry to display\n   * @param {int} x the x position where the entry must be positioned\n   * @param y the y position where the entry must be positioned\n   * @param imgWidth the image width\n   * @param imgHeight the image height\n   * @param rowHeight the row height of the row that owns the entry\n   */\n  JustifiedGallery.prototype.displayEntry = function ($entry, x, y, imgWidth, imgHeight, rowHeight) {\n    $entry.width(imgWidth);\n    $entry.height(rowHeight);\n    $entry.css('top', y);\n    $entry.css('left', x);\n\n    var $image = this.imgFromEntry($entry);\n    if ($image !== null) {\n      $image.css('width', imgWidth);\n      $image.css('height', imgHeight);\n      $image.css('margin-left', - imgWidth / 2);\n      $image.css('margin-top', - imgHeight / 2);\n\n      // Image reloading for an high quality of thumbnails\n      var imageSrc = $image.attr('src');\n      var newImageSrc = this.newSrc(imageSrc, imgWidth, imgHeight);\n\n      $image.one('error', function () {\n        $image.attr('src', $image.data('jg.originalSrc')); //revert to the original thumbnail, we got it.\n      });\n\n      var loadNewImage = function () {\n        if (imageSrc !== newImageSrc) { //load the new image after the fadeIn\n          $image.attr('src', newImageSrc);\n        }\n      };\n\n      if ($entry.data('jg.loaded') === 'skipped') {\n        this.onImageEvent(imageSrc, $.proxy(function() {\n          this.showImg($entry, loadNewImage);\n          $entry.data('jg.loaded', true);\n        }, this));\n      } else {\n        this.showImg($entry, loadNewImage);\n      }\n\n    } else {\n      this.showImg($entry);\n    }\n\n    this.displayEntryCaption($entry);\n  };\n\n  /**\n   * Display the entry caption. If the caption element doesn't exists, it creates the caption using the 'alt'\n   * or the 'title' attributes.\n   *\n   * @param {jQuery} $entry the entry to process\n   */\n  JustifiedGallery.prototype.displayEntryCaption = function ($entry) {\n    var $image = this.imgFromEntry($entry);\n    if ($image !== null && this.settings.captions) {\n      var $imgCaption = this.captionFromEntry($entry);\n\n      // Create it if it doesn't exists\n      if ($imgCaption === null) {\n        var caption = $image.attr('alt');\n        if (!this.isValidCaption(caption)) caption = $entry.attr('title');\n        if (this.isValidCaption(caption)) { // Create only we found something\n          $imgCaption = $('<div class=\"caption\">' + caption + '</div>');\n          $entry.append($imgCaption);\n          $entry.data('jg.createdCaption', true);\n        }\n      }\n\n      // Create events (we check again the $imgCaption because it can be still inexistent)\n      if ($imgCaption !== null) {\n        if (!this.settings.cssAnimation) $imgCaption.stop().fadeTo(0, this.settings.captionSettings.nonVisibleOpacity);\n        this.addCaptionEventsHandlers($entry);\n      }\n    } else {\n      this.removeCaptionEventsHandlers($entry);\n    }\n  };\n\n  /**\n   * Validates the caption\n   *\n   * @param caption The caption that should be validated\n   * @return {boolean} Validation result\n   */\n  JustifiedGallery.prototype.isValidCaption = function (caption) {\n    return (typeof caption !== 'undefined' && caption.length > 0);\n  };\n\n  /**\n   * The callback for the event 'mouseenter'. It assumes that the event currentTarget is an entry.\n   * It shows the caption using jQuery (or using CSS if it is configured so)\n   *\n   * @param {Event} eventObject the event object\n   */\n  JustifiedGallery.prototype.onEntryMouseEnterForCaption = function (eventObject) {\n    var $caption = this.captionFromEntry($(eventObject.currentTarget));\n    if (this.settings.cssAnimation) {\n      if (typeof $caption !== 'undefined' && $caption != null ) {\n        $caption.addClass('caption-visible').removeClass('caption-hidden');\n      }\n    } else {\n      if (typeof $caption !== 'undefined' && $caption != null ) {\n        $caption.stop().fadeTo(this.settings.captionSettings.animationDuration,\n            this.settings.captionSettings.visibleOpacity);\n      }\n    }\n  };\n\n  /**\n   * The callback for the event 'mouseleave'. It assumes that the event currentTarget is an entry.\n   * It hides the caption using jQuery (or using CSS if it is configured so)\n   *\n   * @param {Event} eventObject the event object\n   */\n  JustifiedGallery.prototype.onEntryMouseLeaveForCaption = function (eventObject) {\n    var $caption = this.captionFromEntry($(eventObject.currentTarget));\n    if (this.settings.cssAnimation) {\n      if (typeof $caption !== 'undefined' && $caption != null ) {\n        $caption.removeClass('caption-visible').removeClass('caption-hidden');\n      }\n    } else {\n      if (typeof $caption !== 'undefined' && $caption != null ) {\n        $caption.stop().fadeTo(this.settings.captionSettings.animationDuration,\n            this.settings.captionSettings.nonVisibleOpacity);\n      }\n    }\n  };\n\n  /**\n   * Add the handlers of the entry for the caption\n   *\n   * @param $entry the entry to modify\n   */\n  JustifiedGallery.prototype.addCaptionEventsHandlers = function ($entry) {\n    var captionMouseEvents = $entry.data('jg.captionMouseEvents');\n    if (typeof captionMouseEvents === 'undefined') {\n      captionMouseEvents = {\n        mouseenter: $.proxy(this.onEntryMouseEnterForCaption, this),\n        mouseleave: $.proxy(this.onEntryMouseLeaveForCaption, this)\n      };\n      $entry.on('mouseenter', undefined, undefined, captionMouseEvents.mouseenter);\n      $entry.on('mouseleave', undefined, undefined, captionMouseEvents.mouseleave);\n      $entry.data('jg.captionMouseEvents', captionMouseEvents);\n    }\n  };\n\n  /**\n   * Remove the handlers of the entry for the caption\n   *\n   * @param $entry the entry to modify\n   */\n  JustifiedGallery.prototype.removeCaptionEventsHandlers = function ($entry) {\n    var captionMouseEvents = $entry.data('jg.captionMouseEvents');\n    if (typeof captionMouseEvents !== 'undefined') {\n      $entry.off('mouseenter', undefined, captionMouseEvents.mouseenter);\n      $entry.off('mouseleave', undefined, captionMouseEvents.mouseleave);\n      $entry.removeData('jg.captionMouseEvents');\n    }\n  };\n\n  /**\n   * Justify the building row, preparing it to\n   *\n   * @param isLastRow\n   * @returns a boolean to know if the row has been justified or not\n   */\n  JustifiedGallery.prototype.prepareBuildingRow = function (isLastRow) {\n    var i, $entry, imgAspectRatio, newImgW, newImgH, justify = true;\n    var minHeight = 0;\n    var availableWidth = this.galleryWidth - 2 * this.border - (\n        (this.buildingRow.entriesBuff.length - 1) * this.settings.margins);\n    var rowHeight = availableWidth / this.buildingRow.aspectRatio;\n    var defaultRowHeight = this.settings.rowHeight;\n    var justifiable = this.buildingRow.width / availableWidth > this.settings.justifyThreshold;\n\n    //Skip the last row if we can't justify it and the lastRow == 'hide'\n    if (isLastRow && this.settings.lastRow === 'hide' && !justifiable) {\n      for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n        $entry = this.buildingRow.entriesBuff[i];\n        if (this.settings.cssAnimation)\n          $entry.removeClass('entry-visible');\n        else\n          $entry.stop().fadeTo(0, 0);\n      }\n      return -1;\n    }\n\n    // With lastRow = nojustify, justify if is justificable (the images will not become too big)\n    if (isLastRow && !justifiable && this.settings.lastRow !== 'justify' && this.settings.lastRow !== 'hide') {\n      justify = false;\n\n      if (this.rows > 0) {\n        defaultRowHeight = (this.offY - this.border - this.settings.margins * this.rows) / this.rows;\n        if (defaultRowHeight * this.buildingRow.aspectRatio / availableWidth > this.settings.justifyThreshold) {\n          justify = true;\n        } else {\n          justify = false;\n        }\n      }\n    }\n\n    for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n      $entry = this.buildingRow.entriesBuff[i];\n      imgAspectRatio = $entry.data('jg.width') / $entry.data('jg.height');\n\n      if (justify) {\n        newImgW = (i === this.buildingRow.entriesBuff.length - 1) ? availableWidth : rowHeight * imgAspectRatio;\n        newImgH = rowHeight;\n\n        /* With fixedHeight the newImgH must be greater than rowHeight.\n         In some cases here this is not satisfied (due to the justification).\n         But we comment it, because is better to have a shorter but justified row instead\n         to have a cropped image at the end. */\n        /*if (this.settings.fixedHeight && newImgH < this.settings.rowHeight) {\n         newImgW = this.settings.rowHeight * imgAspectRatio;\n         newImgH = this.settings.rowHeight;\n         }*/\n\n      } else {\n        newImgW = defaultRowHeight * imgAspectRatio;\n        newImgH = defaultRowHeight;\n      }\n\n      availableWidth -= Math.round(newImgW);\n      $entry.data('jg.jwidth', Math.round(newImgW));\n      $entry.data('jg.jheight', Math.ceil(newImgH));\n      if (i === 0 || minHeight > newImgH) minHeight = newImgH;\n    }\n\n    if (this.settings.fixedHeight && minHeight > this.settings.rowHeight)\n      minHeight = this.settings.rowHeight;\n\n    this.buildingRow.height = minHeight;\n    return justify;\n  };\n\n  /**\n   * Clear the building row data to be used for a new row\n   */\n  JustifiedGallery.prototype.clearBuildingRow = function () {\n    this.buildingRow.entriesBuff = [];\n    this.buildingRow.aspectRatio = 0;\n    this.buildingRow.width = 0;\n  };\n\n  /**\n   * Flush a row: justify it, modify the gallery height accordingly to the row height\n   *\n   * @param isLastRow\n   */\n  JustifiedGallery.prototype.flushRow = function (isLastRow) {\n    var settings = this.settings;\n    var $entry, buildingRowRes, offX = this.border, i;\n\n    buildingRowRes = this.prepareBuildingRow(isLastRow);\n    if (isLastRow && settings.lastRow === 'hide' && buildingRowRes === -1) {\n      this.clearBuildingRow();\n      return;\n    }\n\n    if (this.maxRowHeight.isPercentage) {\n      if (this.maxRowHeight.value * settings.rowHeight < this.buildingRow.height) {\n        this.buildingRow.height = this.maxRowHeight.value * settings.rowHeight;\n      }\n    } else {\n      if (this.maxRowHeight.value > 0 && this.maxRowHeight.value < this.buildingRow.height) {\n        this.buildingRow.height = this.maxRowHeight.value;\n      }\n    }\n\n    //Align last (unjustified) row\n    if (settings.lastRow === 'center' || settings.lastRow === 'right') {\n      var availableWidth = this.galleryWidth - 2 * this.border - (this.buildingRow.entriesBuff.length - 1) * settings.margins;\n\n      for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n        $entry = this.buildingRow.entriesBuff[i];\n        availableWidth -= $entry.data('jg.jwidth');\n      }\n\n      if (settings.lastRow === 'center')\n        offX += availableWidth / 2;\n      else if (settings.lastRow === 'right')\n        offX += availableWidth;\n    }\n\n    for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n      $entry = this.buildingRow.entriesBuff[i];\n      this.displayEntry($entry, offX, this.offY, $entry.data('jg.jwidth'), $entry.data('jg.jheight'), this.buildingRow.height);\n      offX += $entry.data('jg.jwidth') + settings.margins;\n    }\n\n    //Gallery Height\n    this.galleryHeightToSet = this.offY + this.buildingRow.height + this.border;\n    this.$gallery.height(this.galleryHeightToSet + this.getSpinnerHeight());\n\n    if (!isLastRow || (this.buildingRow.height <= settings.rowHeight && buildingRowRes)) {\n      //Ready for a new row\n      this.offY += this.buildingRow.height + settings.margins;\n      this.rows += 1;\n      this.clearBuildingRow();\n      this.$gallery.trigger('jg.rowflush');\n    }\n  };\n\n  /**\n   * Checks the width of the gallery container, to know if a new justification is needed\n   */\n  var scrollBarOn = false;\n  JustifiedGallery.prototype.checkWidth = function () {\n    this.checkWidthIntervalId = setInterval($.proxy(function () {\n      var galleryWidth = parseFloat(this.$gallery.width());\n      if (hasScrollBar() === scrollBarOn){\n\n        if (Math.abs(galleryWidth - this.galleryWidth) > this.settings.refreshSensitivity) {\n          this.galleryWidth = galleryWidth;\n          this.rewind();\n\n          // Restart to analyze\n          this.startImgAnalyzer(true);\n        }\n      } else {\n        scrollBarOn = hasScrollBar();\n        this.galleryWidth = galleryWidth;\n      }\n    }, this), this.settings.refreshTime);\n  };\n\n  /**\n   * @returns {boolean} a boolean saying if the spinner is active or not\n   */\n  JustifiedGallery.prototype.isSpinnerActive = function () {\n    return this.spinner.intervalId !== null;\n  };\n\n  /**\n   * @returns {int} the spinner height\n   */\n  JustifiedGallery.prototype.getSpinnerHeight = function () {\n    return this.spinner.$el.innerHeight();\n  };\n\n  /**\n   * Stops the spinner animation and modify the gallery height to exclude the spinner\n   */\n  JustifiedGallery.prototype.stopLoadingSpinnerAnimation = function () {\n    clearInterval(this.spinner.intervalId);\n    this.spinner.intervalId = null;\n    this.$gallery.height(this.$gallery.height() - this.getSpinnerHeight());\n    this.spinner.$el.detach();\n  };\n\n  /**\n   * Starts the spinner animation\n   */\n  JustifiedGallery.prototype.startLoadingSpinnerAnimation = function () {\n    var spinnerContext = this.spinner;\n    var $spinnerPoints = spinnerContext.$el.find('span');\n    clearInterval(spinnerContext.intervalId);\n    this.$gallery.append(spinnerContext.$el);\n    this.$gallery.height(this.offY + this.buildingRow.height + this.getSpinnerHeight());\n    spinnerContext.intervalId = setInterval(function () {\n      if (spinnerContext.phase < $spinnerPoints.length) {\n        $spinnerPoints.eq(spinnerContext.phase).fadeTo(spinnerContext.timeSlot, 1);\n      } else {\n        $spinnerPoints.eq(spinnerContext.phase - $spinnerPoints.length).fadeTo(spinnerContext.timeSlot, 0);\n      }\n      spinnerContext.phase = (spinnerContext.phase + 1) % ($spinnerPoints.length * 2);\n    }, spinnerContext.timeSlot);\n  };\n\n  /**\n   * Rewind the image analysis to start from the first entry.\n   */\n  JustifiedGallery.prototype.rewind = function () {\n    this.lastAnalyzedIndex = -1;\n    this.offY = this.border;\n    this.rows = 0;\n    this.clearBuildingRow();\n  };\n\n  /**\n   * Update the entries searching it from the justified gallery HTML element\n   *\n   * @param norewind if norewind only the new entries will be changed (i.e. randomized, sorted or filtered)\n   * @returns {boolean} true if some entries has been founded\n   */\n  JustifiedGallery.prototype.updateEntries = function (norewind) {\n    this.entries = this.$gallery.find(this.settings.selector).toArray();\n    if (this.entries.length === 0) return false;\n\n    // Filter\n    if (this.settings.filter) {\n      this.modifyEntries(this.filterArray, norewind);\n    } else {\n      this.modifyEntries(this.resetFilters, norewind);\n    }\n\n    // Sort or randomize\n    if ($.isFunction(this.settings.sort)) {\n      this.modifyEntries(this.sortArray, norewind);\n    } else if (this.settings.randomize) {\n      this.modifyEntries(this.shuffleArray, norewind);\n    }\n\n    return true;\n  };\n\n  /**\n   * Apply the entries order to the DOM, iterating the entries and appending the images\n   *\n   * @param entries the entries that has been modified and that must be re-ordered in the DOM\n   */\n  JustifiedGallery.prototype.insertToGallery = function (entries) {\n    var that = this;\n    $.each(entries, function () {\n      $(this).appendTo(that.$gallery);\n    });\n  };\n\n  /**\n   * Shuffle the array using the Fisher-Yates shuffle algorithm\n   *\n   * @param a the array to shuffle\n   * @return the shuffled array\n   */\n  JustifiedGallery.prototype.shuffleArray = function (a) {\n    var i, j, temp;\n    for (i = a.length - 1; i > 0; i--) {\n      j = Math.floor(Math.random() * (i + 1));\n      temp = a[i];\n      a[i] = a[j];\n      a[j] = temp;\n    }\n    this.insertToGallery(a);\n    return a;\n  };\n\n  /**\n   * Sort the array using settings.comparator as comparator\n   *\n   * @param a the array to sort (it is sorted)\n   * @return the sorted array\n   */\n  JustifiedGallery.prototype.sortArray = function (a) {\n    a.sort(this.settings.sort);\n    this.insertToGallery(a);\n    return a;\n  };\n\n  /**\n   * Reset the filters removing the 'jg-filtered' class from all the entries\n   *\n   * @param a the array to reset\n   */\n  JustifiedGallery.prototype.resetFilters = function (a) {\n    for (var i = 0; i < a.length; i++) $(a[i]).removeClass('jg-filtered');\n    return a;\n  };\n\n  /**\n   * Filter the entries considering theirs classes (if a string has been passed) or using a function for filtering.\n   *\n   * @param a the array to filter\n   * @return the filtered array\n   */\n  JustifiedGallery.prototype.filterArray = function (a) {\n    var settings = this.settings;\n    if ($.type(settings.filter) === 'string') {\n      // Filter only keeping the entries passed in the string\n      return a.filter(function (el) {\n        var $el = $(el);\n        if ($el.is(settings.filter)) {\n          $el.removeClass('jg-filtered');\n          return true;\n        } else {\n          $el.addClass('jg-filtered');\n          return false;\n        }\n      });\n    } else if ($.isFunction(settings.filter)) {\n      // Filter using the passed function\n      return a.filter(settings.filter);\n    }\n  };\n\n  /**\n   * Modify the entries. With norewind only the new inserted images will be modified (the ones after lastAnalyzedIndex)\n   *\n   * @param functionToApply the function to call to modify the entries (e.g. sorting, randomization, filtering)\n   * @param norewind specify if the norewind has been called or not\n   */\n  JustifiedGallery.prototype.modifyEntries = function (functionToApply, norewind) {\n    var lastEntries = norewind ?\n        this.entries.splice(this.lastAnalyzedIndex + 1, this.entries.length - this.lastAnalyzedIndex - 1)\n        : this.entries;\n    lastEntries = functionToApply.call(this, lastEntries);\n    this.entries = norewind ? this.entries.concat(lastEntries) : lastEntries;\n  };\n\n  /**\n   * Destroy the Justified Gallery instance.\n   *\n   * It clears all the css properties added in the style attributes. We doesn't backup the original\n   * values for those css attributes, because it costs (performance) and because in general one\n   * shouldn't use the style attribute for an uniform set of images (where we suppose the use of\n   * classes). Creating a backup is also difficult because JG could be called multiple times and\n   * with different style attributes.\n   */\n  JustifiedGallery.prototype.destroy = function () {\n    clearInterval(this.checkWidthIntervalId);\n\n    $.each(this.entries, $.proxy(function(_, entry) {\n      var $entry = $(entry);\n\n      // Reset entry style\n      $entry.css('width', '');\n      $entry.css('height', '');\n      $entry.css('top', '');\n      $entry.css('left', '');\n      $entry.data('jg.loaded', undefined);\n      $entry.removeClass('jg-entry');\n\n      // Reset image style\n      var $img = this.imgFromEntry($entry);\n      $img.css('width', '');\n      $img.css('height', '');\n      $img.css('margin-left', '');\n      $img.css('margin-top', '');\n      $img.attr('src', $img.data('jg.originalSrc'));\n      $img.data('jg.originalSrc', undefined);\n\n      // Remove caption\n      this.removeCaptionEventsHandlers($entry);\n      var $caption = this.captionFromEntry($entry);\n      if ($entry.data('jg.createdCaption')) {\n        // remove also the caption element (if created by jg)\n        $entry.data('jg.createdCaption', undefined);\n        if ($caption !== null) $caption.remove();\n      } else {\n        if ($caption !== null) $caption.fadeTo(0, 1);\n      }\n\n    }, this));\n\n    this.$gallery.css('height', '');\n    this.$gallery.removeClass('envira-justified-gallery');\n    this.$gallery.data('jg.controller', undefined);\n  };\n\n  /**\n   * Analyze the images and builds the rows. It returns if it found an image that is not loaded.\n   *\n   * @param isForResize if the image analyzer is called for resizing or not, to call a different callback at the end\n   */\n  JustifiedGallery.prototype.analyzeImages = function (isForResize) {\n    for (var i = this.lastAnalyzedIndex + 1; i < this.entries.length; i++) {\n      var $entry = $(this.entries[i]);\n      if ($entry.data('jg.loaded') === true || $entry.data('jg.loaded') === 'skipped') {\n        var availableWidth = this.galleryWidth - 2 * this.border - (\n            (this.buildingRow.entriesBuff.length - 1) * this.settings.margins);\n        var imgAspectRatio = $entry.data('jg.width') / $entry.data('jg.height');\n        if (availableWidth / (this.buildingRow.aspectRatio + imgAspectRatio) < this.settings.rowHeight) {\n          this.flushRow(false);\n          if(++this.yield.flushed >= this.yield.every) {\n            this.startImgAnalyzer(isForResize);\n            return;\n          }\n        }\n\n        this.buildingRow.entriesBuff.push($entry);\n        this.buildingRow.aspectRatio += imgAspectRatio;\n        this.buildingRow.width += imgAspectRatio * this.settings.rowHeight;\n        this.lastAnalyzedIndex = i;\n\n      } else if ($entry.data('jg.loaded') !== 'error') {\n        return;\n      }\n    }\n\n    // Last row flush (the row is not full)\n    if (this.buildingRow.entriesBuff.length > 0) this.flushRow(true);\n\n    if (this.isSpinnerActive()) {\n      this.stopLoadingSpinnerAnimation();\n    }\n\n    /* Stop, if there is, the timeout to start the analyzeImages.\n     This is because an image can be set loaded, and the timeout can be set,\n     but this image can be analyzed yet.\n     */\n    this.stopImgAnalyzerStarter();\n\n    //On complete callback\n    this.$gallery.trigger(isForResize ? 'jg.resize' : 'jg.complete');\n    this.$gallery.height(this.galleryHeightToSet);\n  };\n\n  /**\n   * Stops any ImgAnalyzer starter (that has an assigned timeout)\n   */\n  JustifiedGallery.prototype.stopImgAnalyzerStarter = function () {\n    this.yield.flushed = 0;\n    if (this.imgAnalyzerTimeout !== null) clearTimeout(this.imgAnalyzerTimeout);\n  };\n\n  /**\n   * Starts the image analyzer. It is not immediately called to let the browser to update the view\n   *\n   * @param isForResize specifies if the image analyzer must be called for resizing or not\n   */\n  JustifiedGallery.prototype.startImgAnalyzer = function (isForResize) {\n    var that = this;\n    this.stopImgAnalyzerStarter();\n    this.imgAnalyzerTimeout = setTimeout(function () {\n      that.analyzeImages(isForResize);\n    }, 0.001); // we can't start it immediately due to a IE different behaviour\n  };\n\n  /**\n   * Checks if the image is loaded or not using another image object. We cannot use the 'complete' image property,\n   * because some browsers, with a 404 set complete = true.\n   *\n   * @param imageSrc the image src to load\n   * @param onLoad callback that is called when the image has been loaded\n   * @param onError callback that is called in case of an error\n   */\n  JustifiedGallery.prototype.onImageEvent = function (imageSrc, onLoad, onError) {\n    if (!onLoad && !onError) return;\n\n    var memImage = new Image();\n    var $memImage = $(memImage);\n    if (onLoad) {\n      $memImage.one('load', function () {\n        $memImage.off('load error');\n        onLoad(memImage);\n      });\n    }\n    if (onError) {\n      $memImage.one('error', function() {\n        $memImage.off('load error');\n        onError(memImage);\n      });\n    }\n    memImage.src = imageSrc;\n  };\n\n  /**\n   * Init of Justified Gallery controlled\n   * It analyzes all the entries starting theirs loading and calling the image analyzer (that works with loaded images)\n   */\n  JustifiedGallery.prototype.init = function () {\n    var imagesToLoad = false, skippedImages = false, that = this;\n    $.each(this.entries, function (index, entry) {\n      var $entry = $(entry);\n      var $image = that.imgFromEntry($entry);\n\n      $entry.addClass('jg-entry');\n\n      if ($entry.data('jg.loaded') !== true && $entry.data('jg.loaded') !== 'skipped') {\n\n        // Link Rel global overwrite\n        if (that.settings.rel !== null) $entry.attr('rel', that.settings.rel);\n\n        // Link Target global overwrite\n        if (that.settings.target !== null) $entry.attr('target', that.settings.target);\n\n        if ($image !== null) {\n\n          // Image src\n          var imageSrc = that.extractImgSrcFromImage($image);\n          $image.attr('src', imageSrc);\n\n          /* If we have the height and the width, we don't wait that the image is loaded, but we start directly\n           * with the justification */\n          if (that.settings.waitThumbnailsLoad === false) {\n            var width = parseFloat($image.attr('width'));\n            var height = parseFloat($image.attr('height'));\n            if (!isNaN(width) && !isNaN(height)) {\n              $entry.data('jg.width', width);\n              $entry.data('jg.height', height);\n              $entry.data('jg.loaded', 'skipped');\n              skippedImages = true;\n              that.startImgAnalyzer(false);\n              return true; // continue\n            }\n          }\n\n          $entry.data('jg.loaded', false);\n          imagesToLoad = true;\n\n          // Spinner start\n          if (!that.isSpinnerActive()) that.startLoadingSpinnerAnimation();\n\n          that.onImageEvent(imageSrc, function (loadImg) { // image loaded\n            $entry.data('jg.width', $entry.find('.envira-gallery-image').data('envira-width') );\n            $entry.data('jg.height', $entry.find('.envira-gallery-image').data('envira-height') );\n\n            $entry.data('jg.loaded', true);\n\n            \n            that.startImgAnalyzer(false);\n          }, function () { // image load error\n            $entry.data('jg.loaded', 'error');\n            that.startImgAnalyzer(false);\n          });\n\n        } else {\n          $entry.data('jg.loaded', true);\n          $entry.data('jg.width', $entry.width() | parseFloat($entry.css('width')) | 1);\n          $entry.data('jg.height', $entry.height() | parseFloat($entry.css('height')) | 1);\n        }\n\n      }\n\n    });\n\n    if (!imagesToLoad && !skippedImages) this.startImgAnalyzer(false);\n    this.checkWidth();\n  };\n\n  /**\n   * Checks that it is a valid number. If a string is passed it is converted to a number\n   *\n   * @param settingContainer the object that contains the setting (to allow the conversion)\n   * @param settingName the setting name\n   */\n  JustifiedGallery.prototype.checkOrConvertNumber = function (settingContainer, settingName) {\n    if ($.type(settingContainer[settingName]) === 'string') {\n      settingContainer[settingName] = parseFloat(settingContainer[settingName]);\n    }\n\n    if ($.type(settingContainer[settingName]) === 'number') {\n      if (isNaN(settingContainer[settingName])) throw 'invalid number for ' + settingName;\n    } else {\n      throw settingName + ' must be a number';\n    }\n  };\n\n  /**\n   * Checks the sizeRangeSuffixes and, if necessary, converts\n   * its keys from string (e.g. old settings with 'lt100') to int.\n   */\n  JustifiedGallery.prototype.checkSizeRangesSuffixes = function () {\n    if ($.type(this.settings.sizeRangeSuffixes) !== 'object') {\n      throw 'sizeRangeSuffixes must be defined and must be an object';\n    }\n\n    var suffixRanges = [];\n    for (var rangeIdx in this.settings.sizeRangeSuffixes) {\n      if (this.settings.sizeRangeSuffixes.hasOwnProperty(rangeIdx)) suffixRanges.push(rangeIdx);\n    }\n\n    var newSizeRngSuffixes = {0: ''};\n    for (var i = 0; i < suffixRanges.length; i++) {\n      if ($.type(suffixRanges[i]) === 'string') {\n        try {\n          var numIdx = parseInt(suffixRanges[i].replace(/^[a-z]+/, ''), 10);\n          newSizeRngSuffixes[numIdx] = this.settings.sizeRangeSuffixes[suffixRanges[i]];\n        } catch (e) {\n          throw 'sizeRangeSuffixes keys must contains correct numbers (' + e + ')';\n        }\n      } else {\n        newSizeRngSuffixes[suffixRanges[i]] = this.settings.sizeRangeSuffixes[suffixRanges[i]];\n      }\n    }\n\n    this.settings.sizeRangeSuffixes = newSizeRngSuffixes;\n  };\n\n  /**\n   * check and convert the maxRowHeight setting\n   */\n  JustifiedGallery.prototype.retrieveMaxRowHeight = function () {\n    var newMaxRowHeight = { };\n\n    if ($.type(this.settings.maxRowHeight) === 'string') {\n      if (this.settings.maxRowHeight.match(/^[0-9]+%$/)) {\n        newMaxRowHeight.value = parseFloat(this.settings.maxRowHeight.match(/^([0-9]+)%$/)[1]) / 100;\n        newMaxRowHeight.isPercentage = false;\n      } else {\n        newMaxRowHeight.value = parseFloat(this.settings.maxRowHeight);\n        newMaxRowHeight.isPercentage = true;\n      }\n    } else if ($.type(this.settings.maxRowHeight) === 'number') {\n      newMaxRowHeight.value = this.settings.maxRowHeight;\n      newMaxRowHeight.isPercentage = false;\n    } else {\n      throw 'maxRowHeight must be a number or a percentage';\n    }\n\n    // check if the converted value is not a number\n    if (isNaN(newMaxRowHeight.value)) throw 'invalid number for maxRowHeight';\n\n    // check values\n    if (newMaxRowHeight.isPercentage) {\n      if (newMaxRowHeight.value < 100) newMaxRowHeight.value = 100;\n    } else {\n      if (newMaxRowHeight.value > 0 && newMaxRowHeight.value < this.settings.rowHeight) {\n        newMaxRowHeight.value = this.settings.rowHeight;\n      }\n    }\n\n    return newMaxRowHeight;\n\n  };\n\n  /**\n   * Checks the settings\n   */\n  JustifiedGallery.prototype.checkSettings = function () {\n    this.checkSizeRangesSuffixes();\n\n    this.checkOrConvertNumber(this.settings, 'rowHeight');\n    this.checkOrConvertNumber(this.settings, 'margins');\n    this.checkOrConvertNumber(this.settings, 'border');\n\n    var lastRowModes = [\n      'justify',\n      'nojustify',\n      'left',\n      'center',\n      'right',\n      'hide'\n    ];\n    if (lastRowModes.indexOf(this.settings.lastRow) === -1) {\n      throw 'lastRow must be one of: ' + lastRowModes.join(', ');\n    }\n\n    this.checkOrConvertNumber(this.settings, 'justifyThreshold');\n    if (this.settings.justifyThreshold < 0 || this.settings.justifyThreshold > 1) {\n      throw 'justifyThreshold must be in the interval [0,1]';\n    }\n    if ($.type(this.settings.cssAnimation) !== 'boolean') {\n      throw 'cssAnimation must be a boolean';\n    }\n\n    if ($.type(this.settings.captions) !== 'boolean') throw 'captions must be a boolean';\n    this.checkOrConvertNumber(this.settings.captionSettings, 'animationDuration');\n\n    this.checkOrConvertNumber(this.settings.captionSettings, 'visibleOpacity');\n    if (this.settings.captionSettings.visibleOpacity < 0 ||\n        this.settings.captionSettings.visibleOpacity > 1) {\n      throw 'captionSettings.visibleOpacity must be in the interval [0, 1]';\n    }\n\n    this.checkOrConvertNumber(this.settings.captionSettings, 'nonVisibleOpacity');\n    if (this.settings.captionSettings.nonVisibleOpacity < 0 ||\n        this.settings.captionSettings.nonVisibleOpacity > 1) {\n      throw 'captionSettings.nonVisibleOpacity must be in the interval [0, 1]';\n    }\n\n    if ($.type(this.settings.fixedHeight) !== 'boolean') throw 'fixedHeight must be a boolean';\n    this.checkOrConvertNumber(this.settings, 'imagesAnimationDuration');\n    this.checkOrConvertNumber(this.settings, 'refreshTime');\n    this.checkOrConvertNumber(this.settings, 'refreshSensitivity');\n    if ($.type(this.settings.randomize) !== 'boolean') throw 'randomize must be a boolean';\n    if ($.type(this.settings.selector) !== 'string') throw 'selector must be a string';\n\n    if (this.settings.sort !== false && !$.isFunction(this.settings.sort)) {\n      throw 'sort must be false or a comparison function';\n    }\n\n    if (this.settings.filter !== false && !$.isFunction(this.settings.filter) &&\n        $.type(this.settings.filter) !== 'string') {\n      throw 'filter must be false, a string or a filter function';\n    }\n  };\n\n  /**\n   * It brings all the indexes from the sizeRangeSuffixes and it orders them. They are then sorted and returned.\n   * @returns {Array} sorted suffix ranges\n   */\n  JustifiedGallery.prototype.retrieveSuffixRanges = function () {\n    var suffixRanges = [];\n    for (var rangeIdx in this.settings.sizeRangeSuffixes) {\n      if (this.settings.sizeRangeSuffixes.hasOwnProperty(rangeIdx)) suffixRanges.push(parseInt(rangeIdx, 10));\n    }\n    suffixRanges.sort(function (a, b) { return a > b ? 1 : a < b ? -1 : 0; });\n    return suffixRanges;\n  };\n\n  /**\n   * Update the existing settings only changing some of them\n   *\n   * @param newSettings the new settings (or a subgroup of them)\n   */\n  JustifiedGallery.prototype.updateSettings = function (newSettings) {\n    // In this case Justified Gallery has been called again changing only some options\n    this.settings = $.extend({}, this.settings, newSettings);\n    this.checkSettings();\n\n    // As reported in the settings: negative value = same as margins, 0 = disabled\n    this.border = this.settings.border >= 0 ? this.settings.border : this.settings.margins;\n\n    this.maxRowHeight = this.retrieveMaxRowHeight();\n    this.suffixRanges = this.retrieveSuffixRanges();\n  };\n\n  /**\n   * Justified Gallery plugin for jQuery\n   *\n   * Events\n   *  - jg.complete : called when all the gallery has been created\n   *  - jg.resize : called when the gallery has been resized\n   *  - jg.rowflush : when a new row appears\n   *\n   * @param arg the action (or the settings) passed when the plugin is called\n   * @returns {*} the object itself\n   */\n  $.fn.justifiedGallery = function (arg) {\n    return this.each(function (index, gallery) {\n\n      var $gallery = $(gallery);\n      \n      $gallery.addClass('envira-justified-gallery');\n\n      var controller = $gallery.data('jg.controller');\n      if (typeof controller === 'undefined') {\n        // Create controller and assign it to the object data\n        if (typeof arg !== 'undefined' && arg !== null && $.type(arg) !== 'object') {\n          if (arg === 'destroy') return; // Just a call to an unexisting object\n          throw 'The argument must be an object';\n        }\n        controller = new JustifiedGallery($gallery, $.extend({}, $.fn.justifiedGallery.defaults, arg));\n        $gallery.data('jg.controller', controller);\n      } else if (arg === 'norewind') {\n        // In this case we don't rewind: we analyze only the latest images (e.g. to complete the last unfinished row\n        // ... left to be more readable\n      } else if (arg === 'destroy') {\n        controller.destroy();\n        return;\n      } else {\n        // In this case Justified Gallery has been called again changing only some options\n        controller.updateSettings(arg);\n        controller.rewind();\n      }\n\n      // Update the entries list\n      if (!controller.updateEntries(arg === 'norewind')) return;\n\n      // Init justified gallery\n      controller.init();\n\n    });\n  };\n\n  // Default options\n  $.fn.justifiedGallery.defaults = {\n    sizeRangeSuffixes: { }, /* e.g. Flickr configuration\n        {\n          100: '_t',  // used when longest is less than 100px\n          240: '_m',  // used when longest is between 101px and 240px\n          320: '_n',  // ...\n          500: '',\n          640: '_z',\n          1024: '_b'  // used as else case because it is the last\n        }\n    */\n    thumbnailPath: undefined, /* If defined, sizeRangeSuffixes is not used, and this function is used to determine the\n    path relative to a specific thumbnail size. The function should accept respectively three arguments:\n    current path, width and height */\n    rowHeight: 120,\n    maxRowHeight: -1, // negative value = no limits, number to express the value in pixels,\n                          // '[0-9]+%' to express in percentage (e.g. 300% means that the row height\n                          // can't exceed 3 * rowHeight)\n    margins: 1,\n    border: -1, // negative value = same as margins, 0 = disabled, any other value to set the border\n\n    lastRow: 'nojustify', //  which is the same as 'left', or can be 'justify', 'center', 'right' or 'hide'\n\n    justifyThreshold: 0.90, /* if row width / available space > 0.90 it will be always justified\n                             * (i.e. lastRow setting is not considered) */\n    fixedHeight: false,\n    waitThumbnailsLoad: true,\n    captions: true,\n    cssAnimation: false,\n    imagesAnimationDuration: 500, // ignored with css animations\n    captionSettings: { // ignored with css animations\n      animationDuration: 500,\n      visibleOpacity: 0.7,\n      nonVisibleOpacity: 0.0\n    },\n    rel: null, // rewrite the rel of each analyzed links\n    target: null, // rewrite the target of all links\n    extension: /\\.[^.\\\\/]+$/, // regexp to capture the extension of an image\n    refreshTime: 100, // time interval (in ms) to check if the page changes its width\n    refreshSensitivity: 0, // change in width allowed (in px) without re-building the gallery\n    randomize: false,\n    sort: false, /*\n      - false: to do not sort\n      - function: to sort them using the function as comparator (see Array.prototype.sort())\n    */\n    filter: false, /*\n      - false: for a disabled filter\n      - a string: an entry is kept if entry.is(filter string) returns true\n                  see jQuery's .is() function for further information\n      - a function: invoked with arguments (entry, index, array). Return true to keep the entry, false otherwise.\n                    see Array.prototype.filter for further information.\n    */\n    selector: '> a, > div:not(.spinner)' // The selector that is used to know what are the entries of the gallery\n  };\n\n}(jQuery));\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/jquery.justifiedGallery.js","/*!\n * Justified Gallery / Envira Extensions and Overrides - v3.6.2\n * Copyright (c) 2016 David Bisset, Benjamin Rojas\n * Licensed under the MIT license.\n */\n\n(function ($) {\n\n\tvar justifiedGallery =  $.fn.justifiedGallery,\n\t\tEnviraJustifiedGallery = {};\n\n\t$.fn.enviraJustifiedGallery = function () {\n\n\t\tvar obj = justifiedGallery.apply(this, arguments);\n\t\t\tEnviraJustifiedGallery = obj.data('jg.controller');\n\n\t\t\tif (EnviraJustifiedGallery !== undefined) {\n\n\t\t\t\tEnviraJustifiedGallery.displayEntryCaption = function ($entry) {\n\n\t\t\t\tvar $image = this.imgFromEntry($entry);\n\n\t\t\t\tif ($image !== null && this.settings.captions) {\n\n\t\t\t\t\tvar $imgCaption = this.captionFromEntry($entry);\n\n\t\t\t\t\t// Create it if it doesn't exists\n\t\t\t\t\tif ($imgCaption === null) {\n\n\t\t\t\t\t\tvar caption = $image.data('caption'),\n\t\t\t\t\t\t\trevised_caption = '';\n\n\t\t\t\t\t\tif ( caption !== undefined && typeof caption === 'string' ) {\n\n\t\t\t\t\t\t\tcaption = caption.replace('<', '&lt;');\n\t\t\t\t\t\t\trevised_caption = $('<textarea />').html(caption).text();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( revised_caption !== undefined ) {\n\t\t\t\t\t\t\tif (this.isValidCaption(revised_caption)) { // Create only we found something\n\t\t\t\t\t\t\t\t$imgCaption = $('<div class=\"caption\">' + revised_caption + '</div>');\n\t\t\t\t\t\t\t\t$image.after($imgCaption);\n\t\t\t\t\t\t\t\t$entry.data('jg.createdCaption', true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t            }\n\n\t\t  // Create events (we check again the $imgCaption because it can be still inexistent)\n\t\t  if ($imgCaption !== null) {\n\t\t\tif (!this.settings.cssAnimation) $imgCaption.stop().fadeTo(0, this.settings.captionSettings.nonVisibleOpacity);\n\t\t\t// Adjust the positioning of overlay buttons so that it doesn't overlap the caption\n\t\t\tvar imgCaptionHeight = $imgCaption.css('height');\n\t\t\t$entry.find('.envira-gallery-position-overlay.envira-gallery-bottom-left').css('bottom', imgCaptionHeight );\n\t\t\t$entry.find('.envira-gallery-position-overlay.envira-gallery-bottom-right').css('bottom', imgCaptionHeight );\n\t\t\tthis.addCaptionEventsHandlers($entry);\n\t\t  }\n\t\t} else {\n\t\t  this.removeCaptionEventsHandlers($entry);\n\t\t}\n\t};\n\n\treturn EnviraJustifiedGallery;\n\n\t}\n\n  };\n})(jQuery);\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/enviraJustifiedGallery-extensions.js","/*!\n * Enviratope PACKAGED v3.0.0\n *\n * Licensed GPLv3 for open source use\n * or Enviratope Commercial License for commercial use\n *\n * http://enviratope.metafizzy.co\n * Copyright 2016 Metafizzy\n */\n\n/**\n * Bridget makes jQuery widgets\n * v2.0.0\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  'use strict';\n  /* globals define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\n      factory( window, jQuery );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('jquery')\n    );\n  } else {\n    // browser global\n    window.jQueryBridget = factory(\n      window,\n      window.jQuery\n    );\n  }\n\n}( window, function factory( window, jQuery ) {\n'use strict';\n\n// ----- utils ----- //\n\nvar arraySlice = Array.prototype.slice;\n\n// helper function for logging errors\n// $.error breaks jQuery chaining\nvar console = window.console;\nvar logError = typeof console == 'undefined' ? function() {} :\n  function( message ) {\n    console.error( message );\n  };\n\n// ----- jQueryBridget ----- //\n\nfunction jQueryBridget( namespace, PluginClass, $ ) {\n  $ = $ || jQuery || window.jQuery;\n  if ( !$ ) {\n    return;\n  }\n\n  // add option method -> $().plugin('option', {...})\n  if ( !PluginClass.prototype.option ) {\n    // option setter\n    PluginClass.prototype.option = function( opts ) {\n      // bail out if not an object\n      if ( !$.isPlainObject( opts ) ){\n        return;\n      }\n      this.options = $.extend( true, this.options, opts );\n    };\n  }\n\n  // make jQuery plugin\n  $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\n    if ( typeof arg0 == 'string' ) {\n      // method call $().plugin( 'methodName', { options } )\n      // shift arguments by 1\n      var args = arraySlice.call( arguments, 1 );\n      return methodCall( this, arg0, args );\n    }\n    // just $().plugin({ options })\n    plainCall( this, arg0 );\n    return this;\n  };\n\n  // $().plugin('methodName')\n  function methodCall( $elems, methodName, args ) {\n    var returnValue;\n    var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\n\n    $elems.each( function( i, elem ) {\n      // get instance\n      var instance = $.data( elem, namespace );\n      if ( !instance ) {\n        logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\n          pluginMethodStr );\n        return;\n      }\n\n      var method = instance[ methodName ];\n      if ( !method || methodName.charAt(0) == '_' ) {\n        logError( pluginMethodStr + ' is not a valid method' );\n        return;\n      }\n\n      // apply method, get return value\n      var value = method.apply( instance, args );\n      // set return value if value is returned, use only first value\n      returnValue = returnValue === undefined ? value : returnValue;\n    });\n\n    return returnValue !== undefined ? returnValue : $elems;\n  }\n\n  function plainCall( $elems, options ) {\n    $elems.each( function( i, elem ) {\n      var instance = $.data( elem, namespace );\n      if ( instance ) {\n        // set options & init\n        instance.option( options );\n        instance._init();\n      } else {\n        // initialize new instance\n        instance = new PluginClass( elem, options );\n        $.data( elem, namespace, instance );\n      }\n    });\n  }\n\n  updateJQuery( $ );\n\n}\n\n// ----- updateJQuery ----- //\n\n// set $.bridget for v1 backwards compatibility\nfunction updateJQuery( $ ) {\n  if ( !$ || ( $ && $.bridget ) ) {\n    return;\n  }\n  $.bridget = jQueryBridget;\n}\n\nupdateJQuery( jQuery || window.jQuery );\n\n// -----  ----- //\n\nreturn jQueryBridget;\n\n}));\n\n/**\n * EvEmitter v1.0.2\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'ev-emitter/ev-emitter',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( this, function() {\n\n\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var i = 0;\n  var listener = listeners[i];\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  while ( listener ) {\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n    // get next listener\n    i += isOnce ? 0 : 1;\n    listener = listeners[i];\n  }\n\n  return this;\n};\n\nreturn EvEmitter;\n\n}));\n\n/*!\n * getSize v2.0.2\n * measure size of elements\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n/*global define: false, module: false, console: false */\n\n( function( window, factory ) {\n  'use strict';\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'get-size/get-size',[],function() {\n      return factory();\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.getSize = factory();\n  }\n\n})( window, function factory() {\n'use strict';\n\n// -------------------------- helpers -------------------------- //\n\n// get a number from a string, not a percentage\nfunction getStyleSize( value ) {\n  var num = parseFloat( value );\n  // not a percent like '100%', and a number\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\n  return isValid && num;\n}\n\nfunction noop() {}\n\nvar logError = typeof console == 'undefined' ? noop :\n  function( message ) {\n    console.error( message );\n  };\n\n// -------------------------- measurements -------------------------- //\n\nvar measurements = [\n  'paddingLeft',\n  'paddingRight',\n  'paddingTop',\n  'paddingBottom',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'marginBottom',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderTopWidth',\n  'borderBottomWidth'\n];\n\nvar measurementsLength = measurements.length;\n\nfunction getZeroSize() {\n  var size = {\n    width: 0,\n    height: 0,\n    innerWidth: 0,\n    innerHeight: 0,\n    outerWidth: 0,\n    outerHeight: 0\n  };\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    size[ measurement ] = 0;\n  }\n  return size;\n}\n\n// -------------------------- getStyle -------------------------- //\n\n/**\n * getStyle, get style of element, check for Firefox bug\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n */\nfunction getStyle( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    logError( 'Style returned ' + style +\n      '. Are you running this code in a hidden iframe on Firefox? ' +\n      'See http://bit.ly/getsizebug1' );\n  }\n  return style;\n}\n\n// -------------------------- setup -------------------------- //\n\nvar isSetup = false;\n\nvar isBoxSizeOuter;\n\n/**\n * setup\n * check isBoxSizerOuter\n * do on first getSize() rather than on page load for Firefox bug\n */\nfunction setup() {\n  // setup once\n  if ( isSetup ) {\n    return;\n  }\n  isSetup = true;\n\n  // -------------------------- box sizing -------------------------- //\n\n  /**\n   * WebKit measures the outer-width on style.width on border-box elems\n   * IE & Firefox<29 measures the inner-width\n   */\n  var div = document.createElement('div');\n  div.style.width = '200px';\n  div.style.padding = '1px 2px 3px 4px';\n  div.style.borderStyle = 'solid';\n  div.style.borderWidth = '1px 2px 3px 4px';\n  div.style.boxSizing = 'border-box';\n\n  var body = document.body || document.documentElement;\n  body.appendChild( div );\n  var style = getStyle( div );\n\n  getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize( style.width ) == 200;\n  body.removeChild( div );\n\n}\n\n// -------------------------- getSize -------------------------- //\n\nfunction getSize( elem ) {\n  setup();\n\n  // use querySeletor if elem is string\n  if ( typeof elem == 'string' ) {\n    elem = document.querySelector( elem );\n  }\n\n  // do not proceed on non-objects\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\n    return;\n  }\n\n  var style = getStyle( elem );\n\n  // if hidden, everything is 0\n  if ( style.display == 'none' ) {\n    return getZeroSize();\n  }\n\n  var size = {};\n  size.width = elem.offsetWidth;\n  size.height = elem.offsetHeight;\n\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\n\n  // get all measurements\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    var value = style[ measurement ];\n    var num = parseFloat( value );\n    // any 'auto', 'medium' value will be 0\n    size[ measurement ] = !isNaN( num ) ? num : 0;\n  }\n\n  var paddingWidth = size.paddingLeft + size.paddingRight;\n  var paddingHeight = size.paddingTop + size.paddingBottom;\n  var marginWidth = size.marginLeft + size.marginRight;\n  var marginHeight = size.marginTop + size.marginBottom;\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n\n  // overwrite width and height if we can get it from style\n  var styleWidth = getStyleSize( style.width );\n  if ( styleWidth !== false ) {\n    size.width = styleWidth +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\n  }\n\n  var styleHeight = getStyleSize( style.height );\n  if ( styleHeight !== false ) {\n    size.height = styleHeight +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\n  }\n\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\n\n  size.outerWidth = size.width + marginWidth;\n  size.outerHeight = size.height + marginHeight;\n\n  return size;\n}\n\nreturn getSize;\n\n});\n\n/**\n * matchesSelector v2.0.1\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  /*global define: false, module: false */\n  'use strict';\n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'desandro-matches-selector/matches-selector',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.matchesSelector = factory();\n  }\n\n}( window, function factory() {\n  'use strict';\n\n  var matchesMethod = ( function() {\n    var ElemProto = Element.prototype;\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n      return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n      return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0; i < prefixes.length; i++ ) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n      if ( ElemProto[ method ] ) {\n        return method;\n      }\n    }\n  })();\n\n  return function matchesSelector( elem, selector ) {\n    return elem[ matchesMethod ]( selector );\n  };\n\n}));\n\n/**\n * Fizzy UI utils v2.0.1\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n( function( window, factory ) {\n  // universal module definition\n  /*jshint strict: false */ /*globals define, module, require */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'fizzy-ui-utils/utils',[\n      'desandro-matches-selector/matches-selector'\n    ], function( matchesSelector ) {\n      return factory( window, matchesSelector );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('desandro-matches-selector')\n    );\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(\n      window,\n      window.matchesSelector\n    );\n  }\n\n}( window, function factory( window, matchesSelector ) {\n\n\n\nvar utils = {};\n\n// ----- extend ----- //\n\n// extends objects\nutils.extend = function( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n};\n\n// ----- modulo ----- //\n\nutils.modulo = function( num, div ) {\n  return ( ( num % div ) + div ) % div;\n};\n\n// ----- makeArray ----- //\n\n// turn element or nodeList into an array\nutils.makeArray = function( obj ) {\n  var ary = [];\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    ary = obj;\n  } else if ( obj && typeof obj.length == 'number' ) {\n    // convert nodeList to array\n    for ( var i=0; i < obj.length; i++ ) {\n      ary.push( obj[i] );\n    }\n  } else {\n    // array of single index\n    ary.push( obj );\n  }\n  return ary;\n};\n\n// ----- removeFrom ----- //\n\nutils.removeFrom = function( ary, obj ) {\n  var index = ary.indexOf( obj );\n  if ( index != -1 ) {\n    ary.splice( index, 1 );\n  }\n};\n\n// ----- getParent ----- //\n\nutils.getParent = function( elem, selector ) {\n  while ( elem != document.body ) {\n    elem = elem.parentNode;\n    if ( matchesSelector( elem, selector ) ) {\n      return elem;\n    }\n  }\n};\n\n// ----- getQueryElement ----- //\n\n// use element as selector string\nutils.getQueryElement = function( elem ) {\n  if ( typeof elem == 'string' ) {\n    return document.querySelector( elem );\n  }\n  return elem;\n};\n\n// ----- handleEvent ----- //\n\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\nutils.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n// ----- filterFindElements ----- //\n\nutils.filterFindElements = function( elems, selector ) {\n  // make array of elems\n  elems = utils.makeArray( elems );\n  var ffElems = [];\n\n  elems.forEach( function( elem ) {\n    // check that elem is an actual element\n    if ( !( elem instanceof HTMLElement ) ) {\n      return;\n    }\n    // add elem if no selector\n    if ( !selector ) {\n      ffElems.push( elem );\n      return;\n    }\n    // filter & find items if we have a selector\n    // filter\n    if ( matchesSelector( elem, selector ) ) {\n      ffElems.push( elem );\n    }\n    // find children\n    var childElems = elem.querySelectorAll( selector );\n    // concat childElems to filterFound array\n    for ( var i=0; i < childElems.length; i++ ) {\n      ffElems.push( childElems[i] );\n    }\n  });\n\n  return ffElems;\n};\n\n// ----- debounceMethod ----- //\n\nutils.debounceMethod = function( _class, methodName, threshold ) {\n  // original method\n  var method = _class.prototype[ methodName ];\n  var timeoutName = methodName + 'Timeout';\n\n  _class.prototype[ methodName ] = function() {\n    var timeout = this[ timeoutName ];\n    if ( timeout ) {\n      clearTimeout( timeout );\n    }\n    var args = arguments;\n\n    var _this = this;\n    this[ timeoutName ] = setTimeout( function() {\n      method.apply( _this, args );\n      delete _this[ timeoutName ];\n    }, threshold || 100 );\n  };\n};\n\n// ----- docReady ----- //\n\nutils.docReady = function( callback ) {\n  if ( document.readyState == 'complete' ) {\n    callback();\n  } else {\n    document.addEventListener( 'DOMContentLoaded', callback );\n  }\n};\n\n// ----- htmlInit ----- //\n\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\nutils.toDashed = function( str ) {\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\n    return $1 + '-' + $2;\n  }).toLowerCase();\n};\n\nvar console = window.console;\n/**\n * allow user to initialize classes via [data-namespace] or .js-namespace class\n * htmlInit( Widget, 'widgetName' )\n * options are parsed from data-namespace-options\n */\nutils.htmlInit = function( WidgetClass, namespace ) {\n  utils.docReady( function() {\n    var dashedNamespace = utils.toDashed( namespace );\n    var dataAttr = 'data-' + dashedNamespace;\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\n    var elems = utils.makeArray( dataAttrElems )\n      .concat( utils.makeArray( jsDashElems ) );\n    var dataOptionsAttr = dataAttr + '-options';\n    var jQuery = window.jQuery;\n\n    elems.forEach( function( elem ) {\n      var attr = elem.getAttribute( dataAttr ) ||\n        elem.getAttribute( dataOptionsAttr );\n      var options;\n      try {\n        options = attr && JSON.parse( attr );\n      } catch ( error ) {\n        // log error, do not initialize\n        if ( console ) {\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\n          ': ' + error );\n        }\n        return;\n      }\n      // initialize\n      var instance = new WidgetClass( elem, options );\n      // make available via $().data('layoutname')\n      if ( jQuery ) {\n        jQuery.data( elem, namespace, instance );\n      }\n    });\n\n  });\n};\n\n// -----  ----- //\n\nreturn utils;\n\n}));\n\n/**\n * Outlayer Item\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'outlayer/enviratope-item',[\n        'ev-emitter/ev-emitter',\n        'get-size/get-size'\n      ],\n      factory\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      require('ev-emitter'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(\n      window.EvEmitter,\n      window.getSize\n    );\n  }\n\n}( window, function factory( EvEmitter, getSize ) {\n'use strict';\n\n// ----- helpers ----- //\n\nfunction isEmptyObj( obj ) {\n  for ( var prop in obj ) {\n    return false;\n  }\n  prop = null;\n  return true;\n}\n\n// -------------------------- CSS3 support -------------------------- //\n\n\nvar docElemStyle = document.documentElement.style;\n\nvar transitionProperty = typeof docElemStyle.transition == 'string' ?\n  'transition' : 'WebkitTransition';\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\n  'transform' : 'WebkitTransform';\n\nvar transitionEndEvent = {\n  WebkitTransition: 'webkitTransitionEnd',\n  transition: 'transitionend'\n}[ transitionProperty ];\n\n// cache all vendor properties that could have vendor prefix\nvar vendorProperties = {\n  transform: transformProperty,\n  transition: transitionProperty,\n  transitionDuration: transitionProperty + 'Duration',\n  transitionProperty: transitionProperty + 'Property',\n  transitionDelay: transitionProperty + 'Delay'\n};\n\n// -------------------------- Item -------------------------- //\n\nfunction Item( element, layout ) {\n  if ( !element ) {\n    return;\n  }\n\n  this.element = element;\n  // parent layout class, i.e. Masonry, Enviratope, or Packery\n  this.layout = layout;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n\n  this._create();\n}\n\n// inherit EvEmitter\nvar proto = Item.prototype = Object.create( EvEmitter.prototype );\nproto.constructor = Item;\n\nproto._create = function() {\n  // transition objects\n  this._transn = {\n    ingProperties: {},\n    clean: {},\n    onEnd: {}\n  };\n\n  this.css({\n    position: 'absolute'\n  });\n};\n\n// trigger specified handler for event type\nproto.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * apply CSS styles to element\n * @param {Object} style\n */\nproto.css = function( style ) {\n  var elemStyle = this.element.style;\n\n  for ( var prop in style ) {\n    // use vendor property if available\n    var supportedProp = vendorProperties[ prop ] || prop;\n    elemStyle[ supportedProp ] = style[ prop ];\n  }\n};\n\n // measure position, and sets it\nproto.getPosition = function() {\n  var style = getComputedStyle( this.element );\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  var xValue = style[ isOriginLeft ? 'left' : 'right' ];\n  var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\n  // convert percent to pixels\n  var layoutSize = this.layout.size;\n  var x = xValue.indexOf('%') != -1 ?\n    ( parseFloat( xValue ) / 100 ) * layoutSize.width : parseInt( xValue, 10 );\n  var y = yValue.indexOf('%') != -1 ?\n    ( parseFloat( yValue ) / 100 ) * layoutSize.height : parseInt( yValue, 10 );\n\n  // clean up 'auto' or other non-integer values\n  x = isNaN( x ) ? 0 : x;\n  y = isNaN( y ) ? 0 : y;\n  // remove padding from measurement\n  x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n  y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n\n  this.position.x = x;\n  this.position.y = y;\n};\n\n// set settled position, apply padding\nproto.layoutPosition = function() {\n  var layoutSize = this.layout.size;\n  var style = {};\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n\n  // x\n  var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n  var xProperty = isOriginLeft ? 'left' : 'right';\n  var xResetProperty = isOriginLeft ? 'right' : 'left';\n\n  var x = this.position.x + layoutSize[ xPadding ];\n  // set in percentage or pixels\n  style[ xProperty ] = this.getXValue( x );\n  // reset other property\n  style[ xResetProperty ] = '';\n\n  // y\n  var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n  var yProperty = isOriginTop ? 'top' : 'bottom';\n  var yResetProperty = isOriginTop ? 'bottom' : 'top';\n\n  var y = this.position.y + layoutSize[ yPadding ];\n  // set in percentage or pixels\n  style[ yProperty ] = this.getYValue( y );\n  // reset other property\n  style[ yResetProperty ] = '';\n\n  this.css( style );\n  this.emitEvent( 'layout', [ this ] );\n};\n\nproto.getXValue = function( x ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && !isHorizontal ?\n    ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\n};\n\nproto.getYValue = function( y ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && isHorizontal ?\n    ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\n};\n\nproto._transitionTo = function( x, y ) {\n  this.getPosition();\n  // get current x & y from top/left\n  var curX = this.position.x;\n  var curY = this.position.y;\n\n  var compareX = parseInt( x, 10 );\n  var compareY = parseInt( y, 10 );\n  var didNotMove = compareX === this.position.x && compareY === this.position.y;\n\n  // save end position\n  this.setPosition( x, y );\n\n  // if did not move and not transitioning, just go to layout\n  if ( didNotMove && !this.isTransitioning ) {\n    this.layoutPosition();\n    return;\n  }\n\n  var transX = x - curX;\n  var transY = y - curY;\n  var transitionStyle = {};\n  transitionStyle.transform = this.getTranslate( transX, transY );\n\n  this.transition({\n    to: transitionStyle,\n    onTransitionEnd: {\n      transform: this.layoutPosition\n    },\n    isCleaning: true\n  });\n};\n\nproto.getTranslate = function( x, y ) {\n  // flip cooridinates if origin on right or bottom\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  x = isOriginLeft ? x : -x;\n  y = isOriginTop ? y : -y;\n  return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n};\n\n// non transition + transform support\nproto.goTo = function( x, y ) {\n  this.setPosition( x, y );\n  this.layoutPosition();\n};\n\nproto.moveTo = proto._transitionTo;\n\nproto.setPosition = function( x, y ) {\n  this.position.x = parseInt( x, 10 );\n  this.position.y = parseInt( y, 10 );\n};\n\n// ----- transition ----- //\n\n/**\n * @param {Object} style - CSS\n * @param {Function} onTransitionEnd\n */\n\n// non transition, just trigger callback\nproto._nonTransition = function( args ) {\n  this.css( args.to );\n  if ( args.isCleaning ) {\n    this._removeStyles( args.to );\n  }\n  for ( var prop in args.onTransitionEnd ) {\n    args.onTransitionEnd[ prop ].call( this );\n  }\n};\n\n/**\n * proper transition\n * @param {Object} args - arguments\n *   @param {Object} to - style to transition to\n *   @param {Object} from - style to start transition from\n *   @param {Boolean} isCleaning - removes transition styles after transition\n *   @param {Function} onTransitionEnd - callback\n */\nproto.transition = function( args ) {\n  // redirect to nonTransition if no transition duration\n  if ( !parseFloat( this.layout.options.transitionDuration ) ) {\n    this._nonTransition( args );\n    return;\n  }\n\n  var _transition = this._transn;\n  // keep track of onTransitionEnd callback by css property\n  for ( var prop in args.onTransitionEnd ) {\n    _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\n  }\n  // keep track of properties that are transitioning\n  for ( prop in args.to ) {\n    _transition.ingProperties[ prop ] = true;\n    // keep track of properties to clean up when transition is done\n    if ( args.isCleaning ) {\n      _transition.clean[ prop ] = true;\n    }\n  }\n\n  // set from styles\n  if ( args.from ) {\n    this.css( args.from );\n    // force redraw. http://blog.alexmaccaw.com/css-transitions\n    var h = this.element.offsetHeight;\n    // hack for JSHint to hush about unused var\n    h = null;\n  }\n  // enable transition\n  this.enableTransition( args.to );\n  // set styles that are transitioning\n  this.css( args.to );\n\n  this.isTransitioning = true;\n\n};\n\n// dash before all cap letters, including first for\n// WebkitTransform => -webkit-transform\nfunction toDashedAll( str ) {\n  return str.replace( /([A-Z])/g, function( $1 ) {\n    return '-' + $1.toLowerCase();\n  });\n}\n\nvar transitionProps = 'opacity,' + toDashedAll( transformProperty );\n\nproto.enableTransition = function(/* style */) {\n  // HACK changing transitionProperty during a transition\n  // will cause transition to jump\n  if ( this.isTransitioning ) {\n    return;\n  }\n\n  // make `transition: foo, bar, baz` from style object\n  // HACK un-comment this when enableTransition can work\n  // while a transition is happening\n  // var transitionValues = [];\n  // for ( var prop in style ) {\n  //   // dash-ify camelCased properties like WebkitTransition\n  //   prop = vendorProperties[ prop ] || prop;\n  //   transitionValues.push( toDashedAll( prop ) );\n  // }\n  // munge number to millisecond, to match stagger\n  var duration = this.layout.options.transitionDuration;\n  duration = typeof duration == 'number' ? duration + 'ms' : duration;\n  // enable transition styles\n  this.css({\n    transitionProperty: transitionProps,\n    transitionDuration: duration,\n    transitionDelay: this.staggerDelay || 0\n  });\n  // listen for transition end event\n  this.element.addEventListener( transitionEndEvent, this, false );\n};\n\n// ----- events ----- //\n\nproto.onwebkitTransitionEnd = function( event ) {\n  this.ontransitionend( event );\n};\n\nproto.onotransitionend = function( event ) {\n  this.ontransitionend( event );\n};\n\n// properties that I munge to make my life easier\nvar dashedVendorProperties = {\n  '-webkit-transform': 'transform'\n};\n\nproto.ontransitionend = function( event ) {\n  // disregard bubbled events from children\n  if ( event.target !== this.element ) {\n    return;\n  }\n  var _transition = this._transn;\n  // get property name of transitioned property, convert to prefix-free\n  var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\n\n  // remove property that has completed transitioning\n  delete _transition.ingProperties[ propertyName ];\n  // check if any properties are still transitioning\n  if ( isEmptyObj( _transition.ingProperties ) ) {\n    // all properties have completed transitioning\n    this.disableTransition();\n  }\n  // clean style\n  if ( propertyName in _transition.clean ) {\n    // clean up style\n    this.element.style[ event.propertyName ] = '';\n    delete _transition.clean[ propertyName ];\n  }\n  // trigger onTransitionEnd callback\n  if ( propertyName in _transition.onEnd ) {\n    var onTransitionEnd = _transition.onEnd[ propertyName ];\n    onTransitionEnd.call( this );\n    delete _transition.onEnd[ propertyName ];\n  }\n\n  this.emitEvent( 'transitionEnd', [ this ] );\n};\n\nproto.disableTransition = function() {\n  this.removeTransitionStyles();\n  this.element.removeEventListener( transitionEndEvent, this, false );\n  this.isTransitioning = false;\n};\n\n/**\n * removes style property from element\n * @param {Object} style\n**/\nproto._removeStyles = function( style ) {\n  // clean up transition styles\n  var cleanStyle = {};\n  for ( var prop in style ) {\n    cleanStyle[ prop ] = '';\n  }\n  this.css( cleanStyle );\n};\n\nvar cleanTransitionStyle = {\n  transitionProperty: '',\n  transitionDuration: '',\n  transitionDelay: ''\n};\n\nproto.removeTransitionStyles = function() {\n  // remove transition\n  this.css( cleanTransitionStyle );\n};\n\n// ----- stagger ----- //\n\nproto.stagger = function( delay ) {\n  delay = isNaN( delay ) ? 0 : delay;\n  this.staggerDelay = delay + 'ms';\n};\n\n// ----- show/hide/remove ----- //\n\n// remove element from DOM\nproto.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // remove display: none\n  this.css({ display: '' });\n  this.emitEvent( 'remove', [ this ] );\n};\n\nproto.remove = function() {\n  // just remove element if no transition support or no transition\n  if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\n    this.removeElem();\n    return;\n  }\n\n  // start transition\n  this.once( 'transitionEnd', function() {\n    this.removeElem();\n  });\n  this.hide();\n};\n\nproto.reveal = function() {\n  delete this.isHidden;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\n\n  this.transition({\n    from: options.hiddenStyle,\n    to: options.visibleStyle,\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onRevealTransitionEnd = function() {\n  // check if still visible\n  // during transition, item may have been hidden\n  if ( !this.isHidden ) {\n    this.emitEvent('reveal');\n  }\n};\n\n/**\n * get style property use for hide/reveal transition end\n * @param {String} styleProperty - hiddenStyle/visibleStyle\n * @returns {String}\n */\nproto.getHideRevealTransitionEndProperty = function( styleProperty ) {\n  var optionStyle = this.layout.options[ styleProperty ];\n  // use opacity\n  if ( optionStyle.opacity ) {\n    return 'opacity';\n  }\n  // get first property\n  for ( var prop in optionStyle ) {\n    return prop;\n  }\n};\n\nproto.hide = function() {\n  // set flag\n  this.isHidden = true;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\n\n  this.transition({\n    from: options.visibleStyle,\n    to: options.hiddenStyle,\n    // keep hidden stuff hidden\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onHideTransitionEnd = function() {\n  // check if still hidden\n  // during transition, item may have been un-hidden\n  if ( this.isHidden ) {\n    this.css({ display: 'none' });\n    this.emitEvent('hide');\n  }\n};\n\nproto.destroy = function() {\n  this.css({\n    position: '',\n    left: '',\n    right: '',\n    top: '',\n    bottom: '',\n    transition: '',\n    transform: ''\n  });\n};\n\nreturn Item;\n\n}));\n\n/*!\n * Outlayer v2.1.0\n * the brains and guts of a layout library\n * MIT license\n */\n\n( function( window, factory ) {\n  'use strict';\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'outlayer/outlayer',[\n        'ev-emitter/ev-emitter',\n        'get-size/get-size',\n        'fizzy-ui-utils/utils',\n        './enviratope-item'\n      ],\n      function( EvEmitter, getSize, utils, Item ) {\n        return factory( window, EvEmitter, getSize, utils, Item);\n      }\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      window,\n      require('ev-emitter'),\n      require('get-size'),\n      require('fizzy-ui-utils'),\n      require('./enviratope-item.js')\n    );\n  } else {\n    // browser global\n    window.Outlayer = factory(\n      window,\n      window.EvEmitter,\n      window.getSize,\n      window.fizzyUIUtils,\n      window.Outlayer.Item\n    );\n  }\n\n}( window, function factory( window, EvEmitter, getSize, utils, Item ) {\n'use strict';\n\n// ----- vars ----- //\n\nvar console = window.console;\nvar jQuery = window.jQuery;\nvar noop = function() {};\n\n// -------------------------- Outlayer -------------------------- //\n\n// globally unique identifiers\nvar GUID = 0;\n// internal store of all Outlayer intances\nvar instances = {};\n\n\n/**\n * @param {Element, String} element\n * @param {Object} options\n * @constructor\n */\nfunction Outlayer( element, options ) {\n  var queryElement = utils.getQueryElement( element );\n  if ( !queryElement ) {\n    if ( console ) {\n      console.error( 'Bad element for ' + this.constructor.namespace +\n        ': ' + ( queryElement || element ) );\n    }\n    return;\n  }\n  this.element = queryElement;\n  // add jQuery\n  if ( jQuery ) {\n    this.$element = jQuery( this.element );\n  }\n\n  // options\n  this.options = utils.extend( {}, this.constructor.defaults );\n  this.option( options );\n\n  // add id for Outlayer.getFromElement\n  var id = ++GUID;\n  this.element.outlayerGUID = id; // expando\n  instances[ id ] = this; // associate via id\n\n  // kick it off\n  this._create();\n\n  var isInitLayout = this._getOption('initLayout');\n  if ( isInitLayout ) {\n    this.layout();\n  }\n}\n\n// settings are for internal use only\nOutlayer.namespace = 'outlayer';\nOutlayer.Item = Item;\n\n// default options\nOutlayer.defaults = {\n  containerStyle: {\n    position: 'relative'\n  },\n  initLayout: true,\n  originLeft: true,\n  originTop: true,\n  resize: true,\n  resizeContainer: true,\n  // item options\n  transitionDuration: '0.4s',\n  hiddenStyle: {\n    opacity: 0,\n    transform: 'scale(0.001)'\n  },\n  visibleStyle: {\n    opacity: 1,\n    transform: 'scale(1)'\n  }\n};\n\nvar proto = Outlayer.prototype;\n// inherit EvEmitter\nutils.extend( proto, EvEmitter.prototype );\n\n/**\n * set options\n * @param {Object} opts\n */\nproto.option = function( opts ) {\n  utils.extend( this.options, opts );\n};\n\n/**\n * get backwards compatible option value, check old name\n */\nproto._getOption = function( option ) {\n  var oldOption = this.constructor.compatOptions[ option ];\n  return oldOption && this.options[ oldOption ] !== undefined ?\n    this.options[ oldOption ] : this.options[ option ];\n};\n\nOutlayer.compatOptions = {\n  // currentName: oldName\n  initLayout: 'isInitLayout',\n  horizontal: 'isHorizontal',\n  layoutInstant: 'isLayoutInstant',\n  originLeft: 'isOriginLeft',\n  originTop: 'isOriginTop',\n  resize: 'isResizeBound',\n  resizeContainer: 'isResizingContainer'\n};\n\nproto._create = function() {\n  // get items from children\n  this.reloadItems();\n  // elements that affect layout, but are not laid out\n  this.stamps = [];\n  this.stamp( this.options.stamp );\n  // set container style\n  utils.extend( this.element.style, this.options.containerStyle );\n\n  // bind resize method\n  var canBindResize = this._getOption('resize');\n  if ( canBindResize ) {\n    this.bindResize();\n  }\n};\n\n// goes through all children again and gets bricks in proper order\nproto.reloadItems = function() {\n  // collection of item elements\n  this.items = this._itemize( this.element.children );\n};\n\n\n/**\n * turn elements into Outlayer.Items to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - collection of new Outlayer Items\n */\nproto._itemize = function( elems ) {\n\n  var itemElems = this._filterFindItemElements( elems );\n  var Item = this.constructor.Item;\n\n  // create new Outlayer Items for collection\n  var items = [];\n  for ( var i=0; i < itemElems.length; i++ ) {\n    var elem = itemElems[i];\n    var item = new Item( elem, this );\n    items.push( item );\n  }\n\n  return items;\n};\n\n/**\n * get item elements to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - item elements\n */\nproto._filterFindItemElements = function( elems ) {\n  return utils.filterFindElements( elems, this.options.itemSelector );\n};\n\n/**\n * getter method for getting item elements\n * @returns {Array} elems - collection of item elements\n */\nproto.getItemElements = function() {\n  return this.items.map( function( item ) {\n    return item.element;\n  });\n};\n\n// ----- init & layout ----- //\n\n/**\n * lays out all items\n */\nproto.layout = function() {\n  this._resetLayout();\n  this._manageStamps();\n\n  // don't animate first layout\n  var layoutInstant = this._getOption('layoutInstant');\n  var isInstant = layoutInstant !== undefined ?\n    layoutInstant : !this._isLayoutInited;\n  this.layoutItems( this.items, isInstant );\n\n  // flag for initalized\n  this._isLayoutInited = true;\n};\n\n// _init is alias for layout\nproto._init = proto.layout;\n\n/**\n * logic before any new layout\n */\nproto._resetLayout = function() {\n  this.getSize();\n};\n\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * get measurement from option, for columnWidth, rowHeight, gutter\n * if option is String -> get element from selector string, & get size of element\n * if option is Element -> get size of element\n * else use option as a number\n *\n * @param {String} measurement\n * @param {String} size - width or height\n * @private\n */\nproto._getMeasurement = function( measurement, size ) {\n  var option = this.options[ measurement ];\n  var elem;\n  if ( !option ) {\n    // default to 0\n    this[ measurement ] = 0;\n  } else {\n    // use option as an element\n    if ( typeof option == 'string' ) {\n      elem = this.element.querySelector( option );\n    } else if ( option instanceof HTMLElement ) {\n      elem = option;\n    }\n    // use size of element, if element\n    this[ measurement ] = elem ? getSize( elem )[ size ] : option;\n  }\n};\n\n/**\n * layout a collection of item elements\n * @api public\n */\nproto.layoutItems = function( items, isInstant ) {\n  items = this._getItemsForLayout( items );\n\n  this._layoutItems( items, isInstant );\n\n  this._postLayout();\n};\n\n/**\n * get the items to be laid out\n * you may want to skip over some items\n * @param {Array} items\n * @returns {Array} items\n */\nproto._getItemsForLayout = function( items ) {\n  return items.filter( function( item ) {\n    return !item.isIgnored;\n  });\n};\n\n/**\n * layout items\n * @param {Array} items\n * @param {Boolean} isInstant\n */\nproto._layoutItems = function( items, isInstant ) {\n  this._emitCompleteOnItems( 'layout', items );\n\n  if ( !items || !items.length ) {\n    // no items, emit event with empty array\n    return;\n  }\n\n  var queue = [];\n\n  items.forEach( function( item ) {\n    // get x/y object from method\n    var position = this._getItemLayoutPosition( item );\n    // enqueue\n    position.item = item;\n    position.isInstant = isInstant || item.isLayoutInstant;\n    queue.push( position );\n  }, this );\n\n  this._processLayoutQueue( queue );\n};\n\n/**\n * get item layout position\n * @param {Outlayer.Item} item\n * @returns {Object} x and y position\n */\nproto._getItemLayoutPosition = function( /* item */ ) {\n  return {\n    x: 0,\n    y: 0\n  };\n};\n\n/**\n * iterate over array and position each item\n * Reason being - separating this logic prevents 'layout invalidation'\n * thx @paul_irish\n * @param {Array} queue\n */\nproto._processLayoutQueue = function( queue ) {\n  this.updateStagger();\n  queue.forEach( function( obj, i ) {\n    this._positionItem( obj.item, obj.x, obj.y, obj.isInstant, i );\n  }, this );\n};\n\n// set stagger from option in milliseconds number\nproto.updateStagger = function() {\n  var stagger = this.options.stagger;\n  if ( stagger === null || stagger === undefined ) {\n    this.stagger = 0;\n    return;\n  }\n  this.stagger = getMilliseconds( stagger );\n  return this.stagger;\n};\n\n/**\n * Sets position of item in DOM\n * @param {Outlayer.Item} item\n * @param {Number} x - horizontal position\n * @param {Number} y - vertical position\n * @param {Boolean} isInstant - disables transitions\n */\nproto._positionItem = function( item, x, y, isInstant, i ) {\n  if ( isInstant ) {\n    // if not transition, just set CSS\n    item.goTo( x, y );\n  } else {\n    item.stagger( i * this.stagger );\n    item.moveTo( x, y );\n  }\n};\n\n/**\n * Any logic you want to do after each layout,\n * i.e. size the container\n */\nproto._postLayout = function() {\n  this.resizeContainer();\n};\n\nproto.resizeContainer = function() {\n  var isResizingContainer = this._getOption('resizeContainer');\n  if ( !isResizingContainer ) {\n    return;\n  }\n  var size = this._getContainerSize();\n  if ( size ) {\n    this._setContainerMeasure( size.width, true );\n    this._setContainerMeasure( size.height, false );\n  }\n};\n\n/**\n * Sets width or height of container if returned\n * @returns {Object} size\n *   @param {Number} width\n *   @param {Number} height\n */\nproto._getContainerSize = noop;\n\n/**\n * @param {Number} measure - size of width or height\n * @param {Boolean} isWidth\n */\nproto._setContainerMeasure = function( measure, isWidth ) {\n  if ( measure === undefined ) {\n    return;\n  }\n\n  var elemSize = this.size;\n  // add padding and border width if border box\n  if ( elemSize.isBorderBox ) {\n    measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\n      elemSize.borderLeftWidth + elemSize.borderRightWidth :\n      elemSize.paddingBottom + elemSize.paddingTop +\n      elemSize.borderTopWidth + elemSize.borderBottomWidth;\n  }\n\n  measure = Math.max( measure, 0 );\n  this.element.style[ isWidth ? 'width' : 'height' ] = measure + 'px';\n};\n\n/**\n * emit eventComplete on a collection of items events\n * @param {String} eventName\n * @param {Array} items - Outlayer.Items\n */\nproto._emitCompleteOnItems = function( eventName, items ) {\n  var _this = this;\n  function onComplete() {\n    _this.dispatchEvent( eventName + 'Complete', null, [ items ] );\n  }\n\n  var count = items.length;\n  if ( !items || !count ) {\n    onComplete();\n    return;\n  }\n\n  var doneCount = 0;\n  function tick() {\n    doneCount++;\n    if ( doneCount == count ) {\n      onComplete();\n    }\n  }\n\n  // bind callback\n  items.forEach( function( item ) {\n    item.once( eventName, tick );\n  });\n};\n\n/**\n * emits events via EvEmitter and jQuery events\n * @param {String} type - name of event\n * @param {Event} event - original event\n * @param {Array} args - extra arguments\n */\nproto.dispatchEvent = function( type, event, args ) {\n  // add original event to arguments\n  var emitArgs = event ? [ event ].concat( args ) : args;\n  this.emitEvent( type, emitArgs );\n\n  if ( jQuery ) {\n    // set this.$element\n    this.$element = this.$element || jQuery( this.element );\n    if ( event ) {\n      // create jQuery event\n      var $event = jQuery.Event( event );\n      $event.type = type;\n      this.$element.trigger( $event, args );\n    } else {\n      // just trigger with type if no event available\n      this.$element.trigger( type, args );\n    }\n  }\n};\n\n// -------------------------- ignore & stamps -------------------------- //\n\n\n/**\n * keep item in collection, but do not lay it out\n * ignored items do not get skipped in layout\n * @param {Element} elem\n */\nproto.ignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    item.isIgnored = true;\n  }\n};\n\n/**\n * return item to layout collection\n * @param {Element} elem\n */\nproto.unignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    delete item.isIgnored;\n  }\n};\n\n/**\n * adds elements to stamps\n * @param {NodeList, Array, Element, or String} elems\n */\nproto.stamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ) {\n    return;\n  }\n\n  this.stamps = this.stamps.concat( elems );\n  // ignore\n  elems.forEach( this.ignore, this );\n};\n\n/**\n * removes elements to stamps\n * @param {NodeList, Array, or Element} elems\n */\nproto.unstamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ){\n    return;\n  }\n\n  elems.forEach( function( elem ) {\n    // filter out removed stamp elements\n    utils.removeFrom( this.stamps, elem );\n    this.unignore( elem );\n  }, this );\n};\n\n/**\n * finds child elements\n * @param {NodeList, Array, Element, or String} elems\n * @returns {Array} elems\n */\nproto._find = function( elems ) {\n  if ( !elems ) {\n    return;\n  }\n  // if string, use argument as selector string\n  if ( typeof elems == 'string' ) {\n    elems = this.element.querySelectorAll( elems );\n  }\n  elems = utils.makeArray( elems );\n  return elems;\n};\n\nproto._manageStamps = function() {\n  if ( !this.stamps || !this.stamps.length ) {\n    return;\n  }\n\n  this._getBoundingRect();\n\n  this.stamps.forEach( this._manageStamp, this );\n};\n\n// update boundingLeft / Top\nproto._getBoundingRect = function() {\n  // get bounding rect for container element\n  var boundingRect = this.element.getBoundingClientRect();\n  var size = this.size;\n  this._boundingRect = {\n    left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n    top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n    right: boundingRect.right - ( size.paddingRight + size.borderRightWidth ),\n    bottom: boundingRect.bottom - ( size.paddingBottom + size.borderBottomWidth )\n  };\n};\n\n/**\n * @param {Element} stamp\n**/\nproto._manageStamp = noop;\n\n/**\n * get x/y position of element relative to container element\n * @param {Element} elem\n * @returns {Object} offset - has left, top, right, bottom\n */\nproto._getElementOffset = function( elem ) {\n  var boundingRect = elem.getBoundingClientRect();\n  var thisRect = this._boundingRect;\n  var size = getSize( elem );\n  var offset = {\n    left: boundingRect.left - thisRect.left - size.marginLeft,\n    top: boundingRect.top - thisRect.top - size.marginTop,\n    right: thisRect.right - boundingRect.right - size.marginRight,\n    bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n  };\n  return offset;\n};\n\n// -------------------------- resize -------------------------- //\n\n// enable event handlers for listeners\n// i.e. resize -> onresize\nproto.handleEvent = utils.handleEvent;\n\n/**\n * Bind layout to window resizing\n */\nproto.bindResize = function() {\n  window.addEventListener( 'resize', this );\n  this.isResizeBound = true;\n};\n\n/**\n * Unbind layout to window resizing\n */\nproto.unbindResize = function() {\n  window.removeEventListener( 'resize', this );\n  this.isResizeBound = false;\n};\n\nproto.onresize = function() {\n  this.resize();\n};\n\nutils.debounceMethod( Outlayer, 'onresize', 100 );\n\nproto.resize = function() {\n  // don't trigger if size did not change\n  // or if resize was unbound. See #9\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\n    return;\n  }\n\n  this.layout();\n};\n\n/**\n * check if layout is needed post layout\n * @returns Boolean\n */\nproto.needsResizeLayout = function() {\n  var size = getSize( this.element );\n  // check that this.size and size are there\n  // IE8 triggers resize on body size change, so they might not be\n  var hasSizes = this.size && size;\n  return hasSizes && size.innerWidth !== this.size.innerWidth;\n};\n\n// -------------------------- methods -------------------------- //\n\n/**\n * add items to Outlayer instance\n * @param {Array or NodeList or Element} elems\n * @returns {Array} items - Outlayer.Items\n**/\nproto.addItems = function( elems ) {\n  var items = this._itemize( elems );\n  // add items to collection\n  if ( items.length ) {\n    this.items = this.items.concat( items );\n  }\n  return items;\n};\n\n/**\n * Layout newly-appended item elements\n * @param {Array or NodeList or Element} elems\n */\nproto.appended = function( elems ) {\n  var items = this.addItems( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // layout and reveal just the new items\n  this.layoutItems( items, true );\n  this.reveal( items );\n};\n\n/**\n * Layout prepended elements\n * @param {Array or NodeList or Element} elems\n */\nproto.prepended = function( elems ) {\n  var items = this._itemize( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // add items to beginning of collection\n  var previousItems = this.items.slice(0);\n  this.items = items.concat( previousItems );\n  // start new layout\n  this._resetLayout();\n  this._manageStamps();\n  // layout new stuff without transition\n  this.layoutItems( items, true );\n  this.reveal( items );\n  // layout previous items\n  this.layoutItems( previousItems );\n};\n\n/**\n * reveal a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.reveal = function( items ) {\n  this._emitCompleteOnItems( 'reveal', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.reveal();\n  });\n};\n\n/**\n * hide a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.hide = function( items ) {\n  this._emitCompleteOnItems( 'hide', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  var stagger = this.updateStagger();\n  items.forEach( function( item, i ) {\n    item.stagger( i * stagger );\n    item.hide();\n  });\n};\n\n/**\n * reveal item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.revealItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.reveal( items );\n};\n\n/**\n * hide item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.hideItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.hide( items );\n};\n\n/**\n * get Outlayer.Item, given an Element\n * @param {Element} elem\n * @param {Function} callback\n * @returns {Outlayer.Item} item\n */\nproto.getItem = function( elem ) {\n  // loop through items to get the one that matches\n  for ( var i=0; i < this.items.length; i++ ) {\n    var item = this.items[i];\n    if ( item.element == elem ) {\n      // return item\n      return item;\n    }\n  }\n};\n\n/**\n * get collection of Outlayer.Items, given Elements\n * @param {Array} elems\n * @returns {Array} items - Outlayer.Items\n */\nproto.getItems = function( elems ) {\n  elems = utils.makeArray( elems );\n  var items = [];\n  elems.forEach( function( elem ) {\n    var item = this.getItem( elem );\n    if ( item ) {\n      items.push( item );\n    }\n  }, this );\n\n  return items;\n};\n\n/**\n * remove element(s) from instance and DOM\n * @param {Array or NodeList or Element} elems\n */\nproto.remove = function( elems ) {\n  var removeItems = this.getItems( elems );\n\n  this._emitCompleteOnItems( 'remove', removeItems );\n\n  // bail if no items to remove\n  if ( !removeItems || !removeItems.length ) {\n    return;\n  }\n\n  removeItems.forEach( function( item ) {\n    item.remove();\n    // remove item from collection\n    utils.removeFrom( this.items, item );\n  }, this );\n};\n\n// ----- destroy ----- //\n\n// remove and disable Outlayer instance\nproto.destroy = function() {\n  // clean up dynamic styles\n  var style = this.element.style;\n  style.height = '';\n  style.position = '';\n  style.width = '';\n  // destroy items\n  this.items.forEach( function( item ) {\n    item.destroy();\n  });\n\n  this.unbindResize();\n\n  var id = this.element.outlayerGUID;\n  delete instances[ id ]; // remove reference to instance by id\n  delete this.element.outlayerGUID;\n  // remove data for jQuery\n  if ( jQuery ) {\n    jQuery.removeData( this.element, this.constructor.namespace );\n  }\n\n};\n\n// -------------------------- data -------------------------- //\n\n/**\n * get Outlayer instance from element\n * @param {Element} elem\n * @returns {Outlayer}\n */\nOutlayer.data = function( elem ) {\n  elem = utils.getQueryElement( elem );\n  var id = elem && elem.outlayerGUID;\n  return id && instances[ id ];\n};\n\n\n// -------------------------- create Outlayer class -------------------------- //\n\n/**\n * create a layout class\n * @param {String} namespace\n */\nOutlayer.create = function( namespace, options ) {\n  // sub-class Outlayer\n  var Layout = subclass( Outlayer );\n  // apply new options and compatOptions\n  Layout.defaults = utils.extend( {}, Outlayer.defaults );\n  utils.extend( Layout.defaults, options );\n  Layout.compatOptions = utils.extend( {}, Outlayer.compatOptions  );\n\n  Layout.namespace = namespace;\n\n  Layout.data = Outlayer.data;\n\n  // sub-class Item\n  Layout.Item = subclass( Item );\n\n  // -------------------------- declarative -------------------------- //\n\n  utils.htmlInit( Layout, namespace );\n\n  // -------------------------- jQuery bridge -------------------------- //\n\n  // make into jQuery plugin\n  if ( jQuery && jQuery.bridget ) {\n    jQuery.bridget( namespace, Layout );\n  }\n\n  return Layout;\n};\n\nfunction subclass( Parent ) {\n  function SubClass() {\n    Parent.apply( this, arguments );\n  }\n\n  SubClass.prototype = Object.create( Parent.prototype );\n  SubClass.prototype.constructor = SubClass;\n\n  return SubClass;\n}\n\n// ----- helpers ----- //\n\n// how many milliseconds are in each unit\nvar msUnits = {\n  ms: 1,\n  s: 1000\n};\n\n// munge time-like parameter into millisecond number\n// '0.4s' -> 40\nfunction getMilliseconds( time ) {\n  if ( typeof time == 'number' ) {\n    return time;\n  }\n  var matches = time.match( /(^\\d*\\.?\\d*)(\\w*)/ );\n  var num = matches && matches[1];\n  var unit = matches && matches[2];\n  if ( !num.length ) {\n    return 0;\n  }\n  num = parseFloat( num );\n  var mult = msUnits[ unit ] || 1;\n  return num * mult;\n}\n\n// ----- fin ----- //\n\n// back in global\nOutlayer.Item = Item;\n\nreturn Outlayer;\n\n}));\n\n/**\n * Enviratope Item\n**/\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'enviratope/item',[\n        'outlayer/outlayer'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer')\n    );\n  } else {\n    // browser global\n    window.Enviratope = window.Enviratope || {};\n    window.Enviratope.Item = factory(\n      window.Outlayer\n    );\n  }\n\n}( window, function factory( Outlayer ) {\n'use strict';\n\n// -------------------------- Item -------------------------- //\n\n// sub-class Outlayer Item\nfunction Item() {\n  Outlayer.Item.apply( this, arguments );\n}\n\nvar proto = Item.prototype = Object.create( Outlayer.Item.prototype );\n\nvar _create = proto._create;\nproto._create = function() {\n  // assign id, used for original-order sorting\n  this.id = this.layout.itemGUID++;\n  _create.call( this );\n  this.sortData = {};\n};\n\nproto.updateSortData = function() {\n  if ( this.isIgnored ) {\n    return;\n  }\n  // default sorters\n  this.sortData.id = this.id;\n  // for backward compatibility\n  this.sortData['original-order'] = this.id;\n  this.sortData.random = Math.random();\n  // go thru getSortData obj and apply the sorters\n  var getSortData = this.layout.options.getSortData;\n  var sorters = this.layout._sorters;\n  for ( var key in getSortData ) {\n    var sorter = sorters[ key ];\n    this.sortData[ key ] = sorter( this.element, this );\n  }\n};\n\nvar _destroy = proto.destroy;\nproto.destroy = function() {\n  // call super\n  _destroy.apply( this, arguments );\n  // reset display, #741\n  this.css({\n    display: ''\n  });\n};\n\nreturn Item;\n\n}));\n\n/**\n * Enviratope LayoutMode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'enviratope/layout-mode',[\n        'get-size/get-size',\n        'outlayer/outlayer'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('get-size'),\n      require('outlayer')\n    );\n  } else {\n    // browser global\n    window.Enviratope = window.Enviratope || {};\n    window.Enviratope.LayoutMode = factory(\n      window.getSize,\n      window.Outlayer\n    );\n  }\n\n}( window, function factory( getSize, Outlayer ) {\n  'use strict';\n\n  // layout mode class\n  function LayoutMode( enviratope ) {\n    this.enviratope = enviratope;\n    // link properties\n    if ( enviratope ) {\n      this.options = enviratope.options[ this.namespace ];\n      this.element = enviratope.element;\n      this.items = enviratope.filteredItems;\n      this.size = enviratope.size;\n    }\n  }\n\n  var proto = LayoutMode.prototype;\n\n  /**\n   * some methods should just defer to default Outlayer method\n   * and reference the Enviratope instance as `this`\n  **/\n  var facadeMethods = [\n    '_resetLayout',\n    '_getItemLayoutPosition',\n    '_manageStamp',\n    '_getContainerSize',\n    '_getElementOffset',\n    'needsResizeLayout',\n    '_getOption'\n  ];\n\n  facadeMethods.forEach( function( methodName ) {\n    proto[ methodName ] = function() {\n      return Outlayer.prototype[ methodName ].apply( this.enviratope, arguments );\n    };\n  });\n\n  // -----  ----- //\n\n  // for horizontal layout modes, check vertical size\n  proto.needsVerticalResizeLayout = function() {\n    // don't trigger if size did not change\n    var size = getSize( this.enviratope.element );\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var hasSizes = this.enviratope.size && size;\n    return hasSizes && size.innerHeight != this.enviratope.size.innerHeight;\n  };\n\n  // ----- measurements ----- //\n\n  proto._getMeasurement = function() {\n    this.enviratope._getMeasurement.apply( this, arguments );\n  };\n\n  proto.getColumnWidth = function() {\n    this.getSegmentSize( 'column', 'Width' );\n  };\n\n  proto.getRowHeight = function() {\n    this.getSegmentSize( 'row', 'Height' );\n  };\n\n  /**\n   * get columnWidth or rowHeight\n   * segment: 'column' or 'row'\n   * size 'Width' or 'Height'\n  **/\n  proto.getSegmentSize = function( segment, size ) {\n    var segmentName = segment + size;\n    var outerSize = 'outer' + size;\n    // columnWidth / outerWidth // rowHeight / outerHeight\n    this._getMeasurement( segmentName, outerSize );\n    // got rowHeight or columnWidth, we can chill\n    if ( this[ segmentName ] ) {\n      return;\n    }\n    // fall back to item of first element\n    var firstItemSize = this.getFirstItemSize();\n    this[ segmentName ] = firstItemSize && firstItemSize[ outerSize ] ||\n      // or size of container\n      this.enviratope.size[ 'inner' + size ];\n  };\n\n  proto.getFirstItemSize = function() {\n    var firstItem = this.enviratope.filteredItems[0];\n    return firstItem && firstItem.element && getSize( firstItem.element );\n  };\n\n  // ----- methods that should reference enviratope ----- //\n\n  proto.layout = function() {\n    this.enviratope.layout.apply( this.enviratope, arguments );\n  };\n\n  proto.getSize = function() {\n    this.enviratope.getSize();\n    this.size = this.enviratope.size;\n  };\n\n  // -------------------------- create -------------------------- //\n\n  LayoutMode.modes = {};\n\n  LayoutMode.create = function( namespace, options ) {\n\n    function Mode() {\n      LayoutMode.apply( this, arguments );\n    }\n\n    Mode.prototype = Object.create( proto );\n    Mode.prototype.constructor = Mode;\n\n    // default options\n    if ( options ) {\n      Mode.options = options;\n    }\n\n    Mode.prototype.namespace = namespace;\n    // register in Enviratope\n    LayoutMode.modes[ namespace ] = Mode;\n\n    return Mode;\n  };\n\n  return LayoutMode;\n\n}));\n\n/*!\n * Masonry v4.1.0\n * Cascading grid layout library\n * http://masonry.desandro.com\n * MIT License\n * by David DeSandro\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'masonry/masonry',[\n        'outlayer/outlayer',\n        'get-size/get-size'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Masonry = factory(\n      window.Outlayer,\n      window.getSize\n    );\n  }\n\n}( window, function factory( Outlayer, getSize ) {\n\n\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Masonry = Outlayer.create('masonry');\n  // isFitWidth -> fitWidth\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\n\n  Masonry.prototype._resetLayout = function() {\n    this.getSize();\n    this._getMeasurement( 'columnWidth', 'outerWidth' );\n    this._getMeasurement( 'gutter', 'outerWidth' );\n    this.measureColumns();\n\n    // reset column Y\n    this.colYs = [];\n    for ( var i=0; i < this.cols; i++ ) {\n      this.colYs.push( 0 );\n    }\n\n    this.maxY = 0;\n  };\n\n  Masonry.prototype.measureColumns = function() {\n    this.getContainerWidth();\n    // if columnWidth is 0, default to outerWidth of first item\n    if ( !this.columnWidth ) {\n      var firstItem = this.items[0];\n      var firstItemElem = firstItem && firstItem.element;\n      // columnWidth fall back to item of first element\n      this.columnWidth = firstItemElem && getSize( firstItemElem ).outerWidth ||\n        // if first elem has no width, default to size of container\n        this.containerWidth;\n    }\n\n    var columnWidth = this.columnWidth += this.gutter;\n\n    // calculate columns\n    var containerWidth = this.containerWidth + this.gutter;\n    var cols = containerWidth / columnWidth;\n    // fix rounding errors, typically with gutters\n    var excess = columnWidth - containerWidth % columnWidth;\n    // if overshoot is less than a pixel, round up, otherwise floor it\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\n    cols = Math[ mathMethod ]( cols );\n    this.cols = Math.max( cols, 1 );\n  };\n\n  Masonry.prototype.getContainerWidth = function() {\n    // container is parent if fit width\n    var isFitWidth = this._getOption('fitWidth');\n    var container = isFitWidth ? this.element.parentNode : this.element;\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var size = getSize( container );\n    this.containerWidth = size && size.innerWidth;\n  };\n\n  Masonry.prototype._getItemLayoutPosition = function( item ) {\n    item.getSize();\n    // how many columns does this brick span\n    var remainder = item.size.outerWidth % this.columnWidth;\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n    // round if off by 1 pixel, otherwise use ceil\n    var colSpan = Math[ mathMethod ]( item.size.outerWidth / this.columnWidth );\n    colSpan = Math.min( colSpan, this.cols );\n\n    var colGroup = this._getColGroup( colSpan );\n    // get the minimum Y value from the columns\n    var minimumY = Math.min.apply( Math, colGroup );\n    var shortColIndex = colGroup.indexOf( minimumY );\n\n    // position the brick\n    var position = {\n      x: this.columnWidth * shortColIndex,\n      y: minimumY\n    };\n\n    // apply setHeight to necessary columns\n    var setHeight = minimumY + item.size.outerHeight;\n    var setSpan = this.cols + 1 - colGroup.length;\n    for ( var i = 0; i < setSpan; i++ ) {\n      this.colYs[ shortColIndex + i ] = setHeight;\n    }\n\n    return position;\n  };\n\n  /**\n   * @param {Number} colSpan - number of columns the element spans\n   * @returns {Array} colGroup\n   */\n  Masonry.prototype._getColGroup = function( colSpan ) {\n    if ( colSpan < 2 ) {\n      // if brick spans only one column, use all the column Ys\n      return this.colYs;\n    }\n\n    var colGroup = [];\n    // how many different places could this brick fit horizontally\n    var groupCount = this.cols + 1 - colSpan;\n    // for each group potential horizontal position\n    for ( var i = 0; i < groupCount; i++ ) {\n      // make an array of colY values for that one group\n      var groupColYs = this.colYs.slice( i, i + colSpan );\n      // and get the max value of the array\n      colGroup[i] = Math.max.apply( Math, groupColYs );\n    }\n    return colGroup;\n  };\n\n  Masonry.prototype._manageStamp = function( stamp ) {\n    var stampSize = getSize( stamp );\n    var offset = this._getElementOffset( stamp );\n    // get the columns that this stamp affects\n    var isOriginLeft = this._getOption('originLeft');\n    var firstX = isOriginLeft ? offset.left : offset.right;\n    var lastX = firstX + stampSize.outerWidth;\n    var firstCol = Math.floor( firstX / this.columnWidth );\n    firstCol = Math.max( 0, firstCol );\n    var lastCol = Math.floor( lastX / this.columnWidth );\n    // lastCol should not go over if multiple of columnWidth #425\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\n    lastCol = Math.min( this.cols - 1, lastCol );\n    // set colYs to bottom of the stamp\n\n    var isOriginTop = this._getOption('originTop');\n    var stampMaxY = ( isOriginTop ? offset.top : offset.bottom ) +\n      stampSize.outerHeight;\n    for ( var i = firstCol; i <= lastCol; i++ ) {\n      this.colYs[i] = Math.max( stampMaxY, this.colYs[i] );\n    }\n  };\n\n  Masonry.prototype._getContainerSize = function() {\n    this.maxY = Math.max.apply( Math, this.colYs );\n    var size = {\n      height: this.maxY\n    };\n\n    if ( this._getOption('fitWidth') ) {\n      size.width = this._getContainerFitWidth();\n    }\n\n    return size;\n  };\n\n  Masonry.prototype._getContainerFitWidth = function() {\n    var unusedCols = 0;\n    // count unused columns\n    var i = this.cols;\n    while ( --i ) {\n      if ( this.colYs[i] !== 0 ) {\n        break;\n      }\n      unusedCols++;\n    }\n    // fit container to columns that have been used\n    return ( this.cols - unusedCols ) * this.columnWidth - this.gutter;\n  };\n\n  Masonry.prototype.needsResizeLayout = function() {\n    var previousWidth = this.containerWidth;\n    this.getContainerWidth();\n    return previousWidth != this.containerWidth;\n  };\n\n  return Masonry;\n\n}));\n\n/*!\n * Masonry layout mode\n * sub-classes Masonry\n * http://masonry.desandro.com\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'enviratope/layout-modes/masonry',[\n        '../layout-mode',\n        'masonry/masonry'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode'),\n      require('masonry-layout')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Enviratope.LayoutMode,\n      window.Masonry\n    );\n  }\n\n}( window, function factory( LayoutMode, Masonry ) {\n'use strict';\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var MasonryMode = LayoutMode.create('masonry');\n\n  var proto = MasonryMode.prototype;\n\n  var keepModeMethods = {\n    _getElementOffset: true,\n    layout: true,\n    _getMeasurement: true\n  };\n\n  // inherit Masonry prototype\n  for ( var method in Masonry.prototype ) {\n    // do not inherit mode methods\n    if ( !keepModeMethods[ method ] ) {\n      proto[ method ] = Masonry.prototype[ method ];\n    }\n  }\n\n  var measureColumns = proto.measureColumns;\n  proto.measureColumns = function() {\n    // set items, used if measuring first item\n    this.items = this.enviratope.filteredItems;\n    measureColumns.call( this );\n  };\n\n  // point to mode options for fitWidth\n  var _getOption = proto._getOption;\n  proto._getOption = function( option ) {\n    if ( option == 'fitWidth' ) {\n      return this.options.isFitWidth !== undefined ?\n        this.options.isFitWidth : this.options.fitWidth;\n    }\n    return _getOption.apply( this.enviratope, arguments );\n  };\n\n  return MasonryMode;\n\n}));\n\n/**\n * fitRows layout mode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'enviratope/layout-modes/fit-rows',[\n        '../layout-mode'\n      ],\n      factory );\n  } else if ( typeof exports == 'object' ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Enviratope.LayoutMode\n    );\n  }\n\n}( window, function factory( LayoutMode ) {\n'use strict';\n\nvar FitRows = LayoutMode.create('fitRows');\n\nvar proto = FitRows.prototype;\n\nproto._resetLayout = function() {\n  this.x = 0;\n  this.y = 0;\n  this.maxY = 0;\n  this._getMeasurement( 'gutter', 'outerWidth' );\n};\n\nproto._getItemLayoutPosition = function( item ) {\n  item.getSize();\n\n  var itemWidth = item.size.outerWidth + this.gutter;\n  // if this element cannot fit in the current row\n  var containerWidth = this.enviratope.size.innerWidth + this.gutter;\n  if ( this.x !== 0 && itemWidth + this.x > containerWidth ) {\n    this.x = 0;\n    this.y = this.maxY;\n  }\n\n  var position = {\n    x: this.x,\n    y: this.y\n  };\n\n  this.maxY = Math.max( this.maxY, this.y + item.size.outerHeight );\n  this.x += itemWidth;\n\n  return position;\n};\n\nproto._getContainerSize = function() {\n  return { height: this.maxY };\n};\n\nreturn FitRows;\n\n}));\n\n/**\n * vertical layout mode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'enviratope/layout-modes/vertical',[\n        '../layout-mode'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Enviratope.LayoutMode\n    );\n  }\n\n}( window, function factory( LayoutMode ) {\n'use strict';\n\nvar Vertical = LayoutMode.create( 'vertical', {\n  horizontalAlignment: 0\n});\n\nvar proto = Vertical.prototype;\n\nproto._resetLayout = function() {\n  this.y = 0;\n};\n\nproto._getItemLayoutPosition = function( item ) {\n  item.getSize();\n  var x = ( this.enviratope.size.innerWidth - item.size.outerWidth ) *\n    this.options.horizontalAlignment;\n  var y = this.y;\n  this.y += item.size.outerHeight;\n  return { x: x, y: y };\n};\n\nproto._getContainerSize = function() {\n  return { height: this.y };\n};\n\nreturn Vertical;\n\n}));\n\n/*!\n * Enviratope v3.0.0\n *\n * Licensed GPLv3 for open source use\n * or Enviratope Commercial License for commercial use\n *\n * http://enviratope.metafizzy.co\n * Copyright 2016 Metafizzy\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'outlayer/outlayer',\n        'get-size/get-size',\n        'desandro-matches-selector/matches-selector',\n        'fizzy-ui-utils/utils',\n        './enviratope-item',\n        './layout-mode',\n        // include default layout modes\n        './layout-modes/masonry',\n        './layout-modes/fit-rows',\n        './layout-modes/vertical'\n      ],\n      function( Outlayer, getSize, matchesSelector, utils, Item, LayoutMode ) {\n        return factory( window, Outlayer, getSize, matchesSelector, utils, Item, LayoutMode );\n      });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('outlayer'),\n      require('get-size'),\n      require('desandro-matches-selector'),\n      require('fizzy-ui-utils'),\n      require('./enviratope-item'),\n      require('./layout-mode'),\n      // include default layout modes\n      require('./layout-modes/masonry'),\n      require('./layout-modes/fit-rows'),\n      require('./layout-modes/vertical')\n    );\n  } else {\n    // browser global\n    window.Enviratope = factory(\n      window,\n      window.Outlayer,\n      window.getSize,\n      window.matchesSelector,\n      window.fizzyUIUtils,\n      window.Enviratope.Item,\n      window.Enviratope.LayoutMode\n    );\n  }\n\n}( window, function factory( window, Outlayer, getSize, matchesSelector, utils,\n  Item, LayoutMode ) {\n\n\n\n// -------------------------- vars -------------------------- //\n\nvar jQuery = window.jQuery;\n\n// -------------------------- helpers -------------------------- //\n\nvar trim = String.prototype.trim ?\n  function( str ) {\n    return str.trim();\n  } :\n  function( str ) {\n    return str.replace( /^\\s+|\\s+$/g, '' );\n  };\n\n// -------------------------- enviratopeDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Enviratope = Outlayer.create( 'enviratope', {\n    layoutMode: 'masonry',\n    isJQueryFiltering: true,\n    sortAscending: true\n  });\n\n  Enviratope.Item = Item;\n  Enviratope.LayoutMode = LayoutMode;\n\n  var proto = Enviratope.prototype;\n\n  proto._create = function() {\n    this.itemGUID = 0;\n    // functions that sort items\n    this._sorters = {};\n    this._getSorters();\n    // call super\n    Outlayer.prototype._create.call( this );\n\n    // create layout modes\n    this.modes = {};\n    // start filteredItems with all items\n    this.filteredItems = this.items;\n    // keep of track of sortBys\n    this.sortHistory = [ 'original-order' ];\n    // create from registered layout modes\n    for ( var name in LayoutMode.modes ) {\n      this._initLayoutMode( name );\n    }\n  };\n\n  proto.reloadItems = function() {\n    // reset item ID counter\n    this.itemGUID = 0;\n    // call super\n    Outlayer.prototype.reloadItems.call( this );\n  };\n\n  proto._itemize = function() {\n    var items = Outlayer.prototype._itemize.apply( this, arguments );\n    // assign ID for original-order\n    for ( var i=0; i < items.length; i++ ) {\n      var item = items[i];\n      item.id = this.itemGUID++;\n    }\n    this._updateItemsSortData( items );\n    return items;\n  };\n\n\n  // -------------------------- layout -------------------------- //\n\n  proto._initLayoutMode = function( name ) {\n    var Mode = LayoutMode.modes[ name ];\n    // set mode options\n    // HACK extend initial options, back-fill in default options\n    var initialOpts = this.options[ name ] || {};\n    this.options[ name ] = Mode.options ?\n      utils.extend( Mode.options, initialOpts ) : initialOpts;\n    // init layout mode instance\n    this.modes[ name ] = new Mode( this );\n  };\n\n\n  proto.layout = function() {\n    // if first time doing layout, do all magic\n    if ( !this._isLayoutInited && this._getOption('initLayout') ) {\n      this.arrange();\n      return;\n    }\n    this._layout();\n  };\n\n  // private method to be used in layout() & magic()\n  proto._layout = function() {\n    // don't animate first layout\n    var isInstant = this._getIsInstant();\n    // layout flow\n    this._resetLayout();\n    this._manageStamps();\n    this.layoutItems( this.filteredItems, isInstant );\n\n    // flag for initalized\n    this._isLayoutInited = true;\n  };\n\n  // filter + sort + layout\n  proto.arrange = function( opts ) {\n    // set any options pass\n    this.option( opts );\n    this._getIsInstant();\n    // filter, sort, and layout\n\n    // filter\n    var filtered = this._filter( this.items );\n    this.filteredItems = filtered.matches;\n\n    this._bindArrangeComplete();\n\n    if ( this._isInstant ) {\n      this._noTransition( this._hideReveal, [ filtered ] );\n    } else {\n      this._hideReveal( filtered );\n    }\n\n    this._sort();\n    this._layout();\n  };\n  // alias to _init for main plugin method\n  proto._init = proto.arrange;\n\n  proto._hideReveal = function( filtered ) {\n    this.reveal( filtered.needReveal );\n    this.hide( filtered.needHide );\n  };\n\n  // HACK\n  // Don't animate/transition first layout\n  // Or don't animate/transition other layouts\n  proto._getIsInstant = function() {\n    var isLayoutInstant = this._getOption('layoutInstant');\n    var isInstant = isLayoutInstant !== undefined ? isLayoutInstant :\n      !this._isLayoutInited;\n    this._isInstant = isInstant;\n    return isInstant;\n  };\n\n  // listen for layoutComplete, hideComplete and revealComplete\n  // to trigger arrangeComplete\n  proto._bindArrangeComplete = function() {\n    // listen for 3 events to trigger arrangeComplete\n    var isLayoutComplete, isHideComplete, isRevealComplete;\n    var _this = this;\n    function arrangeParallelCallback() {\n      if ( isLayoutComplete && isHideComplete && isRevealComplete ) {\n        _this.dispatchEvent( 'arrangeComplete', null, [ _this.filteredItems ] );\n      }\n    }\n    this.once( 'layoutComplete', function() {\n      isLayoutComplete = true;\n      arrangeParallelCallback();\n    });\n    this.once( 'hideComplete', function() {\n      isHideComplete = true;\n      arrangeParallelCallback();\n    });\n    this.once( 'revealComplete', function() {\n      isRevealComplete = true;\n      arrangeParallelCallback();\n    });\n  };\n\n  // -------------------------- filter -------------------------- //\n\n  proto._filter = function( items ) {\n    var filter = this.options.filter;\n    filter = filter || '*';\n    var matches = [];\n    var hiddenMatched = [];\n    var visibleUnmatched = [];\n\n    var test = this._getFilterTest( filter );\n\n    // test each item\n    for ( var i=0; i < items.length; i++ ) {\n      var item = items[i];\n      if ( item.isIgnored ) {\n        continue;\n      }\n      // add item to either matched or unmatched group\n      var isMatched = test( item );\n      // item.isFilterMatched = isMatched;\n      // add to matches if its a match\n      if ( isMatched ) {\n        matches.push( item );\n      }\n      // add to additional group if item needs to be hidden or revealed\n      if ( isMatched && item.isHidden ) {\n        hiddenMatched.push( item );\n      } else if ( !isMatched && !item.isHidden ) {\n        visibleUnmatched.push( item );\n      }\n    }\n\n    // return collections of items to be manipulated\n    return {\n      matches: matches,\n      needReveal: hiddenMatched,\n      needHide: visibleUnmatched\n    };\n  };\n\n  // get a jQuery, function, or a matchesSelector test given the filter\n  proto._getFilterTest = function( filter ) {\n    if ( jQuery && this.options.isJQueryFiltering ) {\n      // use jQuery\n      return function( item ) {\n        return jQuery( item.element ).is( filter );\n      };\n    }\n    if ( typeof filter == 'function' ) {\n      // use filter as function\n      return function( item ) {\n        return filter( item.element );\n      };\n    }\n    // default, use filter as selector string\n    return function( item ) {\n      return matchesSelector( item.element, filter );\n    };\n  };\n\n  // -------------------------- sorting -------------------------- //\n\n  /**\n   * @params {Array} elems\n   * @public\n   */\n  proto.updateSortData = function( elems ) {\n    // get items\n    var items;\n    if ( elems ) {\n      elems = utils.makeArray( elems );\n      items = this.getItems( elems );\n    } else {\n      // update all items if no elems provided\n      items = this.items;\n    }\n\n    this._getSorters();\n    this._updateItemsSortData( items );\n  };\n\n  proto._getSorters = function() {\n    var getSortData = this.options.getSortData;\n    for ( var key in getSortData ) {\n      var sorter = getSortData[ key ];\n      this._sorters[ key ] = mungeSorter( sorter );\n    }\n  };\n\n  /**\n   * @params {Array} items - of Enviratope.Items\n   * @private\n   */\n  proto._updateItemsSortData = function( items ) {\n    // do not update if no items\n    var len = items && items.length;\n\n    for ( var i=0; len && i < len; i++ ) {\n      var item = items[i];\n      item.updateSortData();\n    }\n  };\n\n  // ----- munge sorter ----- //\n\n  // encapsulate this, as we just need mungeSorter\n  // other functions in here are just for munging\n  var mungeSorter = ( function() {\n    // add a magic layer to sorters for convienent shorthands\n    // `.foo-bar` will use the text of .foo-bar querySelector\n    // `[foo-bar]` will use attribute\n    // you can also add parser\n    // `.foo-bar parseInt` will parse that as a number\n    function mungeSorter( sorter ) {\n      // if not a string, return function or whatever it is\n      if ( typeof sorter != 'string' ) {\n        return sorter;\n      }\n      // parse the sorter string\n      var args = trim( sorter ).split(' ');\n      var query = args[0];\n      // check if query looks like [an-attribute]\n      var attrMatch = query.match( /^\\[(.+)\\]$/ );\n      var attr = attrMatch && attrMatch[1];\n      var getValue = getValueGetter( attr, query );\n      // use second argument as a parser\n      var parser = Enviratope.sortDataParsers[ args[1] ];\n      // parse the value, if there was a parser\n      sorter = parser ? function( elem ) {\n        return elem && parser( getValue( elem ) );\n      } :\n      // otherwise just return value\n      function( elem ) {\n        return elem && getValue( elem );\n      };\n\n      return sorter;\n    }\n\n    // get an attribute getter, or get text of the querySelector\n    function getValueGetter( attr, query ) {\n      // if query looks like [foo-bar], get attribute\n      if ( attr ) {\n        return function getAttribute( elem ) {\n          return elem.getAttribute( attr );\n        };\n      }\n\n      // otherwise, assume its a querySelector, and get its text\n      return function getChildText( elem ) {\n        var child = elem.querySelector( query );\n        return child && child.textContent;\n      };\n    }\n\n    return mungeSorter;\n  })();\n\n  // parsers used in getSortData shortcut strings\n  Enviratope.sortDataParsers = {\n    'parseInt': function( val ) {\n      return parseInt( val, 10 );\n    },\n    'parseFloat': function( val ) {\n      return parseFloat( val );\n    }\n  };\n\n  // ----- sort method ----- //\n\n  // sort filteredItem order\n  proto._sort = function() {\n    var sortByOpt = this.options.sortBy;\n    if ( !sortByOpt ) {\n      return;\n    }\n    // concat all sortBy and sortHistory\n    var sortBys = [].concat.apply( sortByOpt, this.sortHistory );\n    // sort magic\n    var itemSorter = getItemSorter( sortBys, this.options.sortAscending );\n    this.filteredItems.sort( itemSorter );\n    // keep track of sortBy History\n    if ( sortByOpt != this.sortHistory[0] ) {\n      // add to front, oldest goes in last\n      this.sortHistory.unshift( sortByOpt );\n    }\n  };\n\n  // returns a function used for sorting\n  function getItemSorter( sortBys, sortAsc ) {\n    return function sorter( itemA, itemB ) {\n      // cycle through all sortKeys\n      for ( var i = 0; i < sortBys.length; i++ ) {\n        var sortBy = sortBys[i];\n        var a = itemA.sortData[ sortBy ];\n        var b = itemB.sortData[ sortBy ];\n        if ( a > b || a < b ) {\n          // if sortAsc is an object, use the value given the sortBy key\n          var isAscending = sortAsc[ sortBy ] !== undefined ? sortAsc[ sortBy ] : sortAsc;\n          var direction = isAscending ? 1 : -1;\n          return ( a > b ? 1 : -1 ) * direction;\n        }\n      }\n      return 0;\n    };\n  }\n\n  // -------------------------- methods -------------------------- //\n\n  // get layout mode\n  proto._mode = function() {\n    var layoutMode = this.options.layoutMode;\n    var mode = this.modes[ layoutMode ];\n    if ( !mode ) {\n      // TODO console.error\n      throw new Error( 'No layout mode: ' + layoutMode );\n    }\n    // HACK sync mode's options\n    // any options set after init for layout mode need to be synced\n    mode.options = this.options[ layoutMode ];\n    return mode;\n  };\n\n  proto._resetLayout = function() {\n    // trigger original reset layout\n    Outlayer.prototype._resetLayout.call( this );\n    this._mode()._resetLayout();\n  };\n\n  proto._getItemLayoutPosition = function( item  ) {\n    return this._mode()._getItemLayoutPosition( item );\n  };\n\n  proto._manageStamp = function( stamp ) {\n    this._mode()._manageStamp( stamp );\n  };\n\n  proto._getContainerSize = function() {\n    return this._mode()._getContainerSize();\n  };\n\n  proto.needsResizeLayout = function() {\n    return this._mode().needsResizeLayout();\n  };\n\n  // -------------------------- adding & removing -------------------------- //\n\n  // HEADS UP overwrites default Outlayer appended\n  proto.appended = function( elems ) {\n    var items = this.addItems( elems );\n    if ( !items.length ) {\n      return;\n    }\n    // filter, layout, reveal new items\n    var filteredItems = this._filterRevealAdded( items );\n    // add to filteredItems\n    this.filteredItems = this.filteredItems.concat( filteredItems );\n  };\n\n  // HEADS UP overwrites default Outlayer prepended\n  proto.prepended = function( elems ) {\n    var items = this._itemize( elems );\n    if ( !items.length ) {\n      return;\n    }\n    // start new layout\n    this._resetLayout();\n    this._manageStamps();\n    // filter, layout, reveal new items\n    var filteredItems = this._filterRevealAdded( items );\n    // layout previous items\n    this.layoutItems( this.filteredItems );\n    // add to items and filteredItems\n    this.filteredItems = filteredItems.concat( this.filteredItems );\n    this.items = items.concat( this.items );\n  };\n\n  proto._filterRevealAdded = function( items ) {\n    var filtered = this._filter( items );\n    this.hide( filtered.needHide );\n    // reveal all new items\n    this.reveal( filtered.matches );\n    // layout new items, no transition\n    this.layoutItems( filtered.matches, true );\n    return filtered.matches;\n  };\n\n  /**\n   * Filter, sort, and layout newly-appended item elements\n   * @param {Array or NodeList or Element} elems\n   */\n  proto.insert = function( elems ) {\n    var items = this.addItems( elems );\n    if ( !items.length ) {\n      return;\n    }\n    // append item elements\n    var i, item;\n    var len = items.length;\n    for ( i=0; i < len; i++ ) {\n      item = items[i];\n      this.element.appendChild( item.element );\n    }\n    // filter new stuff\n    var filteredInsertItems = this._filter( items ).matches;\n    // set flag\n    for ( i=0; i < len; i++ ) {\n      items[i].isLayoutInstant = true;\n    }\n    this.arrange();\n    // reset flag\n    for ( i=0; i < len; i++ ) {\n      delete items[i].isLayoutInstant;\n    }\n    this.reveal( filteredInsertItems );\n  };\n\n  var _remove = proto.remove;\n  proto.remove = function( elems ) {\n    elems = utils.makeArray( elems );\n    var removeItems = this.getItems( elems );\n    // do regular thing\n    _remove.call( this, elems );\n    // bail if no items to remove\n    var len = removeItems && removeItems.length;\n    // remove elems from filteredItems\n    for ( var i=0; len && i < len; i++ ) {\n      var item = removeItems[i];\n      // remove item from collection\n      utils.removeFrom( this.filteredItems, item );\n    }\n  };\n\n  proto.shuffle = function() {\n    // update random sortData\n    for ( var i=0; i < this.items.length; i++ ) {\n      var item = this.items[i];\n      item.sortData.random = Math.random();\n    }\n    this.options.sortBy = 'random';\n    this._sort();\n    this._layout();\n  };\n\n  /**\n   * trigger fn without transition\n   * kind of hacky to have this in the first place\n   * @param {Function} fn\n   * @param {Array} args\n   * @returns ret\n   * @private\n   */\n  proto._noTransition = function( fn, args ) {\n    // save transitionDuration before disabling\n    var transitionDuration = this.options.transitionDuration;\n    // disable transition\n    this.options.transitionDuration = 0;\n    // do it\n    var returnValue = fn.apply( this, args );\n    // re-enable transition for reveal\n    this.options.transitionDuration = transitionDuration;\n    return returnValue;\n  };\n\n  // ----- helper methods ----- //\n\n  /**\n   * getter method for getting filtered item elements\n   * @returns {Array} elems - collection of item elements\n   */\n  proto.getFilteredItemElements = function() {\n    return this.filteredItems.map( function( item ) {\n      return item.element;\n    });\n  };\n\n  // -----  ----- //\n\n  return Enviratope;\n\n}));\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/isotope.js","/**\n * Fizzy UI utils v2.0.5\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n( function( window, factory ) {\n  // universal module definition\n  /*jshint strict: false */ /*globals define, module, require */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'desandro-matches-selector/matches-selector'\n    ], function( matchesSelector ) {\n      return factory( window, matchesSelector );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('desandro-matches-selector')\n    );\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(\n      window,\n      window.matchesSelector\n    );\n  }\n\n}( window, function factory( window, matchesSelector ) {\n\n'use strict';\n\nvar utils = {};\n\n// ----- extend ----- //\n\n// extends objects\nutils.extend = function( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n};\n\n// ----- modulo ----- //\n\nutils.modulo = function( num, div ) {\n  return ( ( num % div ) + div ) % div;\n};\n\n// ----- makeArray ----- //\n\n// turn element or nodeList into an array\nutils.makeArray = function( obj ) {\n  var ary = [];\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    ary = obj;\n  } else if ( obj && typeof obj == 'object' &&\n    typeof obj.length == 'number' ) {\n    // convert nodeList to array\n    for ( var i=0; i < obj.length; i++ ) {\n      ary.push( obj[i] );\n    }\n  } else {\n    // array of single index\n    ary.push( obj );\n  }\n  return ary;\n};\n\n// ----- removeFrom ----- //\n\nutils.removeFrom = function( ary, obj ) {\n  var index = ary.indexOf( obj );\n  if ( index != -1 ) {\n    ary.splice( index, 1 );\n  }\n};\n\n// ----- getParent ----- //\n\nutils.getParent = function( elem, selector ) {\n  while ( elem.parentNode && elem != document.body ) {\n    elem = elem.parentNode;\n    if ( matchesSelector( elem, selector ) ) {\n      return elem;\n    }\n  }\n};\n\n// ----- getQueryElement ----- //\n\n// use element as selector string\nutils.getQueryElement = function( elem ) {\n  if ( typeof elem == 'string' ) {\n    return document.querySelector( elem );\n  }\n  return elem;\n};\n\n// ----- handleEvent ----- //\n\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\nutils.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n// ----- filterFindElements ----- //\n\nutils.filterFindElements = function( elems, selector ) {\n  // make array of elems\n  elems = utils.makeArray( elems );\n  var ffElems = [];\n\n  elems.forEach( function( elem ) {\n    // check that elem is an actual element\n    if ( !( elem instanceof HTMLElement ) ) {\n      return;\n    }\n    // add elem if no selector\n    if ( !selector ) {\n      ffElems.push( elem );\n      return;\n    }\n    // filter & find items if we have a selector\n    // filter\n    if ( matchesSelector( elem, selector ) ) {\n      ffElems.push( elem );\n    }\n    // find children\n    var childElems = elem.querySelectorAll( selector );\n    // concat childElems to filterFound array\n    for ( var i=0; i < childElems.length; i++ ) {\n      ffElems.push( childElems[i] );\n    }\n  });\n\n  return ffElems;\n};\n\n// ----- debounceMethod ----- //\n\nutils.debounceMethod = function( _class, methodName, threshold ) {\n  // original method\n  var method = _class.prototype[ methodName ];\n  var timeoutName = methodName + 'Timeout';\n\n  _class.prototype[ methodName ] = function() {\n    var timeout = this[ timeoutName ];\n    if ( timeout ) {\n      clearTimeout( timeout );\n    }\n    var args = arguments;\n\n    var _this = this;\n    this[ timeoutName ] = setTimeout( function() {\n      method.apply( _this, args );\n      delete _this[ timeoutName ];\n    }, threshold || 100 );\n  };\n};\n\n// ----- docReady ----- //\n\nutils.docReady = function( callback ) {\n  var readyState = document.readyState;\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\n    // do async to allow for other scripts to run. metafizzy/flickity#441\n    setTimeout( callback );\n  } else {\n    document.addEventListener( 'DOMContentLoaded', callback );\n  }\n};\n\n// ----- htmlInit ----- //\n\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\nutils.toDashed = function( str ) {\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\n    return $1 + '-' + $2;\n  }).toLowerCase();\n};\n\nvar console = window.console;\n/**\n * allow user to initialize classes via [data-namespace] or .js-namespace class\n * htmlInit( Widget, 'widgetName' )\n * options are parsed from data-namespace-options\n */\nutils.htmlInit = function( WidgetClass, namespace ) {\n  utils.docReady( function() {\n    var dashedNamespace = utils.toDashed( namespace );\n    var dataAttr = 'data-' + dashedNamespace;\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\n    var elems = utils.makeArray( dataAttrElems )\n      .concat( utils.makeArray( jsDashElems ) );\n    var dataOptionsAttr = dataAttr + '-options';\n    var jQuery = window.jQuery;\n\n    elems.forEach( function( elem ) {\n      var attr = elem.getAttribute( dataAttr ) ||\n        elem.getAttribute( dataOptionsAttr );\n      var options;\n      try {\n        options = attr && JSON.parse( attr );\n      } catch ( error ) {\n        // log error, do not initialize\n        if ( console ) {\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\n          ': ' + error );\n        }\n        return;\n      }\n      // initialize\n      var instance = new WidgetClass( elem, options );\n      // make available via $().data('namespace')\n      if ( jQuery ) {\n        jQuery.data( elem, namespace, instance );\n      }\n    });\n\n  });\n};\n\n// -----  ----- //\n\nreturn utils;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fizzy-ui-utils/utils.js\n// module id = 12\n// module chunks = 0","/**\n * matchesSelector v2.0.2\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  /*global define: false, module: false */\n  'use strict';\n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.matchesSelector = factory();\n  }\n\n}( window, function factory() {\n  'use strict';\n\n  var matchesMethod = ( function() {\n    var ElemProto = window.Element.prototype;\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n      return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n      return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0; i < prefixes.length; i++ ) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n      if ( ElemProto[ method ] ) {\n        return method;\n      }\n    }\n  })();\n\n  return function matchesSelector( elem, selector ) {\n    return elem[ matchesMethod ]( selector );\n  };\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/desandro-matches-selector/matches-selector.js\n// module id = 13\n// module chunks = 0","/**\n * Outlayer Item\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( [\n        'ev-emitter/ev-emitter',\n        'get-size/get-size'\n      ],\n      factory\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      require('ev-emitter'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(\n      window.EvEmitter,\n      window.getSize\n    );\n  }\n\n}( window, function factory( EvEmitter, getSize ) {\n'use strict';\n\n// ----- helpers ----- //\n\nfunction isEmptyObj( obj ) {\n  for ( var prop in obj ) {\n    return false;\n  }\n  prop = null;\n  return true;\n}\n\n// -------------------------- CSS3 support -------------------------- //\n\n\nvar docElemStyle = document.documentElement.style;\n\nvar transitionProperty = typeof docElemStyle.transition == 'string' ?\n  'transition' : 'WebkitTransition';\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\n  'transform' : 'WebkitTransform';\n\nvar transitionEndEvent = {\n  WebkitTransition: 'webkitTransitionEnd',\n  transition: 'transitionend'\n}[ transitionProperty ];\n\n// cache all vendor properties that could have vendor prefix\nvar vendorProperties = {\n  transform: transformProperty,\n  transition: transitionProperty,\n  transitionDuration: transitionProperty + 'Duration',\n  transitionProperty: transitionProperty + 'Property',\n  transitionDelay: transitionProperty + 'Delay'\n};\n\n// -------------------------- Item -------------------------- //\n\nfunction Item( element, layout ) {\n  if ( !element ) {\n    return;\n  }\n\n  this.element = element;\n  // parent layout class, i.e. Masonry, Isotope, or Packery\n  this.layout = layout;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n\n  this._create();\n}\n\n// inherit EvEmitter\nvar proto = Item.prototype = Object.create( EvEmitter.prototype );\nproto.constructor = Item;\n\nproto._create = function() {\n  // transition objects\n  this._transn = {\n    ingProperties: {},\n    clean: {},\n    onEnd: {}\n  };\n\n  this.css({\n    position: 'absolute'\n  });\n};\n\n// trigger specified handler for event type\nproto.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * apply CSS styles to element\n * @param {Object} style\n */\nproto.css = function( style ) {\n  var elemStyle = this.element.style;\n\n  for ( var prop in style ) {\n    // use vendor property if available\n    var supportedProp = vendorProperties[ prop ] || prop;\n    elemStyle[ supportedProp ] = style[ prop ];\n  }\n};\n\n // measure position, and sets it\nproto.getPosition = function() {\n  var style = getComputedStyle( this.element );\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  var xValue = style[ isOriginLeft ? 'left' : 'right' ];\n  var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\n  var x = parseFloat( xValue );\n  var y = parseFloat( yValue );\n  // convert percent to pixels\n  var layoutSize = this.layout.size;\n  if ( xValue.indexOf('%') != -1 ) {\n    x = ( x / 100 ) * layoutSize.width;\n  }\n  if ( yValue.indexOf('%') != -1 ) {\n    y = ( y / 100 ) * layoutSize.height;\n  }\n  // clean up 'auto' or other non-integer values\n  x = isNaN( x ) ? 0 : x;\n  y = isNaN( y ) ? 0 : y;\n  // remove padding from measurement\n  x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n  y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n\n  this.position.x = x;\n  this.position.y = y;\n};\n\n// set settled position, apply padding\nproto.layoutPosition = function() {\n  var layoutSize = this.layout.size;\n  var style = {};\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n\n  // x\n  var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n  var xProperty = isOriginLeft ? 'left' : 'right';\n  var xResetProperty = isOriginLeft ? 'right' : 'left';\n\n  var x = this.position.x + layoutSize[ xPadding ];\n  // set in percentage or pixels\n  style[ xProperty ] = this.getXValue( x );\n  // reset other property\n  style[ xResetProperty ] = '';\n\n  // y\n  var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n  var yProperty = isOriginTop ? 'top' : 'bottom';\n  var yResetProperty = isOriginTop ? 'bottom' : 'top';\n\n  var y = this.position.y + layoutSize[ yPadding ];\n  // set in percentage or pixels\n  style[ yProperty ] = this.getYValue( y );\n  // reset other property\n  style[ yResetProperty ] = '';\n\n  this.css( style );\n  this.emitEvent( 'layout', [ this ] );\n};\n\nproto.getXValue = function( x ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && !isHorizontal ?\n    ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\n};\n\nproto.getYValue = function( y ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && isHorizontal ?\n    ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\n};\n\nproto._transitionTo = function( x, y ) {\n  this.getPosition();\n  // get current x & y from top/left\n  var curX = this.position.x;\n  var curY = this.position.y;\n\n  var didNotMove = x == this.position.x && y == this.position.y;\n\n  // save end position\n  this.setPosition( x, y );\n\n  // if did not move and not transitioning, just go to layout\n  if ( didNotMove && !this.isTransitioning ) {\n    this.layoutPosition();\n    return;\n  }\n\n  var transX = x - curX;\n  var transY = y - curY;\n  var transitionStyle = {};\n  transitionStyle.transform = this.getTranslate( transX, transY );\n\n  this.transition({\n    to: transitionStyle,\n    onTransitionEnd: {\n      transform: this.layoutPosition\n    },\n    isCleaning: true\n  });\n};\n\nproto.getTranslate = function( x, y ) {\n  // flip cooridinates if origin on right or bottom\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  x = isOriginLeft ? x : -x;\n  y = isOriginTop ? y : -y;\n  return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n};\n\n// non transition + transform support\nproto.goTo = function( x, y ) {\n  this.setPosition( x, y );\n  this.layoutPosition();\n};\n\nproto.moveTo = proto._transitionTo;\n\nproto.setPosition = function( x, y ) {\n  this.position.x = parseFloat( x );\n  this.position.y = parseFloat( y );\n};\n\n// ----- transition ----- //\n\n/**\n * @param {Object} style - CSS\n * @param {Function} onTransitionEnd\n */\n\n// non transition, just trigger callback\nproto._nonTransition = function( args ) {\n  this.css( args.to );\n  if ( args.isCleaning ) {\n    this._removeStyles( args.to );\n  }\n  for ( var prop in args.onTransitionEnd ) {\n    args.onTransitionEnd[ prop ].call( this );\n  }\n};\n\n/**\n * proper transition\n * @param {Object} args - arguments\n *   @param {Object} to - style to transition to\n *   @param {Object} from - style to start transition from\n *   @param {Boolean} isCleaning - removes transition styles after transition\n *   @param {Function} onTransitionEnd - callback\n */\nproto.transition = function( args ) {\n  // redirect to nonTransition if no transition duration\n  if ( !parseFloat( this.layout.options.transitionDuration ) ) {\n    this._nonTransition( args );\n    return;\n  }\n\n  var _transition = this._transn;\n  // keep track of onTransitionEnd callback by css property\n  for ( var prop in args.onTransitionEnd ) {\n    _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\n  }\n  // keep track of properties that are transitioning\n  for ( prop in args.to ) {\n    _transition.ingProperties[ prop ] = true;\n    // keep track of properties to clean up when transition is done\n    if ( args.isCleaning ) {\n      _transition.clean[ prop ] = true;\n    }\n  }\n\n  // set from styles\n  if ( args.from ) {\n    this.css( args.from );\n    // force redraw. http://blog.alexmaccaw.com/css-transitions\n    var h = this.element.offsetHeight;\n    // hack for JSHint to hush about unused var\n    h = null;\n  }\n  // enable transition\n  this.enableTransition( args.to );\n  // set styles that are transitioning\n  this.css( args.to );\n\n  this.isTransitioning = true;\n\n};\n\n// dash before all cap letters, including first for\n// WebkitTransform => -webkit-transform\nfunction toDashedAll( str ) {\n  return str.replace( /([A-Z])/g, function( $1 ) {\n    return '-' + $1.toLowerCase();\n  });\n}\n\nvar transitionProps = 'opacity,' + toDashedAll( transformProperty );\n\nproto.enableTransition = function(/* style */) {\n  // HACK changing transitionProperty during a transition\n  // will cause transition to jump\n  if ( this.isTransitioning ) {\n    return;\n  }\n\n  // make `transition: foo, bar, baz` from style object\n  // HACK un-comment this when enableTransition can work\n  // while a transition is happening\n  // var transitionValues = [];\n  // for ( var prop in style ) {\n  //   // dash-ify camelCased properties like WebkitTransition\n  //   prop = vendorProperties[ prop ] || prop;\n  //   transitionValues.push( toDashedAll( prop ) );\n  // }\n  // munge number to millisecond, to match stagger\n  var duration = this.layout.options.transitionDuration;\n  duration = typeof duration == 'number' ? duration + 'ms' : duration;\n  // enable transition styles\n  this.css({\n    transitionProperty: transitionProps,\n    transitionDuration: duration,\n    transitionDelay: this.staggerDelay || 0\n  });\n  // listen for transition end event\n  this.element.addEventListener( transitionEndEvent, this, false );\n};\n\n// ----- events ----- //\n\nproto.onwebkitTransitionEnd = function( event ) {\n  this.ontransitionend( event );\n};\n\nproto.onotransitionend = function( event ) {\n  this.ontransitionend( event );\n};\n\n// properties that I munge to make my life easier\nvar dashedVendorProperties = {\n  '-webkit-transform': 'transform'\n};\n\nproto.ontransitionend = function( event ) {\n  // disregard bubbled events from children\n  if ( event.target !== this.element ) {\n    return;\n  }\n  var _transition = this._transn;\n  // get property name of transitioned property, convert to prefix-free\n  var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\n\n  // remove property that has completed transitioning\n  delete _transition.ingProperties[ propertyName ];\n  // check if any properties are still transitioning\n  if ( isEmptyObj( _transition.ingProperties ) ) {\n    // all properties have completed transitioning\n    this.disableTransition();\n  }\n  // clean style\n  if ( propertyName in _transition.clean ) {\n    // clean up style\n    this.element.style[ event.propertyName ] = '';\n    delete _transition.clean[ propertyName ];\n  }\n  // trigger onTransitionEnd callback\n  if ( propertyName in _transition.onEnd ) {\n    var onTransitionEnd = _transition.onEnd[ propertyName ];\n    onTransitionEnd.call( this );\n    delete _transition.onEnd[ propertyName ];\n  }\n\n  this.emitEvent( 'transitionEnd', [ this ] );\n};\n\nproto.disableTransition = function() {\n  this.removeTransitionStyles();\n  this.element.removeEventListener( transitionEndEvent, this, false );\n  this.isTransitioning = false;\n};\n\n/**\n * removes style property from element\n * @param {Object} style\n**/\nproto._removeStyles = function( style ) {\n  // clean up transition styles\n  var cleanStyle = {};\n  for ( var prop in style ) {\n    cleanStyle[ prop ] = '';\n  }\n  this.css( cleanStyle );\n};\n\nvar cleanTransitionStyle = {\n  transitionProperty: '',\n  transitionDuration: '',\n  transitionDelay: ''\n};\n\nproto.removeTransitionStyles = function() {\n  // remove transition\n  this.css( cleanTransitionStyle );\n};\n\n// ----- stagger ----- //\n\nproto.stagger = function( delay ) {\n  delay = isNaN( delay ) ? 0 : delay;\n  this.staggerDelay = delay + 'ms';\n};\n\n// ----- show/hide/remove ----- //\n\n// remove element from DOM\nproto.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // remove display: none\n  this.css({ display: '' });\n  this.emitEvent( 'remove', [ this ] );\n};\n\nproto.remove = function() {\n  // just remove element if no transition support or no transition\n  if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\n    this.removeElem();\n    return;\n  }\n\n  // start transition\n  this.once( 'transitionEnd', function() {\n    this.removeElem();\n  });\n  this.hide();\n};\n\nproto.reveal = function() {\n  delete this.isHidden;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\n\n  this.transition({\n    from: options.hiddenStyle,\n    to: options.visibleStyle,\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onRevealTransitionEnd = function() {\n  // check if still visible\n  // during transition, item may have been hidden\n  if ( !this.isHidden ) {\n    this.emitEvent('reveal');\n  }\n};\n\n/**\n * get style property use for hide/reveal transition end\n * @param {String} styleProperty - hiddenStyle/visibleStyle\n * @returns {String}\n */\nproto.getHideRevealTransitionEndProperty = function( styleProperty ) {\n  var optionStyle = this.layout.options[ styleProperty ];\n  // use opacity\n  if ( optionStyle.opacity ) {\n    return 'opacity';\n  }\n  // get first property\n  for ( var prop in optionStyle ) {\n    return prop;\n  }\n};\n\nproto.hide = function() {\n  // set flag\n  this.isHidden = true;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\n\n  this.transition({\n    from: options.visibleStyle,\n    to: options.hiddenStyle,\n    // keep hidden stuff hidden\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onHideTransitionEnd = function() {\n  // check if still hidden\n  // during transition, item may have been un-hidden\n  if ( this.isHidden ) {\n    this.css({ display: 'none' });\n    this.emitEvent('hide');\n  }\n};\n\nproto.destroy = function() {\n  this.css({\n    position: '',\n    left: '',\n    right: '',\n    top: '',\n    bottom: '',\n    transition: '',\n    transform: ''\n  });\n};\n\nreturn Item;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/outlayer/item.js\n// module id = 14\n// module chunks = 0","/*!\n * Masonry layout mode\n * sub-classes Masonry\n * https://masonry.desandro.com\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        '../layout-mode',\n        'masonry-layout/masonry'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode'),\n      require('masonry-layout')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Isotope.LayoutMode,\n      window.Masonry\n    );\n  }\n\n}( window, function factory( LayoutMode, Masonry ) {\n'use strict';\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var MasonryMode = LayoutMode.create('masonry');\n\n  var proto = MasonryMode.prototype;\n\n  var keepModeMethods = {\n    _getElementOffset: true,\n    layout: true,\n    _getMeasurement: true\n  };\n\n  // inherit Masonry prototype\n  for ( var method in Masonry.prototype ) {\n    // do not inherit mode methods\n    if ( !keepModeMethods[ method ] ) {\n      proto[ method ] = Masonry.prototype[ method ];\n    }\n  }\n\n  var measureColumns = proto.measureColumns;\n  proto.measureColumns = function() {\n    // set items, used if measuring first item\n    this.items = this.isotope.filteredItems;\n    measureColumns.call( this );\n  };\n\n  // point to mode options for fitWidth\n  var _getOption = proto._getOption;\n  proto._getOption = function( option ) {\n    if ( option == 'fitWidth' ) {\n      return this.options.isFitWidth !== undefined ?\n        this.options.isFitWidth : this.options.fitWidth;\n    }\n    return _getOption.apply( this.isotope, arguments );\n  };\n\n  return MasonryMode;\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/layout-modes/masonry.js","/*!\n * Masonry v4.2.0\n * Cascading grid layout library\n * http://masonry.desandro.com\n * MIT License\n * by David DeSandro\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'outlayer/outlayer',\n        'get-size/get-size'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Masonry = factory(\n      window.Outlayer,\n      window.getSize\n    );\n  }\n\n}( window, function factory( Outlayer, getSize ) {\n\n'use strict';\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Masonry = Outlayer.create('masonry');\n  // isFitWidth -> fitWidth\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\n\n  var proto = Masonry.prototype;\n\n  proto._resetLayout = function() {\n    this.getSize();\n    this._getMeasurement( 'columnWidth', 'outerWidth' );\n    this._getMeasurement( 'gutter', 'outerWidth' );\n    this.measureColumns();\n\n    // reset column Y\n    this.colYs = [];\n    for ( var i=0; i < this.cols; i++ ) {\n      this.colYs.push( 0 );\n    }\n\n    this.maxY = 0;\n    this.horizontalColIndex = 0;\n  };\n\n  proto.measureColumns = function() {\n    this.getContainerWidth();\n    // if columnWidth is 0, default to outerWidth of first item\n    if ( !this.columnWidth ) {\n      var firstItem = this.items[0];\n      var firstItemElem = firstItem && firstItem.element;\n      // columnWidth fall back to item of first element\n      this.columnWidth = firstItemElem && getSize( firstItemElem ).outerWidth ||\n        // if first elem has no width, default to size of container\n        this.containerWidth;\n    }\n\n    var columnWidth = this.columnWidth += this.gutter;\n\n    // calculate columns\n    var containerWidth = this.containerWidth + this.gutter;\n    var cols = containerWidth / columnWidth;\n    // fix rounding errors, typically with gutters\n    var excess = columnWidth - containerWidth % columnWidth;\n    // if overshoot is less than a pixel, round up, otherwise floor it\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\n    cols = Math[ mathMethod ]( cols );\n    this.cols = Math.max( cols, 1 );\n  };\n\n  proto.getContainerWidth = function() {\n    // container is parent if fit width\n    var isFitWidth = this._getOption('fitWidth');\n    var container = isFitWidth ? this.element.parentNode : this.element;\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var size = getSize( container );\n    this.containerWidth = size && size.innerWidth;\n  };\n\n  proto._getItemLayoutPosition = function( item ) {\n    item.getSize();\n    // how many columns does this brick span\n    var remainder = item.size.outerWidth % this.columnWidth;\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n    // round if off by 1 pixel, otherwise use ceil\n    var colSpan = Math[ mathMethod ]( item.size.outerWidth / this.columnWidth );\n    colSpan = Math.min( colSpan, this.cols );\n    // use horizontal or top column position\n    var colPosMethod = this.options.horizontalOrder ?\n      '_getHorizontalColPosition' : '_getTopColPosition';\n    var colPosition = this[ colPosMethod ]( colSpan, item );\n    // position the brick\n    var position = {\n      x: this.columnWidth * colPosition.col,\n      y: colPosition.y\n    };\n    // apply setHeight to necessary columns\n    var setHeight = colPosition.y + item.size.outerHeight;\n    var setMax = colSpan + colPosition.col;\n    for ( var i = colPosition.col; i < setMax; i++ ) {\n      this.colYs[i] = setHeight;\n    }\n\n    return position;\n  };\n\n  proto._getTopColPosition = function( colSpan ) {\n    var colGroup = this._getTopColGroup( colSpan );\n    // get the minimum Y value from the columns\n    var minimumY = Math.min.apply( Math, colGroup );\n\n    return {\n      col: colGroup.indexOf( minimumY ),\n      y: minimumY,\n    };\n  };\n\n  /**\n   * @param {Number} colSpan - number of columns the element spans\n   * @returns {Array} colGroup\n   */\n  proto._getTopColGroup = function( colSpan ) {\n    if ( colSpan < 2 ) {\n      // if brick spans only one column, use all the column Ys\n      return this.colYs;\n    }\n\n    var colGroup = [];\n    // how many different places could this brick fit horizontally\n    var groupCount = this.cols + 1 - colSpan;\n    // for each group potential horizontal position\n    for ( var i = 0; i < groupCount; i++ ) {\n      colGroup[i] = this._getColGroupY( i, colSpan );\n    }\n    return colGroup;\n  };\n\n  proto._getColGroupY = function( col, colSpan ) {\n    if ( colSpan < 2 ) {\n      return this.colYs[ col ];\n    }\n    // make an array of colY values for that one group\n    var groupColYs = this.colYs.slice( col, col + colSpan );\n    // and get the max value of the array\n    return Math.max.apply( Math, groupColYs );\n  };\n\n  // get column position based on horizontal index. #873\n  proto._getHorizontalColPosition = function( colSpan, item ) {\n    var col = this.horizontalColIndex % this.cols;\n    var isOver = colSpan > 1 && col + colSpan > this.cols;\n    // shift to next row if item can't fit on current row\n    col = isOver ? 0 : col;\n    // don't let zero-size items take up space\n    var hasSize = item.size.outerWidth && item.size.outerHeight;\n    this.horizontalColIndex = hasSize ? col + colSpan : this.horizontalColIndex;\n\n    return {\n      col: col,\n      y: this._getColGroupY( col, colSpan ),\n    };\n  };\n\n  proto._manageStamp = function( stamp ) {\n    var stampSize = getSize( stamp );\n    var offset = this._getElementOffset( stamp );\n    // get the columns that this stamp affects\n    var isOriginLeft = this._getOption('originLeft');\n    var firstX = isOriginLeft ? offset.left : offset.right;\n    var lastX = firstX + stampSize.outerWidth;\n    var firstCol = Math.floor( firstX / this.columnWidth );\n    firstCol = Math.max( 0, firstCol );\n    var lastCol = Math.floor( lastX / this.columnWidth );\n    // lastCol should not go over if multiple of columnWidth #425\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\n    lastCol = Math.min( this.cols - 1, lastCol );\n    // set colYs to bottom of the stamp\n\n    var isOriginTop = this._getOption('originTop');\n    var stampMaxY = ( isOriginTop ? offset.top : offset.bottom ) +\n      stampSize.outerHeight;\n    for ( var i = firstCol; i <= lastCol; i++ ) {\n      this.colYs[i] = Math.max( stampMaxY, this.colYs[i] );\n    }\n  };\n\n  proto._getContainerSize = function() {\n    this.maxY = Math.max.apply( Math, this.colYs );\n    var size = {\n      height: this.maxY\n    };\n\n    if ( this._getOption('fitWidth') ) {\n      size.width = this._getContainerFitWidth();\n    }\n\n    return size;\n  };\n\n  proto._getContainerFitWidth = function() {\n    var unusedCols = 0;\n    // count unused columns\n    var i = this.cols;\n    while ( --i ) {\n      if ( this.colYs[i] !== 0 ) {\n        break;\n      }\n      unusedCols++;\n    }\n    // fit container to columns that have been used\n    return ( this.cols - unusedCols ) * this.columnWidth - this.gutter;\n  };\n\n  proto.needsResizeLayout = function() {\n    var previousWidth = this.containerWidth;\n    this.getContainerWidth();\n    return previousWidth != this.containerWidth;\n  };\n\n  return Masonry;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/masonry-layout/masonry.js\n// module id = 16\n// module chunks = 0","/**\n * fitRows layout mode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        '../layout-mode'\n      ],\n      factory );\n  } else if ( typeof exports == 'object' ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Isotope.LayoutMode\n    );\n  }\n\n}( window, function factory( LayoutMode ) {\n'use strict';\n\nvar FitRows = LayoutMode.create('fitRows');\n\nvar proto = FitRows.prototype;\n\nproto._resetLayout = function() {\n  this.x = 0;\n  this.y = 0;\n  this.maxY = 0;\n  this._getMeasurement( 'gutter', 'outerWidth' );\n};\n\nproto._getItemLayoutPosition = function( item ) {\n  item.getSize();\n\n  var itemWidth = item.size.outerWidth + this.gutter;\n  // if this element cannot fit in the current row\n  var containerWidth = this.isotope.size.innerWidth + this.gutter;\n  if ( this.x !== 0 && itemWidth + this.x > containerWidth ) {\n    this.x = 0;\n    this.y = this.maxY;\n  }\n\n  var position = {\n    x: this.x,\n    y: this.y\n  };\n\n  this.maxY = Math.max( this.maxY, this.y + item.size.outerHeight );\n  this.x += itemWidth;\n\n  return position;\n};\n\nproto._getContainerSize = function() {\n  return { height: this.maxY };\n};\n\nreturn FitRows;\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/layout-modes/fit-rows.js","/**\n * vertical layout mode\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        '../layout-mode'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Isotope.LayoutMode\n    );\n  }\n\n}( window, function factory( LayoutMode ) {\n'use strict';\n\nvar Vertical = LayoutMode.create( 'vertical', {\n  horizontalAlignment: 0\n});\n\nvar proto = Vertical.prototype;\n\nproto._resetLayout = function() {\n  this.y = 0;\n};\n\nproto._getItemLayoutPosition = function( item ) {\n  item.getSize();\n  var x = ( this.isotope.size.innerWidth - item.size.outerWidth ) *\n    this.options.horizontalAlignment;\n  var y = this.y;\n  this.y += item.size.outerHeight;\n  return { x: x, y: y };\n};\n\nproto._getContainerSize = function() {\n  return { height: this.y };\n};\n\nreturn Vertical;\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/layout-modes/vertical.js","/**\n * Isotope Item\n**/\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'outlayer/outlayer'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer')\n    );\n  } else {\n    // browser global\n    window.Isotope = window.Isotope || {};\n    window.Isotope.Item = factory(\n      window.Outlayer\n    );\n  }\n\n}( window, function factory( Outlayer ) {\n'use strict';\n\n// -------------------------- Item -------------------------- //\n\n// sub-class Outlayer Item\nfunction Item() {\n  Outlayer.Item.apply( this, arguments );\n}\n\nvar proto = Item.prototype = Object.create( Outlayer.Item.prototype );\n\nvar _create = proto._create;\nproto._create = function() {\n  // assign id, used for original-order sorting\n  this.id = this.layout.itemGUID++;\n  _create.call( this );\n  this.sortData = {};\n};\n\nproto.updateSortData = function() {\n  if ( this.isIgnored ) {\n    return;\n  }\n  // default sorters\n  this.sortData.id = this.id;\n  // for backward compatibility\n  this.sortData['original-order'] = this.id;\n  this.sortData.random = Math.random();\n  // go thru getSortData obj and apply the sorters\n  var getSortData = this.layout.options.getSortData;\n  var sorters = this.layout._sorters;\n  for ( var key in getSortData ) {\n    var sorter = sorters[ key ];\n    this.sortData[ key ] = sorter( this.element, this );\n  }\n};\n\nvar _destroy = proto.destroy;\nproto.destroy = function() {\n  // call super\n  _destroy.apply( this, arguments );\n  // reset display, #741\n  this.css({\n    display: ''\n  });\n};\n\nreturn Item;\n\n}));\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/enviratope-item.js","/**\n * enviraImagesLoaded PACKAGED v4.1.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n/**\n * EvEmitter v1.0.1\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'ev-emitter/ev-emitter',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( this, function() {\n\n\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners array\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || [];\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var i = 0;\n  var listener = listeners[i];\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  while ( listener ) {\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n    // get next listener\n    i += isOnce ? 0 : 1;\n    listener = listeners[i];\n  }\n\n  return this;\n};\n\nreturn EvEmitter;\n\n}));\n\n/*!\n * enviraImagesLoaded v4.1.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.enviraImagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( window,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  var ary = [];\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    ary = obj;\n  } else if ( typeof obj.length == 'number' ) {\n    // convert nodeList to array\n    for ( var i=0; i < obj.length; i++ ) {\n      ary.push( obj[i] );\n    }\n  } else {\n    // array of single index\n    ary.push( obj );\n  }\n  return ary;\n}\n\n// -------------------------- enviraImagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction EnviraImagesLoaded( elem, options, onAlways ) {\n  // coerce EnviraImagesLoaded() without new, to be new EnviraImagesLoaded()\n  if ( !( this instanceof EnviraImagesLoaded ) ) {\n    return new EnviraImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  if ( typeof elem == 'string' ) {\n    elem = document.querySelectorAll( elem );\n  }\n\n  this.elements = makeArray( elem );\n  this.options = extend( {}, this.options );\n\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( function() {\n    this.check();\n  }.bind( this ));\n}\n\nEnviraImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nEnviraImagesLoaded.prototype.options = {};\n\nEnviraImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nEnviraImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nEnviraImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nEnviraImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nEnviraImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nEnviraImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nEnviraImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nEnviraImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.pendingSrc || this.img.currentSrc || this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  return this.img.complete && this.img.naturalWidth !== undefined;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nEnviraImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().enviraImagesLoaded()\n  $.fn.enviraImagesLoaded = function( options, callback ) {\n    var instance = new EnviraImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nEnviraImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn EnviraImagesLoaded;\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/imagesloaded.js",";(function (window, document, $, undefined) {\n\n    'use strict';\n\n    window.console = window.console || {\n        info: function(stuff) {}\n      };\n\n    // If there's no jQuery, envirabox can't work\n    // =========================================\n    if ( !$ ) {\n        return;\n    }\n\n    // Check if envirabox is already initialized\n    // ========================================\n    if ( $.fn.envirabox ) {\n\n         console.info('EnviraBox already initialized');\n\n        return;\n    }\n\n    // Private default settings\n    // ========================\n    var defaults = {\n\n        // Enable infinite gallery navigation\n        loop : false,\n\n        // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\n        margin : [44, 0],\n\n        // Horizontal space between slides\n        gutter : 50,\n\n        // Enable keyboard navigation\n        keyboard : true,\n\n        // Should display navigation arrows at the screen edges\n        arrows : true,\n\n        // Should display infobar (counter and arrows at the top)\n        infobar : false,\n\n        // Should display toolbar (buttons at the top)\n        toolbar : true,\n\n        // What buttons should appear in the top right corner.\n        // Buttons will be created using templates from `btnTpl` option\n        // and they will be placed into toolbar (class=\"envirabox-toolbar\"` element)\n        buttons : [\n            'slideShow',\n            'fullScreen',\n            'thumbs',\n            'close',\n            //\"zoom\",\n            //\"share\",\n            //\"slideShow\",\n            //\"fullScreen\",\n            //\"download\",\n            \"thumbs\",\n            \"close\"\n        ],\n\n        // Detect \"idle\" time in seconds\n        idleTime : 3,\n\n        // Should display buttons at top right corner of the content\n        // If 'auto' - they will be created for content having type 'html', 'inline' or 'ajax'\n        // Use template from `btnTpl.smallBtn` for customization\n        smallBtn : true,\n\n        // Disable right-click and use simple image protection for images\n        protect : false,\n\n        // Shortcut to make content \"modal\" - disable keyboard navigtion, hide buttons, etc\n        modal : false,\n\n        image : {\n\n            // Wait for images to load before displaying\n            // Requires predefined image dimensions\n            // If 'auto' - will zoom in thumbnail if 'width' and 'height' attributes are found\n            preload : \"auto\",\n\n        },\n\n        ajax : {\n\n            // Object containing settings for ajax request\n            settings : {\n\n                // This helps to indicate that request comes from the modal\n                // Feel free to change naming\n                data : {\n                    envirabox : true\n                }\n            }\n\n        },\n\n        iframe : {\n\n            // Iframe template\n            tpl : '<iframe id=\"envirabox-frame{rnd}\" name=\"envirabox-frame{rnd}\" class=\"envirabox-iframe {additionalClasses}\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency=\"true\" src=\"\"></iframe>',\n\n            // Preload iframe before displaying it\n            // This allows to calculate iframe content width and height\n            // (note: Due to \"Same Origin Policy\", you can't get cross domain data).\n            preload : true,\n\n            // Custom CSS styling for iframe wrapping element\n            // You can use this to set custom iframe dimensions\n            css : {},\n\n            // Iframe tag attributes\n            attr : {\n                scrolling : 'auto'\n            }\n\n        },\n\n        genericDiv : {\n\n            // Iframe template\n            tpl : '<div id=\"envirabox-generic-div{rnd}\" name=\"envirabox-generic-div{rnd}\" class=\"fb-video\"></div>',\n\n            // Preload iframe before displaying it\n            // This allows to calculate iframe content width and height\n            // (note: Due to \"Same Origin Policy\", you can't get cross domain data).\n            preload : true,\n\n            provider: 'facebook',\n\n            // Custom CSS styling for iframe wrapping element\n            // You can use this to set custom iframe dimensions\n            css : {},\n\n            // Iframe tag attributes\n            attr : {\n                scrolling : 'auto'\n            }\n\n        },\n\n        // Open/close animation type\n        // Possible values:\n        //   false            - disable\n        //   \"zoom\"           - zoom images from/to thumbnail\n        //   \"fade\"\n        //   \"zoom-in-out\"\n        //\n        animationEffect : \"zoom\",\n\n        // Duration in ms for open/close animation\n        animationDuration : 366,\n\n        // Should image change opacity while zooming\n        // If opacity is 'auto', then opacity will be changed if image and thumbnail have different aspect ratios\n        zoomOpacity : 'auto',\n\n        // Transition effect between slides\n        //\n        // Possible values:\n        //   false            - disable\n        //   \"fade'\n        //   \"slide'\n        //   \"circular'\n        //   \"tube'\n        //   \"zoom-in-out'\n        //   \"rotate'\n        //\n        transitionEffect : \"fade\",\n\n        // Duration in ms for transition animation\n        transitionDuration : 366,\n\n        // Custom CSS class for slide element\n        slideClass : 'enviraboxSlide',\n\n        // Custom CSS class for layout\n        baseClass : 'enviraboxLayout',\n\n        // Base template for layout\n        baseTpl :\n            '<div class=\"envirabox-container\" role=\"dialog\" tabindex=\"-1\">' +\n                '<div class=\"envirabox-bg\"></div>' +\n                '<div class=\"envirabox-inner\">' +\n                    '<div class=\"envirabox-infobar\">' +\n                        '<button data-envirabox-prev title=\"{{PREV}}\" class=\"envirabox-button envirabox-button--left\"></button>' +\n                        '<div class=\"envirabox-infobar__body\">' +\n                            '<span data-envirabox-index></span>&nbsp;/&nbsp;<span data-envirabox-count></span>' +\n                        '</div>' +\n                        '<button data-envirabox-next title=\"{{NEXT}}\" class=\"envirabox-button envirabox-button--right\"></button>' +\n                    '</div>' +\n                    '<div class=\"envirabox-toolbar\">' +\n                        '{{BUTTONS}}' +\n                    '</div>' +\n                    '<div class=\"envirabox-navigation\">' +\n                        '<button data-envirabox-prev title=\"{{PREV}}\" class=\"envirabox-arrow envirabox-arrow--left\" />' +\n                        '<button data-envirabox-next title=\"{{NEXT}}\" class=\"envirabox-arrow envirabox-arrow--right\" />' +\n                    '</div>' +\n                    '<div class=\"envirabox-stage\"></div>' +\n                    '<div class=\"envirabox-caption-wrap\">' +\n                        '<div class=\"envirabox-caption\"></div>' +\n                    '</div>' +\n                '</div>' +\n            '</div>',\n\n        // Loading indicator template\n        spinnerTpl : '<div class=\"envirabox-loading\"></div>',\n\n        // Error message template\n        errorTpl : '<div class=\"envirabox-error\"><p>{{ERROR}}<p></div>',\n\n        btnTpl : {\n            slideShow  : '<button data-envirabox-play class=\"envirabox-button envirabox-button--play\" title=\"{{PLAY_START}}\"></button>',\n            fullScreen : '<button data-envirabox-fullscreen class=\"envirabox-button envirabox-button--fullscreen\" title=\"{{FULL_SCREEN}}\"></button>',\n            thumbs     : '<button data-envirabox-thumbs class=\"envirabox-button envirabox-button--thumbs\" title=\"{{THUMBS}}\"></button>',\n            close      : '<button data-envirabox-close class=\"envirabox-button envirabox-button--close\" title=\"{{CLOSE}}\"></button>',\n            download   : '',\n            exif       : '',\n            // This small close button will be appended to your html/inline/ajax content by default,\n            // if \"smallBtn\" option is not set to false\n            smallBtn   : '<button data-envirabox-close class=\"envirabox-close-small\" title=\"{{CLOSE}}\"></button>',\n            arrowLeft  : '',\n            arrowRight : '',\n        },\n\n        // Container is injected into this element\n        parentEl : 'body',\n\n        // Focus handling\n        // ==============\n\n        // Try to focus on the first focusable element after opening\n        autoFocus : true,\n\n        // Put focus back to active element after closing\n        backFocus : true,\n\n        // Do not let user to focus on element outside modal content\n        trapFocus : true,\n\n        // Module specific options\n        // =======================\n\n        fullScreen : {\n            autoStart : false,\n        },\n\n        // Set `touch: false` to disable dragging/swiping\n        touch : {\n            vertical : true,  // Allow to drag content vertically\n            momentum : true   // Continue movement after releasing mouse/touch when panning\n        },\n\n        // Hash value when initializing manually,\n        // set `false` to disable hash change\n        hash : null,\n\n        // Customize or add new media types\n        // Example:\n        /*\n        media : {\n            youtube : {\n                params : {\n                    autoplay : 0\n                }\n            }\n        }\n        */\n        media : {},\n\n        slideShow : {\n            autoStart : false,\n            speed     : 4000\n        },\n\n        thumbs : {\n            autoStart   : false,   // Display thumbnails on opening\n            hideOnClose : true,     // Hide thumbnail grid when closing animation starts\n            parentEl    : '.envirabox-container',\n\t\t\taxis        : 'y',\n\t\t\trowHeight   : 80,\n        },\n\n        wheel        : 'auto',\n\n        // Callbacks\n        //==========\n        onInit       : $.noop,  // When instance has been initialized\n\n        beforeLoad   : $.noop,  // Before the content of a slide is being loaded\n        afterLoad    : $.noop,  // When the content of a slide is done loading\n\n        beforeShow   : $.noop,  // Before open animation starts\n        afterShow    : $.noop,  // When content is done loading and animating\n\n        beforeClose  : $.noop,  // Before the instance attempts to close. Return false to cancel the close.\n        afterClose   : $.noop,  // After instance has been closed\n\n        onActivate   : $.noop,  // When instance is brought to front\n        onDeactivate : $.noop,  // When other instance has been activated\n\n        // Interaction\n        // ===========\n\n        // Use options below to customize taken action when user clicks or double clicks on the envirabox area,\n        // each option can be string or method that returns value.\n        //\n        // Possible values:\n        //   \"close\"           - close instance\n        //   \"next\"            - move to next gallery item\n        //   \"nextOrClose\"     - move to next gallery item or close if gallery has only one item\n        //   \"toggleControls\"  - show/hide controls\n        //   \"zoom\"            - zoom image (if loaded)\n        //   false             - do nothing\n\n        // Clicked on the content\n        clickContent : function( current, event ) {\n            return current.type === 'image' ? 'zoom' : false;\n        },\n\n        // Clicked on the slide\n        clickSlide : 'close',\n\n        // Clicked on the background (backdrop) element\n        clickOutside : 'close',\n\n        // Same as previous two, but for double click\n        dblclickContent : false,\n        dblclickSlide   : false,\n        dblclickOutside : false,\n\n\n        // Custom options when mobile device is detected\n        // =============================================\n\n        mobile : {\n            clickContent : function( current, event ) {\n                return current.type === 'image' ? 'toggleControls' : false;\n            },\n            clickSlide : function( current, event ) {\n                return current.type === 'image' ? 'toggleControls' : 'close';\n            },\n            dblclickContent : function( current, event ) {\n                return current.type === 'image' ? 'zoom' : false;\n            },\n            dblclickSlide : function( current, event ) {\n                return current.type === 'image' ? 'zoom' : false;\n            }\n        },\n\n\n        // Internationalization\n        // ============\n\n        lang : 'en',\n        i18n : {\n            'en' : {\n                CLOSE       : 'Close',\n                NEXT        : 'Next',\n                PREV        : 'Previous',\n                ERROR       : 'The requested content cannot be loaded. <br/> Please try again later.',\n                PLAY_START  : 'Start slideshow',\n                PLAY_STOP   : 'Pause slideshow',\n                FULL_SCREEN : 'Full screen',\n                THUMBS      : 'Thumbnails'\n            },\n            'de' : {\n                CLOSE       : 'Schliessen',\n                NEXT        : 'Weiter',\n                PREV        : 'Zurck',\n                ERROR       : 'Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es spter nochmal.',\n                PLAY_START  : 'Diaschau starten',\n                PLAY_STOP   : 'Diaschau beenden',\n                FULL_SCREEN : 'Vollbild',\n                THUMBS      : 'Vorschaubilder'\n            }\n        }\n\n    };\n\n    // Few useful variables and methods\n    // ================================\n    var $W = $(window),\n        $D = $(document),\n\t\tcalled = 0;\n\n    // Check if an object is a jQuery object and not a native JavaScript object\n    // ========================================================================\n    var isQuery = function ( obj ) {\n        return obj && obj.hasOwnProperty && obj instanceof $;\n    };\n\n    // Handle multiple browsers for \"requestAnimationFrame\" and \"cancelAnimationFrame\"\n    // ===============================================================================\n    var requestAFrame = (function () {\n        return window.requestAnimationFrame ||\n                window.webkitRequestAnimationFrame ||\n                window.mozRequestAnimationFrame ||\n                window.oRequestAnimationFrame ||\n                // if all else fails, use setTimeout\n                function (callback) {\n                    return window.setTimeout(callback, 1000 / 60);\n                };\n    })();\n\n\n    // Detect the supported transition-end event property name\n    // =======================================================\n    var transitionEnd = (function () {\n        var t, el = document.createElement(\"fakeelement\");\n\n        var transitions = {\n            \"transition\"      : \"transitionend\",\n            \"OTransition\"     : \"oTransitionEnd\",\n            \"MozTransition\"   : \"transitionend\",\n            \"WebkitTransition\": \"webkitTransitionEnd\"\n        };\n\n        for (t in transitions) {\n            if (el.style[t] !== undefined){\n                return transitions[t];\n            }\n        }\n        return \"transitionend\";\n    })();\n\n    // Force redraw on an element.\n    // This helps in cases where the browser doesn't redraw an updated element properly.\n    // =================================================================================\n    var forceRedraw = function( $el ) {\n        return ( $el && $el.length && $el[0].offsetHeight );\n    };\n\n    // Exclude array (`buttons`) options from deep merging\n    // ===================================================\n    var mergeOpts = function(opts1, opts2) {\n      var rez = $.extend(true, {}, opts1, opts2);\n      $.each(opts2, function(key, value) {\n        if ($.isArray(value)) {\n          rez[key] = value;\n        }\n      });\n      return rez;\n    };\n\n    // Class definition\n    // ================\n    var EnviraBox = function( content, opts, index ) {\n        var self = this;\n\n        self.opts  = $.extend( true, { index : index }, defaults, opts || {} );\n\n        // Exclude buttons option from deep merging\n        if ( opts && $.isArray( opts.buttons ) ) {\n            self.opts.buttons = opts.buttons;\n        }\n\n        self.id    = self.opts.id || ++called;\n        self.group = [];\n\n        self.currIndex = parseInt( self.opts.index, 10 ) || 0;\n        self.prevIndex = null;\n\n        self.prevPos = null;\n        self.currPos = 0;\n\n        self.firstRun = null;\n\n        // Create group elements from original item collection\n        self.createGroup( content );\n\n        if ( !self.group.length ) {\n            return;\n        }\n\n        // Save last active element and current scroll position\n        self.$lastFocus = $(document.activeElement).blur();\n\n        // Collection of gallery objects\n        self.slides = {};\n\n        self.init( content );\n\n    };\n\n    $.extend(EnviraBox.prototype, {\n\n        // Create DOM structure\n        // ====================\n\n        init : function() {\n            var self = this;\n\n            var testWidth, $container, buttonStr;\n\n            var firstItemOpts = self.group[ self.currIndex ].opts;\n\n            self.scrollTop  = $D.scrollTop();\n            self.scrollLeft = $D.scrollLeft();\n\n\n            // Hide scrollbars\n            // ===============\n\n            if ( !$.envirabox.getInstance() && !$.envirabox.isMobile && $( 'body' ).css('overflow') !== 'hidden' ) {\n                testWidth = $( 'body' ).width();\n\n                $( 'html' ).addClass( 'envirabox-enabled' );\n\n                // Compare body width after applying \"overflow: hidden\"\n                testWidth = $( 'body' ).width() - testWidth;\n\n                // If width has changed - compensate missing scrollbars by adding right margin\n                if ( testWidth > 1 ) {\n                    $( 'head' ).append( '<style id=\"envirabox-style-noscroll\" type=\"text/css\">.compensate-for-scrollbar, .envirabox-enabled body { margin-right: ' + testWidth + 'px; }</style>' );\n                }\n            }\n\n\n            // Build html markup and set references\n            // ====================================\n\n            // Build html code for buttons and insert into main template\n            buttonStr = '';\n\n            $.each( firstItemOpts.buttons, function( index, value ) {\n                buttonStr += ( firstItemOpts.btnTpl[ value ] || '' );\n            });\n\n            // Create markup from base template, it will be initially hidden to\n            // avoid unnecessary work like painting while initializing is not complete\n            $container = $( self.translate( self, firstItemOpts.baseTpl.replace( '\\{\\{BUTTONS\\}\\}', buttonStr ) ) )\n                .addClass( 'envirabox-is-hidden' )\n                .attr('id', 'envirabox-container-' + self.id)\n                .addClass( firstItemOpts.baseClass )\n                .data( 'EnviraBox', self )\n                .prependTo( firstItemOpts.parentEl );\n\n            // Create object holding references to jQuery wrapped nodes\n            self.$refs = {\n                container : $container\n            };\n\n            [ 'bg', 'inner', 'infobar', 'toolbar', 'stage', 'caption' ].forEach(function(item) {\n                self.$refs[ item ] = $container.find( '.envirabox-' + item );\n            });\n\n            // Check for redundant elements\n            if ( !firstItemOpts.arrows || self.group.length < 2 ) {\n                $container.find('.envirabox-navigation').remove();\n            }\n\n            if ( !firstItemOpts.infobar ) {\n                self.$refs.infobar.remove();\n            }\n\n            if ( !firstItemOpts.toolbar ) {\n                self.$refs.toolbar.remove();\n            }\n\n            self.trigger( 'onInit' );\n\n            // Bring to front and enable events\n            self.activate();\n\n            // Build slides, load and reveal content\n            self.jumpTo( self.currIndex );\n        },\n\n        // Simple i18n support - replaces object keys found in template\n        // with corresponding values\n        // ============================================================\n        translate : function( obj, str ) {\n            var arr = obj.opts.i18n[ obj.opts.lang ];\n\n            return str.replace(/\\{\\{(\\w+)\\}\\}/g, function(match, n) {\n                var value = arr[n];\n\n                if ( value === undefined ) {\n                    return match;\n                }\n\n                return value;\n            });\n        },\n\n        // Create array of gallery item objects\n        // Check if each object has valid type and content\n        // ===============================================\n        createGroup : function ( content ) {\n            var self  = this;\n            var items = $.makeArray( content );\n\n            $.each(items, function( i, item ) {\n                var obj  = {},\n                    opts = {},\n                    data = [],\n                    $item,\n                    type,\n                    src,\n                    found,\n                    srcParts;\n\n                // Step 1 - Make sure we have an object\n                // ====================================\n\n                if ( $.isPlainObject( item ) ) {\n\n                    // We probably have manual usage here, something like\n                    // $.envirabox.open( [ { src : \"image.jpg\", type : \"image\" } ] )\n\n                    obj  = item;\n                    opts = item.opts || item;\n\n                } else if ( $.type( item ) === 'object' && $( item ).length ) {\n\n                    // Here we propbably have jQuery collection returned by some selector\n\n                    $item = $( item );\n                    data  = $item.data();\n\n                    opts = 'options' in data ? data.options : {};\n                    opts = $.type( opts ) === 'object' ? opts : {};\n\n                    obj.src  = 'src' in data ? data.src : ( opts.src || $item.attr( 'href' ) );\n\n\t\t\t\t\t//Make sure our Obj has all of our keys\n\t\t\t\t\tfor (var key in data){\n\n\t\t\t\t\t\tif (data.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tobj[key] = data[key];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n                    [ 'width', 'height', 'thumb', 'type', 'filter' ].forEach(function(item) {\n                        if ( item in data ) {\n                            opts[ item ] = data[ item ];\n                        }\n                    });\n\n                    if ( 'srcset' in data ) {\n                        opts.image = { srcset : data.srcset };\n                    }\n\n                    opts.$orig = $item;\n\n                    if ( !obj.type && !obj.src ) {\n                        obj.type = 'inline';\n                        obj.src  = item;\n                    }\n\n                } else {\n\n                    // Assume we have a simple html code, for example:\n                    // $.envirabox.open( '<div><h1>Hi!</h1></div>' );\n\n                    obj = {\n                        type : 'html',\n                        src  : item + ''\n                    };\n\n                }\n\n                // Each gallery object has full collection of options\n                obj.opts = $.extend( true, {}, self.opts, opts );\n\n                if ( $.envirabox.isMobile ) {\n                    obj.opts = $.extend( true, {}, obj.opts, obj.opts.mobile );\n                }\n\n\n                // Step 2 - Make sure we have content type, if not - try to guess\n                // ==============================================================\n\n                type = obj.type || obj.opts.type;\n                src  = obj.src || '';\n\n                // alert(type);\n                // alert(src);\n\n                if ( !type && src ) {\n                    if ( src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i) ) {\n                        type = 'image';\n                        // alert('image!!!');\n\n                    } else if ( src.match(/\\.(pdf)((\\?|#).*)?$/i) ) {\n                        type = 'pdf';\n\t\t\t\t\t} else if ( found = src.match(/\\.(mp4|mov|ogv)((\\?|#).*)?$/i) ) {\n                        type = 'video';\n\n                        if ( !obj.opts.videoFormat ) {\n                            obj.opts.videoFormat = 'video/' + ( found[1] === 'ogv' ? 'ogg' : found[1] );\n                        }\n\n                    } else if ( src.charAt(0) === '#' ) {\n                        type = 'inline';\n                    }\n                }\n\n                obj.type = type;\n\n\n                // Step 3 - Some adjustments\n                // =========================\n                obj.index = self.group.length;\n\n                // Check if $orig and $thumb objects exist\n                if ( obj.opts.$orig && !obj.opts.$orig.length ) {\n                    delete obj.opts.$orig;\n                }\n\n                if ( !obj.opts.$thumb && obj.opts.$orig ) {\n                    obj.opts.$thumb = obj.opts.$orig.find( 'img:first' );\n                }\n\n                if ( obj.opts.$thumb && !obj.opts.$thumb.length ) {\n                    delete obj.opts.$thumb;\n                }\n\n                // Caption is a \"special\" option, it can be passed as a method\n                if ( $.type( obj.opts.caption ) === 'function' ) {\n                    obj.opts.caption = obj.opts.caption.apply( item, [ self, obj ] );\n                } else if ( 'caption' in data ) {\n                    obj.opts.caption = data.caption;\n                } else if ( (typeof obj.opts)==='object' && (typeof obj.opts.caption)==='string' && obj.opts.caption !== null && Object.keys(obj.opts).length > 0) {\n                    // used for Envira Links, extra checks for IE11\n                    obj.opts.caption = obj.opts.caption;\n                } else {\n                    obj.opts.caption = '';\n                }\n\n                // Make sure we have caption as a string\n                obj.opts.caption = obj.opts.caption === undefined ? '' : obj.opts.caption + '';\n\n                // Make sure caption isn't null\n                if ( obj.opts.caption == null ) {\n                    obj.opts.caption = '';\n                }\n\n                // Check if url contains \"filter\" used to filter the content\n                // Example: \"ajax.html #something\"\n                if ( type === 'ajax' ) {\n                    srcParts = src.split(/\\s+/, 2);\n\n                    if ( srcParts.length > 1 ) {\n                        obj.src = srcParts.shift();\n\n                        obj.opts.filter = srcParts.shift();\n                    }\n                }\n\n                if ( obj.opts.smallBtn !== undefined && obj.opts.smallBtn == true ) {\n\n                    obj.opts.toolbar  = false;\n                    obj.opts.smallBtn = true;\n\n                }\n\n                // If the type is \"pdf\", then simply load file into iframe\n                if ( type === 'pdf' ) {\n                    obj.type = 'iframe';\n\n                    obj.opts.iframe.preload = false;\n                }\n\n                // Hide all buttons and disable interactivity for modal items\n                if ( obj.opts.modal ) {\n\n                    obj.opts = $.extend(true, obj.opts, {\n                        // Remove buttons\n                        infobar : 0,\n                        toolbar : 0,\n\n                        smallBtn : 0,\n\n                        // Disable keyboard navigation\n                        keyboard : 0,\n\n                        // Disable some modules\n                        slideShow  : 0,\n                        fullScreen : 0,\n                        thumbs     : 0,\n                        touch      : 0,\n\n                        // Disable click event handlers\n                        clickContent    : false,\n                        clickSlide      : false,\n                        clickOutside    : false,\n                        dblclickContent : false,\n                        dblclickSlide   : false,\n                        dblclickOutside : false\n                    });\n\n                }\n\n                // Step 4 - Add processed object to group\n                // ======================================\n\n                self.group.push( obj );\n\n            });\n\n        },\n\n        // Attach an event handler functions for:\n        //   - navigation buttons\n        //   - browser scrolling, resizing;\n        //   - focusing\n        //   - keyboard\n        //   - detect idle\n        // ======================================\n        addEvents : function() {\n            var self = this;\n\n            self.removeEvents();\n\n            // Make navigation elements clickable\n            self.$refs.container.on('click.eb-close', '[data-envirabox-close]', function(e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                self.close( e );\n\n            }).on( 'click.eb-prev touchend.eb-prev', '[data-envirabox-prev]', function(e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                self.previous();\n\n            }).on( 'click.eb-next touchend.eb-next', '[data-envirabox-next]', function(e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                self.next();\n\n            });\n\n\n            // Handle page scrolling and browser resizing\n            $W.on('orientationchange.eb resize.eb', function(e) {\n\n                if ( e && e.originalEvent && e.originalEvent.type === \"resize\" ) {\n\n                    requestAFrame(function() {\n                        self.update();\n                    });\n\n                } else {\n\n                    self.$refs.stage.hide();\n\n                    setTimeout(function() {\n                        self.$refs.stage.show();\n\n                        self.update();\n                    }, 500);\n\n                }\n\n            });\n\n            // Trap keyboard focus inside of the modal, so the user does not accidentally tab outside of the modal\n            // (a.k.a. \"escaping the modal\")\n            $D.on('focusin.eb', function(e) {\n                var instance = $.envirabox ? $.envirabox.getInstance() : null;\n\n                if ( instance.isClosing || !instance.current || !instance.current.opts.trapFocus || $( e.target ).hasClass( 'envirabox-container' ) || $( e.target ).is( document ) ) {\n                    return;\n                }\n\n                if ( instance && $( e.target ).css( 'position' ) !== 'fixed' && !instance.$refs.container.has( e.target ).length ) {\n                    e.stopPropagation();\n\n                    instance.focus();\n\n                    // Sometimes page gets scrolled, set it back\n                    $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\n                }\n            });\n\n\n            // Enable keyboard navigation\n            $D.on('keydown.eb', function (e) {\n                var current = self.current,\n                    keycode = e.keyCode || e.which;\n\n                if ( !current || !current.opts.keyboard ) {\n                    return;\n                }\n\n                if ( $(e.target).is('input') || $(e.target).is('textarea') ) {\n                    return;\n                }\n\n                // Backspace and Esc keys\n                if ( keycode === 8 || keycode === 27 ) {\n                    e.preventDefault();\n\n                    self.close( e );\n\n                    return;\n                }\n\n                // Left arrow and Up arrow\n                if ( keycode === 37 || keycode === 38 ) {\n                    e.preventDefault();\n\n                    self.previous();\n\n                    return;\n                }\n\n                // Righ arrow and Down arrow\n                if ( keycode === 39 || keycode === 40 ) {\n                    e.preventDefault();\n\n                    self.next();\n\n                    return;\n                }\n\n                self.trigger('afterKeydown', e, keycode);\n            });\n\n\n            // Hide controls after some inactivity period\n            if ( self.group[ self.currIndex ].opts.idleTime ) {\n                self.idleSecondsCounter = 0;\n\n                $D.on('mousemove.eb-idle mouseenter.eb-idle mouseleave.eb-idle mousedown.eb-idle touchstart.eb-idle touchmove.eb-idle scroll.eb-idle keydown.eb-idle', function() {\n                    self.idleSecondsCounter = 0;\n\n                    if ( self.isIdle ) {\n                        self.showControls();\n                    }\n\n                    self.isIdle = false;\n                });\n\n                self.idleInterval = window.setInterval(function() {\n\n                    self.idleSecondsCounter++;\n\n                    if ( self.idleSecondsCounter >= self.group[ self.currIndex ].opts.idleTime ) {\n                        self.isIdle = true;\n                        self.idleSecondsCounter = 0;\n\n                        self.hideControls();\n                    }\n\n                }, 1000);\n            }\n\n        },\n\n        // Remove events added by the core\n        // ===============================\n        removeEvents : function () {\n            var self = this;\n\n            $W.off( 'orientationchange.eb resize.eb' );\n            $D.off( 'focusin.eb keydown.eb .eb-idle' );\n\n            this.$refs.container.off( '.eb-close .eb-prev .eb-next' );\n\n            if ( self.idleInterval ) {\n                window.clearInterval( self.idleInterval );\n\n                self.idleInterval = null;\n            }\n        },\n\n        // Change to previous gallery item\n        // ===============================\n        previous : function( duration ) {\n            return this.jumpTo( this.currPos - 1, duration );\n        },\n\n        // Change to next gallery item\n        // ===========================\n        next : function( duration ) {\n            return this.jumpTo( this.currPos + 1, duration );\n        },\n\n        // Switch to selected gallery item\n        // ===============================\n        jumpTo : function ( pos, duration, slide ) {\n            var self = this,\n                firstRun,\n                loop,\n                current,\n                previous,\n                canvasWidth,\n                currentPos,\n                transitionProps;\n\n            var groupLen = self.group.length;\n\n            if ( self.isSliding || self.isClosing || ( self.isAnimating && self.firstRun ) ) {\n                return;\n            }\n\n            pos  = parseInt( pos, 10 );\n            loop = self.current ? self.current.opts.loop : self.opts.loop;\n\n            if ( !loop && ( pos < 0 || pos >= groupLen ) ) {\n                return false;\n            }\n\n            firstRun = self.firstRun = ( self.firstRun === null );\n\n            if ( groupLen < 2 && !firstRun && !!self.isSliding ) {\n                return;\n            }\n\n            previous = self.current;\n\n            self.prevIndex = self.currIndex;\n            self.prevPos   = self.currPos;\n\n            // Create slides\n            current = self.createSlide( pos );\n\n            if ( groupLen > 1 ) {\n                if ( loop || current.index > 0 ) {\n                    self.createSlide( pos - 1 );\n                }\n\n                if ( loop || current.index < groupLen - 1 ) {\n                    self.createSlide( pos + 1 );\n                }\n            }\n\n            self.current   = current;\n            self.currIndex = current.index;\n            self.currPos   = current.pos;\n\n            self.trigger( 'beforeShow', firstRun );\n\n            self.updateControls();\n\n            currentPos = $.envirabox.getTranslate( current.$slide );\n\n            current.isMoved        = ( currentPos.left !== 0 || currentPos.top !== 0 ) && !current.$slide.hasClass( 'envirabox-animated' );\n            current.forcedDuration = undefined;\n\n            if ( $.isNumeric( duration ) ) {\n                current.forcedDuration = duration;\n            } else {\n                duration = current.opts[ firstRun ? 'animationDuration' : 'transitionDuration' ];\n            }\n\n            duration = parseInt( duration, 10 );\n\n            // Fresh start - reveal container, current slide and start loading content\n            if ( firstRun ) {\n\n                if ( current.opts.animationEffect && duration ) {\n                    self.$refs.container.css( 'transition-duration', duration + 'ms' );\n                }\n\n                self.$refs.container.removeClass( 'envirabox-is-hidden' );\n\n                forceRedraw( self.$refs.container );\n\n                self.$refs.container.addClass( 'envirabox-is-open' );\n\n                // Make first slide visible (to display loading icon, if needed)\n                current.$slide.addClass( 'envirabox-slide--current' );\n\n                self.loadSlide( current );\n\n                self.preload();\n\n                return;\n            }\n\n            // Clean up\n            $.each(self.slides, function( index, slide ) {\n                $.envirabox.stop( slide.$slide );\n            });\n\n            // Make current that slide is visible even if content is still loading\n            current.$slide.removeClass( 'envirabox-slide--next envirabox-slide--previous' ).addClass( 'envirabox-slide--current' );\n\n            // If slides have been dragged, animate them to correct position\n            if ( current.isMoved ) {\n                canvasWidth = Math.round( current.$slide.width() );\n\n                $.each(self.slides, function( index, slide ) {\n                    var pos = slide.pos - current.pos;\n\n                    $.envirabox.animate( slide.$slide, {\n                        top  : 0,\n                        left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter )\n                    }, duration, function() {\n\n                        slide.$slide.removeAttr('style').removeClass( 'envirabox-slide--next envirabox-slide--previous' );\n\n                        if ( slide.pos === self.currPos ) {\n                            current.isMoved = false;\n\n                            self.complete();\n                        }\n                    });\n                });\n\n            } else {\n                self.$refs.stage.children().removeAttr( 'style' );\n            }\n\n            // Start transition that reveals current content\n            // or wait when it will be loaded\n\n            if ( current.isLoaded ) {\n                self.revealContent( current );\n\n            } else {\n                self.loadSlide( current );\n            }\n\n            self.preload();\n\n            if ( previous.pos === current.pos ) {\n                return;\n            }\n\n            // Handle previous slide\n            // =====================\n\n            transitionProps = 'envirabox-slide--' + ( previous.pos > current.pos ? 'next' : 'previous' );\n\n            previous.$slide.removeClass( 'envirabox-slide--complete envirabox-slide--current envirabox-slide--next envirabox-slide--previous' );\n\n            previous.isComplete = false;\n\n            if ( !duration || ( !current.isMoved && !current.opts.transitionEffect ) ) {\n                return;\n            }\n\n            if ( current.isMoved ) {\n                previous.$slide.addClass( transitionProps );\n\n            } else {\n\n                transitionProps = 'envirabox-animated ' + transitionProps + ' envirabox-fx-' + current.opts.transitionEffect;\n\n                $.envirabox.animate( previous.$slide, transitionProps, duration, function() {\n                    previous.$slide.removeClass( transitionProps ).removeAttr( 'style' );\n                });\n\n            }\n\n        },\n\n        // Create new \"slide\" element\n        // These are gallery items  that are actually added to DOM\n        // =======================================================\n        createSlide : function( pos ) {\n            var self = this;\n            var $slide;\n            var index;\n\n            index = pos % self.group.length;\n            index = index < 0 ? self.group.length + index : index;\n\n            if ( !self.slides[ pos ] && self.group[ index ] ) {\n                $slide = $('<div class=\"envirabox-slide\"></div>').appendTo( self.$refs.stage );\n\n                self.slides[ pos ] = $.extend( true, {}, self.group[ index ], {\n                    pos      : pos,\n                    $slide   : $slide,\n                    isLoaded : false,\n                });\n\n                self.updateSlide( self.slides[ pos ] );\n            }\n\n            return self.slides[ pos ];\n        },\n\n        // Scale image to the actual size of the image\n        // ===========================================\n        scaleToActual : function( x, y, duration ) {\n            var self = this;\n\n            var current = self.current;\n            var $what   = current.$content;\n\n            var imgPos, posX, posY, scaleX, scaleY;\n\n            var canvasWidth  = parseInt( current.$slide.width(), 10 );\n            var canvasHeight = parseInt( current.$slide.height(), 10 );\n\n            var newImgWidth  = current.width;\n            var newImgHeight = current.height;\n\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating) {\n                return;\n            }\n\n            $.envirabox.stop( $what );\n\n            self.isAnimating = true;\n\n            x = x === undefined ? canvasWidth  * 0.5  : x;\n            y = y === undefined ? canvasHeight * 0.5  : y;\n\n            imgPos = $.envirabox.getTranslate( $what );\n\n            scaleX  = newImgWidth  / imgPos.width;\n            scaleY  = newImgHeight / imgPos.height;\n\n            // Get center position for original image\n            posX = ( canvasWidth * 0.5  - newImgWidth * 0.5 );\n            posY = ( canvasHeight * 0.5 - newImgHeight * 0.5 );\n\n            // Make sure image does not move away from edges\n            if ( newImgWidth > canvasWidth ) {\n                posX = imgPos.left * scaleX - ( ( x * scaleX ) - x );\n\n                if ( posX > 0 ) {\n                    posX = 0;\n                }\n\n                if ( posX <  canvasWidth - newImgWidth ) {\n                    posX = canvasWidth - newImgWidth;\n                }\n            }\n\n            if ( newImgHeight > canvasHeight) {\n                posY = imgPos.top  * scaleY - ( ( y * scaleY ) - y );\n\n                if ( posY > 0 ) {\n                    posY = 0;\n                }\n\n                if ( posY <  canvasHeight - newImgHeight ) {\n                    posY = canvasHeight - newImgHeight;\n                }\n            }\n\n            self.updateCursor( newImgWidth, newImgHeight );\n\n            $.envirabox.animate( $what, {\n                top    : posY,\n                left   : posX,\n                scaleX : scaleX,\n                scaleY : scaleY\n            }, duration || 330, function() {\n                self.isAnimating = false;\n            });\n\n            // Stop slideshow\n            if ( self.SlideShow && self.SlideShow.isActive ) {\n                self.SlideShow.stop();\n            }\n        },\n\n        // Scale image to fit inside parent element\n        // ========================================\n        scaleToFit : function( duration ) {\n            var self = this;\n\n            var current = self.current;\n            var $what   = current.$content;\n            var end;\n\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\n                return;\n            }\n\n            $.envirabox.stop( $what );\n\n            self.isAnimating = true;\n\n            end = self.getFitPos( current );\n\n            self.updateCursor( end.width, end.height );\n\n            $.envirabox.animate( $what, {\n                top    : end.top,\n                left   : end.left,\n                scaleX : end.width  / $what.width(),\n                scaleY : end.height / $what.height()\n            }, duration || 330, function() {\n                self.isAnimating = false;\n            });\n\n        },\n\n        // Calculate image size to fit inside viewport\n        // ===========================================\n        getFitPos : function( slide ) {\n            var self  = this;\n            var $what = slide.$content;\n\n            var imgWidth  = slide.width;\n            var imgHeight = slide.height;\n\n            var margin = slide.opts.margin;\n\n            var canvasWidth, canvasHeight, minRatio, width, height;\n\n            if ( !$what || !$what.length || ( !imgWidth && !imgHeight) ) {\n                return false;\n            }\n\n            // Convert \"margin to CSS style: [ top, right, bottom, left ]\n            if ( $.type( margin ) === \"number\" ) {\n                margin = [ margin, margin ];\n            }\n\n            if ( margin.length == 2 ) {\n                margin = [ margin[0], margin[1], margin[0], margin[1] ];\n            }\n\n            if ( $W.width() < 800 ) {\n                margin = [ 0, 0, 0, 0 ];\n            }\n\n            // We can not use $slide width here, because it can have different diemensions while in transiton\n            canvasWidth  = parseInt( self.$refs.stage.width(), 10 )  - ( margin[ 1 ] + margin[ 3 ] );\n            canvasHeight = parseInt( self.$refs.stage.height(), 10 ) - ( margin[ 0 ] + margin[ 2 ] );\n\n            minRatio = Math.min(1, canvasWidth / imgWidth, canvasHeight / imgHeight );\n\n            width  = Math.floor( minRatio * imgWidth );\n            height = Math.floor( minRatio * imgHeight );\n\n            // Use floor rounding to make sure it really fits\n            return {\n                top    : Math.floor( ( canvasHeight - height ) * 0.5 ) + margin[ 0 ],\n                left   : Math.floor( ( canvasWidth  - width )  * 0.5 ) + margin[ 3 ],\n                width  : width,\n                height : height\n            };\n\n        },\n\n        // Update position and content of all slides\n        // =========================================\n        update : function() {\n\n            var self = this;\n\n            $.each( self.slides, function( key, slide ) {\n                self.updateSlide( slide );\n            });\n\n        },\n\n        // Update slide position and scale content to fit\n        // ==============================================\n        updateSlide : function( slide ) {\n\n            var self  = this;\n            var $what = slide.$content;\n\n            if ( $what && ( slide.width || slide.height ) ) {\n                $.envirabox.stop( $what );\n\n                $.envirabox.setTranslate( $what, self.getFitPos( slide ) );\n\n                if ( slide.pos === self.currPos ) {\n                    self.updateCursor();\n                }\n            }\n\n            slide.$slide.trigger( 'refresh' );\n\n            self.trigger( 'onUpdate', slide );\n\n        },\n\n        // Update cursor style depending if content can be zoomed\n        // ======================================================\n        updateCursor : function( nextWidth, nextHeight ) {\n            var self = this;\n            var isScaledDown;\n\n            var $container = self.$refs.container.removeClass('envirabox-is-zoomable envirabox-can-zoomIn envirabox-can-drag envirabox-can-zoomOut');\n\n            if ( !self.current || self.isClosing ) {\n                return;\n            }\n\n            if ( self.isZoomable() ) {\n\n                $container.addClass( 'envirabox-is-zoomable' );\n\n                if ( nextWidth !== undefined && nextHeight !== undefined ) {\n                    isScaledDown = nextWidth < self.current.width && nextHeight < self.current.height;\n\n                } else {\n                    isScaledDown = self.isScaledDown();\n                }\n\n                if ( isScaledDown ) {\n\n                    // If image is scaled down, then, obviously, it can be zoomed to full size\n                    $container.addClass('envirabox-can-zoomIn');\n\n                } else {\n\n                    if ( self.current.opts.touch ) {\n\n                        // If image size ir largen than available available and touch module is not disable,\n                        // then user can do panning\n                        $container.addClass('envirabox-can-drag');\n\n                    } else {\n                        $container.addClass('envirabox-can-zoomOut');\n                    }\n\n                }\n\n            } else if ( self.current.opts.touch ) {\n                $container.addClass('envirabox-can-drag');\n            }\n\n        },\n\n        // Check if current slide is zoomable\n        // ==================================\n        isZoomable : function() {\n            var self = this;\n\n            var current = self.current;\n            var fitPos;\n\n            if ( !current || self.isClosing ) {\n                return;\n            }\n\n            // Assume that slide is zoomable if\n            //   - image is loaded successfuly\n            //   - click action is \"zoom\"\n            //   - actual size of the image is smaller than available area\n            if ( current.type === 'image' && current.isLoaded && !current.hasError &&\n                ( current.opts.clickContent === 'zoom' || ( $.isFunction( current.opts.clickContent ) && current.opts.clickContent( current ) ===  \"zoom\" ) )\n            ) {\n\n                fitPos = self.getFitPos( current );\n\n                if ( current.width > fitPos.width || current.height > fitPos.height ) {\n                    return true;\n                }\n\n            }\n\n            return false;\n\n        },\n\n        // Check if current image dimensions are smaller than actual\n        // =========================================================\n        isScaledDown : function() {\n\n            var self = this;\n\n            var current = self.current;\n            var $what   = current.$content;\n\n            var rez = false;\n\n            if ( $what ) {\n                rez = $.envirabox.getTranslate( $what );\n                rez = rez.width < current.width || rez.height < current.height;\n            }\n\n            return rez;\n\n        },\n\n        // Check if image dimensions exceed parent element\n        // ===============================================\n        canPan : function() {\n\n            var self = this;\n\n            var current = self.current;\n            var $what   = current.$content;\n\n            var rez = false;\n\n            if ( $what ) {\n                rez = self.getFitPos( current );\n                rez = Math.abs( $what.width() - rez.width ) > 1  || Math.abs( $what.height() - rez.height ) > 1;\n\n            }\n\n            return rez;\n\n        },\n\n        // Load content into the slide\n        // ===========================\n        loadSlide : function( slide ) {\n            var self = this, type, $slide;\n            var ajaxLoad;\n\n            if ( slide.isLoading ) {\n                return;\n            }\n\n            if ( slide.isLoaded ) {\n                return;\n            }\n\n            slide.isLoading = true;\n\n            self.trigger( 'beforeLoad', slide );\n\n            type   = slide.type;\n            $slide = slide.$slide;\n\n            $slide\n                .off( 'refresh' )\n                .trigger( 'onReset' )\n                .addClass( 'envirabox-slide--' + ( type || 'unknown' ) )\n                .addClass( slide.opts.slideClass );\n\n            // Create content depending on the type\n\n            switch ( type ) {\n\n                case 'image':\n\n                    self.setImage( slide );\n\n                break;\n                case 'video' :\n\n                    self.setVideo( slide );\n\n                break;\n                case 'iframe':\n\n                    self.setIframe( slide );\n\n                break;\n                case 'genericDiv':\n\n                    self.setGenericDiv( slide );\n\n                break;\n                case 'html':\n\n                    self.setContent( slide, slide.src || slide.content );\n\n                break;\n\n                case 'inline':\n\n                    if ( $( slide.src ).length ) {\n                        self.setContent( slide, $( slide.src ) );\n\n                    } else {\n                        self.setError( slide );\n                    }\n\n                break;\n\n                case 'ajax':\n\n                    self.showLoading( slide );\n\n                    ajaxLoad = $.ajax( $.extend( {}, slide.opts.ajax.settings, {\n                        url : slide.src,\n                        success : function ( data, textStatus ) {\n\n                            if ( textStatus === 'success' ) {\n                                self.setContent( slide, data );\n                            }\n\n                        },\n                        error : function ( jqXHR, textStatus ) {\n\n                            if ( jqXHR && textStatus !== 'abort' ) {\n                                self.setError( slide );\n                            }\n\n                        }\n                    }));\n\n                    $slide.one( 'onReset', function () {\n                        ajaxLoad.abort();\n                    });\n\n                break;\n\n                default:\n\n                    self.setError( slide );\n\n                break;\n\n            }\n\n            return true;\n\n        },\n\n        setVideo: function( slide ) {\n\n            var self = this;\n\n            if ( self.isClosing ) {\n                return;\n            }\n\n            self.hideLoading( slide );\n\n            slide.$slide.empty();\n\n            let style_width = false,\n                style_height = false,\n                videoWidthHeight = '',\n                videoControls = 'controls', /* controls by default */\n                videoControlsList = '',\n                videoClasses = '';\n\n                console.log('slide time');\n                console.log(slide);\n\n            // Setup specific CSS classes that might help with customizing video, especially for self hosted\n            if ( slide.opts.videoPlayPause !== false ) {\n                videoClasses = videoClasses + 'videos_play_pause ';\n            }\n            if ( slide.opts.videoProgressBar !== false ) {\n                videoClasses = videoClasses + 'videos_progress ';\n            }\n            if ( slide.opts.videoPlaybackTime !== false ) {\n                videoClasses = videoClasses + 'videos_playback_time ';\n            }\n            if ( slide.opts.videoVideoLength !== false ) {\n                videoClasses = videoClasses + 'videos_video_length ';\n            }\n            if ( slide.opts.videoVolumeControls !== false ) {\n                videoClasses = videoClasses + 'videos_volume_controls ';\n            }\n            if ( slide.opts.videoControlBar !== false ) {\n                videoClasses = videoClasses + 'videos_controls ';\n            } else {\n                videoControls = '';\n            }\n            if ( slide.opts.videoFullscreen !== false ) {\n                videoClasses = videoClasses + 'videos_fullscreen ';\n            }\n            if ( slide.opts.videoDownload !== false ) {\n                videoClasses = videoClasses + 'videos_download ';\n            } else {\n                videoControlsList = videoControlsList + 'nodownload ';\n            }\n\n            if ( slide.videoWidth > 0 ) {\n                style_width = 'max-width:' + slide.videoWidth + 'px;';\n            }\n\n            if ( slide.videoHeight > 0 ) {\n                style_height = 'max-height:' + slide.videoHeight + 'px;';\n            }\n\n            if ( style_width || style_height ) {\n                videoWidthHeight = 'style=\"' + style_width + style_height + '\"';\n            }\n\n\t\t\tif ( slide.opts.arrows !== 0 && slide.opts.arrow_position == 'inside' ){\n\t            // This will be wrapper containing the video\n\t            slide.$content = $('<div class=\"envirabox-content video ' + videoClasses + '\" ' + videoWidthHeight + '\"><div class=\"envirabox-navigation-inside\"><a data-envirabox-prev title=\"prev\" class=\"envirabox-arrow envirabox-arrow--left envirabox-nav envirabox-prev\" href=\"#\"><span></span></a><a data-envirabox-next title=\"next\" class=\"envirabox-arrow envirabox-arrow--right envirabox-nav envirabox-next\" href=\"#\"><span></span></a></div>')\n\t                .appendTo( slide.$slide );\n\t\t\t} else {\n\n            // This will be wrapper containing the video\n            slide.$content = $('<div class=\"envirabox-content ' + videoClasses + '\" ' + videoWidthHeight + '></div>')\n                .appendTo( slide.$slide );\n\t\t\t}\n            if ( slide.opts.smallBtn === true ) {\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\n            }\n\n            if ( slide.opts.insideCap === true ){\n                let cap = slide.caption !== undefined ? slide.caption : '',\n                    pos = slide.opts.capPosition ? slide.opts.capPosition : '';\n\n\t            slide.$content.prepend('<div class=\"envirabox-caption-wrap '+slide.opts.capPosition+'\"><div class=\"envirabox-caption\">'+ cap +'</div></div>');\n            }\n\n            if ( videoControls != '' ) {\n                videoControls = videoControls + ' controlsList=\"' + videoControlsList + '\"';\n            }\n\n            let video = $( '<video class=\"envirabox-video-player\" ' + videoControls + '>' +\n            '<source src=\"' + slide.src + '\" type=\"video/mp4\">' +\n              'Your broswser doesn\\'t support HTML5 video' +\n          '</video>').appendTo( slide.$content );\n\n            this.afterLoad( slide );\n\n        },\n\n        // Use thumbnail image, if possible\n        // ================================\n        setImage : function( slide ) {\n            var self   = this;\n            var srcset = slide.opts.image.srcset;\n\n            var found, temp, pxRatio, windowWidth;\n\n            // If we have \"srcset\", then we need to find matching \"src\" value.\n            // This is necessary, because when you set an src attribute, the browser will preload the image\n            // before any javascript or even CSS is applied.\n            if ( srcset ) {\n                pxRatio     = window.devicePixelRatio || 1;\n                windowWidth = window.innerWidth  * pxRatio;\n\n                temp = srcset.split(',').map(function ( el ) {\n                    var ret = {};\n\n                    el.trim().split(/\\s+/).forEach(function ( el, i ) {\n                        var value = parseInt( el.substring(0, el.length - 1), 10 );\n\n                        if ( i === 0 ) {\n                            return ( ret.url = el );\n                        }\n\n                        if ( value ) {\n                            ret.value   = value;\n                            ret.postfix = el[ el.length - 1 ];\n                        }\n\n                    });\n\n                    return ret;\n                });\n\n                // Sort by value\n                temp.sort(function (a, b) {\n                  return a.value - b.value;\n                });\n\n                // Ok, now we have an array of all srcset values\n                for ( var j = 0; j < temp.length; j++ ) {\n                    var el = temp[ j ];\n\n                    if ( ( el.postfix === 'w' && el.value >= windowWidth ) || ( el.postfix === 'x' && el.value >= pxRatio ) ) {\n                        found = el;\n                        break;\n                    }\n                }\n\n                // If not found, take the last one\n                if ( !found && temp.length ) {\n                    found = temp[ temp.length - 1 ];\n                }\n\n                if ( found ) {\n                    slide.src = found.url;\n\n                    // If we have default width/height values, we can calculate height for matching source\n                    if ( slide.width && slide.height && found.postfix == 'w' ) {\n                        slide.height = ( slide.width / slide.height ) * found.value;\n                        slide.width  = found.value;\n                    }\n                }\n            }\n\n\t\t\tif ( slide.opts.arrows !== 0 && slide.opts.arrow_position == 'inside' ){\n\t            // This will be wrapper containing both ghost and actual image\n\t            slide.$content = $('<div class=\"envirabox-image-wrap\"><div class=\"envirabox-navigation-inside\"><a data-envirabox-prev title=\"prev\" class=\"envirabox-arrow envirabox-arrow--left envirabox-nav envirabox-prev\" href=\"#\"><span></span></a><a data-envirabox-next title=\"next\" class=\"envirabox-arrow envirabox-arrow--right envirabox-nav envirabox-next\" href=\"#\"><span></span></a></div>')\n\t                .addClass( 'envirabox-is-hidden' )\n\t                .appendTo( slide.$slide );\n\t\t\t} else {\n\n            // This will be wrapper containing both ghost and actual image\n            slide.$content = $('<div class=\"envirabox-image-wrap\"></div>')\n                .addClass( 'envirabox-is-hidden' )\n                .appendTo( slide.$slide );\n\t\t\t}\n\n            if ( slide.opts.smallBtn === true ) {\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\n            }\n            if ( slide.opts.insideCap === true ){\n                let cap = slide.caption !== undefined ? slide.caption : '',\n                    pos = slide.opts.capPosition ? slide.opts.capPosition : '';\n\n\t            slide.$content.prepend('<div class=\"envirabox-caption-wrap '+slide.opts.capPosition+'\"><div class=\"envirabox-caption\">'+ cap +'</div></div>');\n            }\n            // If we have a thumbnail, we can display it while actual image is loading\n            // Users will not stare at black screen and actual image will appear gradually\n            if ( slide.opts.preload !== false && slide.opts.width && slide.opts.height && ( slide.opts.thumb || slide.opts.$thumb ) ) {\n\n                slide.width  = slide.opts.width;\n                slide.height = slide.opts.height;\n\n                slide.$ghost = $('<img />')\n                    .one('error', function() {\n\n                        $(this).remove();\n\n                        slide.$ghost = null;\n\n                        self.setBigImage( slide );\n\n                    })\n                    .one('load', function() {\n\n                        self.afterLoad( slide );\n\n                        self.setBigImage( slide );\n\n                    })\n                    .addClass( 'envirabox-image' )\n                    .appendTo( slide.$content )\n                    .attr( 'src', slide.opts.thumb || slide.opts.$thumb.attr( 'src' ) );\n\n            } else {\n\n                self.setBigImage( slide );\n\n            }\n\n        },\n\n        // Create full-size image\n        // ======================\n        setBigImage : function ( slide ) {\n            var self = this;\n            var $img = $('<img />');\n\n            slide.$image = $img\n                .one('error', function() {\n\n                    self.setError( slide );\n\n                })\n                .one('load', function() {\n\n                    // Clear timeout that checks if loading icon needs to be displayed\n                    clearTimeout( slide.timouts );\n\n                    slide.timouts = null;\n\n                    if ( self.isClosing ) {\n                        return;\n                    }\n\n                    slide.width  = this.naturalWidth;\n                    slide.height = this.naturalHeight;\n\n                    if ( slide.opts.image.srcset ) {\n                        $img.attr( 'sizes', '100vw' ).attr( 'srcset', slide.opts.image.srcset );\n                    }\n\n                    self.hideLoading( slide );\n\n                    if ( slide.$ghost ) {\n\n                        slide.timouts = setTimeout(function() {\n                            slide.timouts = null;\n\n                            slide.$ghost.hide();\n\n                        }, Math.min( 300, Math.max( 1000, slide.height / 1600 ) ) );\n\n                    } else {\n                        self.afterLoad( slide );\n                    }\n\n                })\n                .addClass( 'envirabox-image' )\n                .attr('src', slide.src)\n                .appendTo( slide.$content );\n\n            if ( ( $img[0].complete || $img[0].readyState == \"complete\" ) && $img[0].naturalWidth && $img[0].naturalHeight ) {\n                  $img.trigger( 'load' );\n\n            } else if( $img[0].error ) {\n                 $img.trigger( 'error' );\n\n            } else {\n\n                slide.timouts = setTimeout(function() {\n                    if ( !$img[0].complete && !slide.hasError ) {\n                        self.showLoading( slide );\n                    }\n\n                }, 100);\n\n            }\n\n        },\n\n        // Create iframe wrapper, iframe and bindings\n        // ==========================================\n        setIframe : function( slide ) {\n            var self    = this,\n                opts    = slide.opts.iframe,\n                $slide  = slide.$slide,\n                $iframe,\n                videoWidthHeight = '',\n                /* videoWidthHeight = 'style=\"width: 1351px; height: 759.938px;\"', */\n                css_width = false,\n                css_height = false;\n\n            // if ( opts.provider == 'vimeo' || opts.provider == 'youtube' ) {\n            //     videoWidthHeight = 'style=\"width:auto;height:auto;\"';\n            //     css_width = slide.videoWidth,\n            //     css_height = slide.videoHeight;\n            // }\n\n            if ( slide.opts.arrows !== 0 && slide.opts.arrow_position == 'inside' ){\n                // This will be wrapper containing both ghost and actual image\n                slide.$content = $('<div class=\"envirabox-content' + ( opts.preload ? ' envirabox-is-hidden' : ' ' ) + 'provider-' + opts.provider + '\" ' + videoWidthHeight + '><div class=\"envirabox-navigation-inside\"><a data-envirabox-prev title=\"prev\" class=\"envirabox-arrow envirabox-arrow--left envirabox-nav envirabox-prev\" href=\"#\"><span></span></a><a data-envirabox-next title=\"next\" class=\"envirabox-arrow envirabox-arrow--right envirabox-nav envirabox-next\" href=\"#\"><span></span></a></div>')\n                    .addClass('envirabox-hidden')\n                    .css( 'width', '640px' )\n                    .css( 'height', '360px' )\n                    .appendTo( slide.$slide );\n            } else {\n                slide.$content = $('<div class=\"envirabox-content' + ( opts.preload ? ' envirabox-is-hidden' : ' ' ) + 'provider-' + opts.provider + '\" ' + videoWidthHeight + '></div>')\n                    .addClass('envirabox-hidden')\n                    .css( 'width', '640px' )\n                    .css( 'height', '360px' )\n                    .appendTo( $slide );\n            }\n\n            // $content.css('width', '100%');\n\n            console.log('slide');\n            console.log(slide);\n            console.log('opts');\n            console.log(opts);\n\n            $iframe = $( opts.tpl.replace(/\\{rnd\\}/g, new Date().getTime()).replace(/\\{additionalClasses\\}/g, slide.contentProvider) )\n                .attr( opts.attr )\n                .appendTo( slide.$content ).css('width', css_width).css('height', css_height);\n\n\n            if ( opts.preload ) {\n\n                self.showLoading( slide );\n\n                // Unfortunately, it is not always possible to determine if iframe is successfully loaded\n                // (due to browser security policy)\n\n                $iframe.on('load.eb error.eb', function(e) {\n\n                    this.isReady = 1;\n\n                    slide.$slide.trigger( 'refresh' );\n\n                    self.afterLoad( slide );\n                });\n\n                var $contents = false;\n                var $body = false;\n\n                  try {\n                    $contents = $iframe.contents();\n                    $body = $contents.find(\"body\");\n\n                      console.log('contents try');\n                      console.log($contents);\n                      console.log('body try');\n                      console.log($body);\n\n                  } catch (ignore) {\n                    console.log(ignore);\n                    console.log('not working');\n                  }\n\n                  console.log('contents');\n                  console.log($contents);\n                  console.log('body');\n                  console.log($body);\n\n                  // Calculate contnet dimensions if it is accessible\n                  if ($body && $body.length && $body.children().length) {\n                    $content.css({\n                      width: \"\",\n                      height: \"\"\n                    });\n\n                    if (frameWidth === undefined) {\n                      frameWidth = Math.ceil(Math.max($body[0].clientWidth, $body.outerWidth(true)));\n                    }\n\n                    if (frameWidth) {\n                      $content.width(frameWidth);\n                    }\n\n                    if (frameHeight === undefined) {\n                      frameHeight = Math.ceil(Math.max($body[0].clientHeight, $body.outerHeight(true)));\n                    }\n\n                    if (frameHeight) {\n                      $content.height(frameHeight);\n                    }\n\n                    $content.removeClass(\"envirabox-hidden\");\n\n                }\n\n            } else {\n\n                this.afterLoad(slide);\n\n            }\n\n            if ( slide.opts.insideCap === true ){\n                let cap = slide.caption !== undefined ? slide.caption : '',\n                    pos = slide.opts.capPosition ? slide.opts.capPosition : '';\n\t            slide.$content.prepend('<div class=\"envirabox-caption-wrap '+slide.opts.capPosition+'\"><div class=\"envirabox-caption\">'+ cap +'</div></div>');\n            }\n            $iframe.attr( 'src', slide.src );\n\n            if ( slide.opts.smallBtn === true ) {\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\n            }\n\n            // Remove iframe if closing or changing gallery item\n            $slide.one( 'onReset', function () {\n\n                // This helps IE not to throw errors when closing\n                try {\n\n                    $( this ).find( 'iframe' ).hide().attr( 'src', '//about:blank' );\n\n                } catch ( ignore ) {}\n\n                $( this ).empty();\n\n                slide.isLoaded = false;\n\n            });\n\n        },\n\n        setGenericDiv : function( slide ) {\n            var self    = this,\n                opts    = slide.opts.genericDiv,\n                $slide  = slide.$slide,\n                $genericDiv,\n                videoWidthHeight = '',\n                /* videoWidthHeight = 'style=\"width: 1351px; height: 759.938px;\"', */\n                css_width = false,\n                css_height = false;\n\n            // if ( opts.provider == 'vimeo' || opts.provider == 'youtube' ) {\n            //     videoWidthHeight = 'style=\"width:auto;height:auto;\"';\n            //     css_width = slide.videoWidth,\n            //     css_height = slide.videoHeight;\n            // }\n\n            if ( slide.opts.arrows !== 0 && slide.opts.arrow_position == 'inside' ){\n                // This will be wrapper containing both ghost and actual image\n                slide.$content = $('<div class=\"envirabox-content' + ( opts.preload ? ' envirabox-is-hidden' : ' ' ) + ' provider-' + opts.provider + '\" ' + videoWidthHeight + '><div class=\"envirabox-navigation-inside\"><a data-envirabox-prev title=\"prev\" class=\"envirabox-arrow envirabox-arrow--left envirabox-nav envirabox-prev\" href=\"#\"><span></span></a><a data-envirabox-next title=\"next\" class=\"envirabox-arrow envirabox-arrow--right envirabox-nav envirabox-next\" href=\"#\"><span></span></a></div>')\n                    .addClass('envirabox-hidden')\n                    .css( 'width', '640px' )\n                    .css( 'height', '360px' )\n                    .appendTo( slide.$slide );\n            } else {\n                slide.$content = $('<div class=\"envirabox-content' + ( opts.preload ? ' envirabox-is-hidden' : ' ' ) + ' provider-' + opts.provider + '\" ' + videoWidthHeight + '></div>')\n                    .addClass('envirabox-hidden')\n                    .css( 'width', '640px' )\n                    .css( 'height', '360px' )\n                    .appendTo( $slide );\n            }\n\n            // $content.css('width', '100%');\n\n            console.log('FACEBOOK slide');\n            console.log(slide);\n            console.log('FACEBOOK opts');\n            console.log(opts);\n            console.log('OTHER opts');\n            console.log(slide.opts.iframe);            \n\n            $genericDiv = $( opts.tpl.replace(/\\{rnd\\}/g, new Date().getTime()).replace(/\\{additionalClasses\\}/g, slide.contentProvider) )\n                .attr( opts.attr )\n                .attr( 'data-href', slide.src )\n                .appendTo( slide.$content ).css('width', css_width).css('height', css_height);\n\n            console.log('FACEBOOK opts');\n            console.log($genericDiv);\n\n            this.afterLoad(slide);\n\n            if ( slide.opts.insideCap === true ){\n                let cap = slide.caption !== undefined ? slide.caption : '',\n                    pos = slide.opts.capPosition ? slide.opts.capPosition : '';\n                slide.$content.prepend('<div class=\"envirabox-caption-wrap '+slide.opts.capPosition+'\"><div class=\"envirabox-caption\">'+ cap +'</div></div>');\n            }\n            // $genericDiv.attr( 'src', slide.src );\n\n            if ( slide.opts.smallBtn === true ) {\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\n            }\n\n            // Remove genericDiv if closing or changing gallery item\n            $slide.one( 'onReset', function () {\n\n                // This helps IE not to throw errors when closing\n                try {\n\n                    $( this ).find( 'genericDiv' ).hide().attr( 'src', '//about:blank' );\n\n                } catch ( ignore ) {}\n\n                $( this ).empty();\n\n                slide.isLoaded = false;\n\n            });\n\n        },\n\n        // Wrap and append content to the slide\n        // ======================================\n        setContent : function ( slide, content ) {\n\n            var self = this;\n\n            if ( self.isClosing ) {\n                return;\n            }\n\n            self.hideLoading( slide );\n\n            slide.$slide.empty();\n\n            if ( isQuery( content ) && content.parent().length ) {\n\n                // If content is a jQuery object, then it will be moved to the slide.\n                // The placeholder is created so we will know where to put it back.\n                // If user is navigating gallery fast, then the content might be already inside envirabox\n                // =====================================================================================\n\n                // Make sure content is not already moved to envirabox\n                content.parent( '.envirabox-slide--inline' ).trigger( 'onReset' );\n\n                // Create temporary element marking original place of the content\n                slide.$placeholder = $( '<div></div>' ).hide().insertAfter( content );\n\n                // Make sure content is visible\n                content.css('display', 'inline-block');\n\n            } else if ( !slide.hasError ) {\n\n                // If content is just a plain text, try to convert it to html\n                if ( $.type( content ) === 'string' ) {\n                    content = $('<div>').append( $.trim( content ) ).contents();\n\n                    // If we have text node, then add wrapping element to make vertical alignment work\n                    if ( content[0].nodeType === 3 ) {\n                        content = $('<div>').html( content );\n                    }\n                }\n\n                // If \"filter\" option is provided, then filter content\n                if ( slide.opts.filter ) {\n                    content = $('<div>').html( content ).find( slide.opts.filter );\n                }\n\n            }\n\n            slide.$slide.one('onReset', function () {\n\n                // Put content back\n                if ( slide.$placeholder ) {\n                    slide.$placeholder.after( content.hide() ).remove();\n\n                    slide.$placeholder = null;\n                }\n\n                // Remove custom close button\n                if ( slide.$smallBtn ) {\n                    slide.$smallBtn.remove();\n\n                    slide.$smallBtn = null;\n                }\n\n                // Remove content and mark slide as not loaded\n                if ( !slide.hasError ) {\n                    $(this).empty();\n\n                    slide.isLoaded = false;\n                }\n\n            });\n\n            slide.$content = $( content ).appendTo( slide.$slide );\n\n            if ( slide.opts.smallBtn && !slide.$smallBtn ) {\n                slide.$smallBtn = $( self.translate( slide, slide.opts.btnTpl.smallBtn ) ).appendTo( slide.$content.filter('div').first() );\n            }\n\n            this.afterLoad( slide );\n        },\n\n        // Display error message\n        // =====================\n        setError : function ( slide ) {\n\n            slide.hasError = true;\n\n            slide.$slide.removeClass( 'envirabox-slide--' + slide.type );\n\n            this.setContent( slide, this.translate( slide, slide.opts.errorTpl ) );\n\n        },\n\n        // Show loading icon inside the slide\n        // ==================================\n\n        showLoading : function( slide ) {\n\n            var self = this;\n\n            slide = slide || self.current;\n\n            if ( slide && !slide.$spinner ) {\n                slide.$spinner = $( self.opts.spinnerTpl ).appendTo( slide.$slide );\n            }\n\n        },\n\n        // Remove loading icon from the slide\n        // ==================================\n        hideLoading : function( slide ) {\n\n            var self = this;\n\n            slide = slide || self.current;\n\n            if ( slide && slide.$spinner ) {\n                slide.$spinner.remove();\n\n                delete slide.$spinner;\n            }\n\n        },\n\n\n        // Adjustments after slide content has been loaded\n        // ===============================================\n        afterLoad : function( slide ) {\n\n            var self = this;\n\n            if ( self.isClosing ) {\n                return;\n            }\n\n            slide.isLoading = false;\n            slide.isLoaded  = true;\n\n            self.trigger( 'afterLoad', slide );\n\n            self.hideLoading( slide );\n\n            if ( slide.opts.protect && slide.$content && !slide.hasError ) {\n\n                // Disable right click\n                slide.$content.on( 'contextmenu.eb', function( e ) {\n                     if ( e.button == 2 ) {\n                         e.preventDefault();\n                     }\n\n                    return true;\n                });\n\n                // Add fake element on top of the image\n                // This makes a bit harder for user to select image\n                if ( slide.type === 'image' ) {\n                    $( '<div class=\"envirabox-spaceball\"></div>' ).appendTo( slide.$content );\n                }\n\n            }\n\n            self.revealContent( slide );\n\n        },\n\n        // Make content visible\n        // This method is called right after content has been loaded or\n        // user navigates gallery and transition should start\n        // ============================================================\n        revealContent : function( slide ) {\n\n            var self   = this;\n            var $slide = slide.$slide;\n\n            var effect, effectClassName, duration, opacity, end, start = false;\n\n            effect   = slide.opts[ self.firstRun ? 'animationEffect'   : 'transitionEffect' ];\n            duration = slide.opts[ self.firstRun ? 'animationDuration' : 'transitionDuration' ];\n\n            duration = parseInt( slide.forcedDuration === undefined ? duration : slide.forcedDuration, 10 );\n\n            if ( slide.isMoved || slide.pos !== self.currPos || !duration ) {\n                effect = false;\n            }\n\n            // Check if can zoom\n            if ( effect === 'zoom' && !( slide.pos === self.currPos && duration && slide.type === 'image' && !slide.hasError && ( start = self.getThumbPos( slide ) ) ) ) {\n                effect = 'fade';\n            }\n\n            // Zoom animation\n            // ==============\n\n            if ( effect === 'zoom' ) {\n                end = self.getFitPos( slide );\n\n                end.scaleX = end.width  / start.width;\n                end.scaleY = end.height / start.height;\n\n                delete end.width;\n                delete end.height;\n\n                // Check if we need to animate opacity\n                opacity = slide.opts.zoomOpacity;\n\n                if ( opacity == 'auto' ) {\n                    opacity = Math.abs( slide.width / slide.height - start.width / start.height ) > 0.1;\n                }\n\n                if ( opacity ) {\n                    start.opacity = 0.1;\n                    end.opacity   = 1;\n                }\n\n                // Draw image at start position\n                $.envirabox.setTranslate( slide.$content.removeClass( 'envirabox-is-hidden' ), start );\n\n                forceRedraw( slide.$content );\n\n                // Start animation\n                $.envirabox.animate( slide.$content, end, duration, function() {\n                    self.complete();\n                });\n\n                return;\n            }\n\n\n            self.updateSlide( slide );\n\n\n            // Simply show content\n            // ===================\n\n            if ( !effect ) {\n                forceRedraw( $slide );\n\n                slide.$content.removeClass( 'envirabox-is-hidden' );\n\n                if ( slide.pos === self.currPos ) {\n                    self.complete();\n                }\n\n                return;\n            }\n\n            $.envirabox.stop( $slide );\n\n            effectClassName = 'envirabox-animated envirabox-slide--' + ( slide.pos > self.prevPos ? 'next' : 'previous' ) + ' envirabox-fx-' + effect;\n\n            $slide.removeAttr( 'style' ).removeClass( 'envirabox-slide--current envirabox-slide--next envirabox-slide--previous' ).addClass( effectClassName );\n\n            slide.$content.removeClass( 'envirabox-is-hidden' );\n\n            //Force reflow for CSS3 transitions\n            forceRedraw( $slide );\n\n            $.envirabox.animate( $slide, 'envirabox-slide--current', duration, function(e) {\n                $slide.removeClass( effectClassName ).removeAttr( 'style' );\n\n                if ( slide.pos === self.currPos ) {\n                    self.complete();\n                }\n\n            }, true);\n\n        },\n\n        // Check if we can and have to zoom from thumbnail\n        //================================================\n        getThumbPos : function( slide ) {\n\n            var self = this;\n            var rez  = false;\n\n            // Check if element is inside the viewport by at least 1 pixel\n            var isElementVisible = function( $el ) {\n                var element = $el[0];\n\n                var elementRect = element.getBoundingClientRect();\n                var parentRects = [];\n\n                var visibleInAllParents;\n\n                while ( element.parentElement !== null ) {\n                    if ( $(element.parentElement).css('overflow') === 'hidden'  || $(element.parentElement).css('overflow') === 'auto' ) {\n                        parentRects.push(element.parentElement.getBoundingClientRect());\n                    }\n\n                    element = element.parentElement;\n                }\n\n                visibleInAllParents = parentRects.every(function(parentRect){\n                    var visiblePixelX = Math.min(elementRect.right, parentRect.right) - Math.max(elementRect.left, parentRect.left);\n                    var visiblePixelY = Math.min(elementRect.bottom, parentRect.bottom) - Math.max(elementRect.top, parentRect.top);\n\n                    return visiblePixelX > 0 && visiblePixelY > 0;\n                });\n\n                return visibleInAllParents &&\n                    elementRect.bottom > 0 && elementRect.right > 0 &&\n                    elementRect.left < $(window).width() && elementRect.top < $(window).height();\n            };\n\n            var $thumb   = slide.opts.$thumb;\n            var thumbPos = $thumb ? $thumb.offset() : 0;\n            var slidePos;\n\n            if ( thumbPos && $thumb[0].ownerDocument === document && isElementVisible( $thumb ) ) {\n                slidePos = self.$refs.stage.offset();\n\n                rez = {\n                    top    : thumbPos.top  - slidePos.top  + parseFloat( $thumb.css( \"border-top-width\" ) || 0 ),\n                    left   : thumbPos.left - slidePos.left + parseFloat( $thumb.css( \"border-left-width\" ) || 0 ),\n                    width  : $thumb.width(),\n                    height : $thumb.height(),\n                    scaleX : 1,\n                    scaleY : 1\n                };\n            }\n\n            return rez;\n        },\n\n        // Final adjustments after current gallery item is moved to position\n        // and it`s content is loaded\n        // ==================================================================\n        complete : function() {\n\n            var self = this;\n\n            var current = self.current;\n            var slides  = {};\n\n            if ( current.isMoved || !current.isLoaded || current.isComplete ) {\n                return;\n            }\n\n            current.isComplete = true;\n\n            current.$slide.siblings().trigger( 'onReset' );\n\n            // Trigger any CSS3 transiton inside the slide\n            forceRedraw( current.$slide );\n\n            current.$slide.addClass( 'envirabox-slide--complete' );\n\n            // Remove unnecessary slides\n            $.each( self.slides, function( key, slide ) {\n                if ( slide.pos >= self.currPos - 1 && slide.pos <= self.currPos + 1 ) {\n                    slides[ slide.pos ] = slide;\n\n                } else if ( slide ) {\n\n                    $.envirabox.stop( slide.$slide );\n\n                    slide.$slide.off().remove();\n                }\n            });\n\n            self.slides = slides;\n\n            self.updateCursor();\n\n            self.trigger( 'afterShow' );\n\n            // Try to focus on the first focusable element\n            if ( $( document.activeElement ).is( '[disabled]' ) || ( current.opts.autoFocus && !( current.type == 'image' || current.type === 'iframe' ) ) ) {\n                self.focus();\n            }\n\n        },\n\n        // Preload next and previous slides\n        // ================================\n        preload : function() {\n            var self = this;\n            var next, prev;\n\n            if ( self.group.length < 2 ) {\n                return;\n            }\n\n            next  = self.slides[ self.currPos + 1 ];\n            prev  = self.slides[ self.currPos - 1 ];\n\n            if ( next && next.type === 'image' ) {\n                self.loadSlide( next );\n            }\n\n            if ( prev && prev.type === 'image' ) {\n                self.loadSlide( prev );\n            }\n\n        },\n\n        // Try to find and focus on the first focusable element\n        // ====================================================\n\n        focus : function() {\n            var current = this.current;\n            var $el;\n\n            if ( this.isClosing ) {\n                return;\n            }\n\n            if ( current && current.isComplete ) {\n\n                // Look for first input with autofocus attribute\n                $el = current.$slide.find('input[autofocus]:enabled:visible:first');\n\n                if ( !$el.length ) {\n                    $el = current.$slide.find('button,:input,[tabindex],a').filter(':enabled:visible:first');\n                }\n            }\n\n            $el = $el && $el.length ? $el : this.$refs.container;\n\n            $el.focus();\n        },\n\n\n        // Activates current instance - brings container to the front and enables keyboard,\n        // notifies other instances about deactivating\n        // =================================================================================\n\n        activate : function () {\n            var self = this;\n\n            // Deactivate all instances\n            $( '.envirabox-container' ).each(function () {\n                var instance = $(this).data( 'envirabox' );\n\n                // Skip self and closing instances\n                if (instance && instance.uid !== self.uid && !instance.isClosing) {\n                    instance.trigger( 'onDeactivate' );\n                }\n\n            });\n\n            if ( self.current ) {\n                if ( self.$refs.container.index() > 0 ) {\n                    self.$refs.container.prependTo( document.body );\n                }\n\n                self.updateControls();\n            }\n\n            self.trigger( 'onActivate' );\n\n            self.addEvents();\n\n        },\n\n\n        // Start closing procedure\n        // This will start \"zoom-out\" animation if needed and clean everything up afterwards\n        // =================================================================================\n\n        close : function( e, d ) {\n\n            var self    = this;\n            var current = self.current;\n\n            var effect, duration;\n            var $what, opacity, start, end;\n\n            var done = function() {\n                self.cleanUp( e );\n            };\n\n            if ( self.isClosing ) {\n                return false;\n            }\n\n            self.isClosing = true;\n\n            // If beforeClose callback prevents closing, make sure content is centered\n            if ( self.trigger( 'beforeClose', e ) === false ) {\n                self.isClosing = false;\n\n                requestAFrame(function() {\n                    self.update();\n                });\n\n                return false;\n            }\n\n            // Remove all events\n            // If there are multiple instances, they will be set again by \"activate\" method\n            self.removeEvents();\n\n            if ( current.timouts ) {\n                clearTimeout( current.timouts );\n            }\n\n            $what    = current.$content;\n            effect   = current.opts.animationEffect;\n            duration = $.isNumeric( d ) ? d : ( effect ? current.opts.animationDuration : 0 );\n\n            // Remove other slides\n            current.$slide.off( transitionEnd ).removeClass( 'envirabox-slide--complete envirabox-slide--next envirabox-slide--previous envirabox-animated' );\n\n            current.$slide.siblings().trigger( 'onReset' ).remove();\n\n            // Trigger animations\n            if ( duration ) {\n                self.$refs.container.removeClass( 'envirabox-is-open' ).addClass( 'envirabox-is-closing' );\n            }\n\n            // Clean up\n            self.hideLoading( current );\n\n            self.hideControls();\n\n            self.updateCursor();\n\n            // Check if possible to zoom-out\n            if ( effect === 'zoom' && !( e !== true && $what && duration && current.type === 'image' && !current.hasError && ( end = self.getThumbPos( current ) ) ) ) {\n                effect = 'fade';\n            }\n\n            if ( effect === 'zoom' ) {\n                $.envirabox.stop( $what );\n\n                start = $.envirabox.getTranslate( $what );\n\n                start.width  = start.width  * start.scaleX;\n                start.height = start.height * start.scaleY;\n\n                // Check if we need to animate opacity\n                opacity = current.opts.zoomOpacity;\n\n                if ( opacity == 'auto' ) {\n                    opacity = Math.abs( current.width / current.height - end.width / end.height ) > 0.1;\n                }\n\n                if ( opacity ) {\n                    end.opacity = 0;\n                }\n\n                start.scaleX = start.width  / end.width;\n                start.scaleY = start.height / end.height;\n\n                start.width  = end.width;\n                start.height = end.height;\n\n                $.envirabox.setTranslate( current.$content, start );\n\n                $.envirabox.animate( current.$content, end, duration, done );\n\n                return true;\n            }\n\n            if ( effect && duration ) {\n\n                // If skip animation\n                if ( e === true ) {\n                    setTimeout( done, duration );\n\n                } else {\n                    $.envirabox.animate( current.$slide.removeClass( 'envirabox-slide--current' ), 'envirabox-animated envirabox-slide--previous envirabox-fx-' + effect, duration, done );\n                }\n\n            } else {\n                done();\n            }\n\n            return true;\n        },\n\n\n        // Final adjustments after removing the instance\n        // =============================================\n\n        cleanUp : function( e ) {\n            var self = this,\n                instance;\n\n            self.current.$slide.trigger( 'onReset' );\n\n            self.$refs.container.empty().remove();\n\n            self.trigger( 'afterClose', e );\n\n            // Place back focus\n            if ( self.$lastFocus && !!self.current.opts.backFocus ) {\n                self.$lastFocus.focus();\n            }\n\n            self.current = null;\n\n            // Check if there are other instances\n            instance = $.envirabox.getInstance();\n\n            if ( instance ) {\n                instance.activate();\n\n            } else {\n                $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\n\n                $( 'html' ).removeClass( 'envirabox-enabled' );\n\n                $( '#envirabox-style-noscroll' ).remove();\n            }\n\n        },\n\n\n        // Call callback and trigger an event\n        // ==================================\n        trigger : function( name, slide ) {\n            var args  = Array.prototype.slice.call(arguments, 1),\n                self  = this,\n                obj   = slide && slide.opts ? slide : self.current,\n                rez;\n\n            if ( obj ) {\n                args.unshift( obj );\n\n            } else {\n                obj = self;\n            }\n\n            args.unshift( self );\n\n            if ( $.isFunction( obj.opts[ name ] ) ) {\n                rez = obj.opts[ name ].apply( obj, args );\n            }\n\n            if ( rez === false ) {\n                return rez;\n            }\n\n            if ( name === 'afterClose' ) {\n                $D.trigger( name + '.eb', args );\n\n            } else {\n                self.$refs.container.trigger( name + '.eb', args );\n            }\n\n        },\n\n\n        // Update infobar values, navigation button states and reveal caption\n        // ==================================================================\n        updateControls : function ( force ) {\n\n            var self = this,\n                current  = self.current,\n                index    = current.index,\n                opts     = current.opts,\n                caption  = opts.caption,\n                $caption = self.$refs.caption;\n\n            // Recalculate content dimensions\n            current.$slide.trigger( 'refresh' );\n\n            self.$caption = caption && caption.length ? $caption.html( caption ) : null;\n\n            if ( !self.isHiddenControls ) {\n                self.showControls();\n            }\n\n            // Update info and navigation elements\n            $('[data-envirabox-count]').html( self.group.length );\n            $('[data-envirabox-index]').html( index + 1 );\n\n            $('[data-envirabox-prev]').prop('disabled', ( !opts.loop && index <= 0 ) );\n            $('[data-envirabox-next]').prop('disabled', ( !opts.loop && index >= self.group.length - 1 ) );\n\n        },\n\n        // Hide toolbar and caption\n        // ========================\n\n        hideControls : function () {\n\n            this.isHiddenControls = true;\n\n            this.$refs.container.removeClass('envirabox-show-infobar envirabox-show-toolbar envirabox-show-caption envirabox-show-nav');\n\n        },\n\n        showControls : function() {\n\n            var self = this,\n                opts = self.current ? self.current.opts : self.opts,\n                $container = self.$refs.container;\n\n            self.isHiddenControls   = false;\n            self.idleSecondsCounter = 0;\n\n            $container\n                .toggleClass('envirabox-show-toolbar', !!( opts.toolbar && opts.buttons ) )\n                .toggleClass('envirabox-show-infobar', !!( opts.infobar && self.group.length > 1 ) )\n                .toggleClass('envirabox-show-nav',     !!( opts.arrows && self.group.length > 1 ) )\n                .toggleClass('envirabox-is-modal',     !!opts.modal );\n\n            if ( self.$caption ) {\n                $container.addClass( 'envirabox-show-caption ');\n\n            } else {\n               $container.removeClass( 'envirabox-show-caption' );\n           }\n\n       },\n\n\n       // Toggle toolbar and caption\n       // ==========================\n\n       toggleControls : function() {\n\n           if ( this.isHiddenControls ) {\n               this.showControls();\n\n           } else {\n               this.hideControls();\n           }\n\n       },\n\n\n    });\n\n\n    $.envirabox = {\n\n        version  : \"{envirabox-version}\",\n        defaults : defaults,\n\n\n        // Get current instance and execute a command.\n        //\n        // Examples of usage:\n        //\n        //   $instance = $.envirabox.getInstance();\n        //   $.envirabox.getInstance().jumpTo( 1 );\n        //   $.envirabox.getInstance( 'jumpTo', 1 );\n        //   $.envirabox.getInstance( function() {\n        //       console.info( this.currIndex );\n        //   });\n        // ======================================================\n        getInstance : function ( command ) {\n            var instance = $('.envirabox-container:not(\".envirabox-is-closing\"):first').data( 'envirabox' );\n            var args     = Array.prototype.slice.call(arguments, 1);\n\n            if ( instance instanceof EnviraBox ) {\n\n                if ( $.type( command ) === 'string' ) {\n                    instance[ command ].apply( instance, args );\n\n                } else if ( $.type( command ) === 'function' ) {\n                    command.apply( instance, args );\n\n                }\n\n                return instance;\n            }\n\n            return false;\n\n        },\n\n        // Create new instance\n        // ===================\n        open : function ( items, opts, index ) {\n\n            var instance = this.getInstance();\n            if ( instance ){\n                return;\n            }\n            return new EnviraBox( items, opts, index );\n        },\n\n        // Close current or all instances\n        // ==============================\n        close : function ( all ) {\n            var instance = this.getInstance();\n\n            if ( instance ) {\n                instance.close();\n\n                // Try to find and close next instance\n\n                if ( all === true ) {\n                    this.close();\n                }\n            }\n\n        },\n\n        // Close instances and unbind all events\n        // ==============================\n        destroy : function() {\n\n            this.close( true );\n\n            $D.off( 'click.eb-start' );\n\n        },\n\n\n        // Try to detect mobile devices\n        // ============================\n\n        isMobile : document.createTouch !== undefined && /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),\n\n\n        // Detect if 'translate3d' support is available\n        // ============================================\n        use3d : (function() {\n            var div = document.createElement('div');\n\n            return window.getComputedStyle && window.getComputedStyle( div ).getPropertyValue('transform') && !(document.documentMode && document.documentMode < 11);\n        }()),\n\n\n        // Helper function to get current visual state of an element\n        // returns array[ top, left, horizontal-scale, vertical-scale, opacity ]\n        // =====================================================================\n        getTranslate : function( $el ) {\n            var matrix;\n\n            if ( !$el || !$el.length ) {\n                return false;\n            }\n\n            matrix  = $el.eq( 0 ).css('transform');\n\n            if ( matrix && matrix.indexOf( 'matrix' ) !== -1 ) {\n                matrix = matrix.split('(')[1];\n                matrix = matrix.split(')')[0];\n                matrix = matrix.split(',');\n            } else {\n                matrix = [];\n            }\n\n            if ( matrix.length ) {\n\n                // If IE\n                if ( matrix.length > 10 ) {\n                    matrix = [ matrix[13], matrix[12], matrix[0], matrix[5] ];\n\n                } else {\n                    matrix = [ matrix[5], matrix[4], matrix[0], matrix[3]];\n                }\n\n                matrix = matrix.map(parseFloat);\n\n            } else {\n                matrix = [ 0, 0, 1, 1 ];\n\n                var transRegex = /\\.*translate\\((.*)px,(.*)px\\)/i;\n                var transRez = transRegex.exec( $el.eq( 0 ).attr('style') );\n\n                if ( transRez ) {\n                    matrix[ 0 ] = parseFloat( transRez[2] );\n                    matrix[ 1 ] = parseFloat( transRez[1] );\n                }\n            }\n\n            return {\n                top     : matrix[ 0 ],\n                left    : matrix[ 1 ],\n                scaleX  : matrix[ 2 ],\n                scaleY  : matrix[ 3 ],\n                opacity : parseFloat( $el.css('opacity') ),\n                width   : $el.width(),\n                height  : $el.height()\n            };\n\n        },\n\n        // Shortcut for setting \"translate3d\" properties for element\n        // Can set be used to set opacity, too\n        // ========================================================\n        setTranslate : function( $el, props ) {\n            var str  = '';\n            var css  = {};\n\n            if ( !$el || !props ) {\n                return;\n            }\n\n            if ( props.left !== undefined || props.top !== undefined ) {\n                str = ( props.left === undefined ? $el.position().left : props.left )  + 'px, ' + ( props.top === undefined ? $el.position().top : props.top ) + 'px';\n\n                if ( this.use3d ) {\n                    str = 'translate3d(' + str + ', 0px)';\n\n                } else {\n                    str = 'translate(' + str + ')';\n                }\n            }\n\n            if ( props.scaleX !== undefined && props.scaleY !== undefined ) {\n                str = (str.length ? str + ' ' : '') + 'scale(' + props.scaleX + ', ' + props.scaleY + ')';\n            }\n\n            if ( str.length ) {\n                css.transform = str;\n            }\n\n            if ( props.opacity !== undefined ) {\n                css.opacity = props.opacity;\n            }\n\n            if ( props.width !== undefined ) {\n                css.width = props.width;\n            }\n\n            if ( props.height !== undefined ) {\n                css.height = props.height;\n            }\n\n            return $el.css( css );\n        },\n\n        // Simple CSS transition handler\n        // =============================\n        animate : function ( $el, to, duration, callback, leaveAnimationName ) {\n            var event = transitionEnd || 'transitionend';\n\n            if ( $.isFunction( duration ) ) {\n                callback = duration;\n                duration = null;\n            }\n\n            if ( !$.isPlainObject( to ) ) {\n                $el.removeAttr('style');\n            }\n\n            $el.on( event, function(e) {\n\n                // Skip events from child elements and z-index change\n                if ( e && e.originalEvent && ( !$el.is( e.originalEvent.target ) || e.originalEvent.propertyName == 'z-index' ) ) {\n                    return;\n                }\n\n                $el.off( event );\n\n                if ( $.isPlainObject( to ) ) {\n\n                    if ( to.scaleX !== undefined && to.scaleY !== undefined ) {\n                        $el.css( 'transition-duration', '0ms' );\n\n                        to.width  = Math.round( $el.width()  * to.scaleX );\n                        to.height = Math.round( $el.height() * to.scaleY );\n\n                        to.scaleX = 1;\n                        to.scaleY = 1;\n\n                        $.envirabox.setTranslate( $el, to );\n                    }\n\n                } else if ( leaveAnimationName !== true ) {\n                    $el.removeClass( to );\n                }\n\n                if ( $.isFunction( callback ) ) {\n                    callback( e );\n                }\n\n            });\n\n            if ( $.isNumeric( duration ) ) {\n                $el.css( 'transition-duration', duration + 'ms' );\n            }\n\n            if ( $.isPlainObject( to ) ) {\n                $.envirabox.setTranslate( $el, to );\n\n            } else {\n                $el.addClass( to );\n            }\n\n            $el.data(\"timer\", setTimeout(function() {\n                $el.trigger( 'transitionend' );\n            }, duration + 16));\n\n        },\n\n        stop : function( $el ) {\n            clearTimeout( $el.data(\"timer\") );\n\n            $el.off( transitionEnd );\n        }\n\n    };\n\n\n    // Default click handler for \"enviraboxed\" links\n    // ============================================\n    function _run( e ) {\n\n        var target  = e.currentTarget,\n            opts    = e.data ? e.data.options : {},\n            items   = opts.selector ? $( opts.selector ) : ( e.data ? e.data.items : [] ),\n            value   = $( target ).attr( 'data-envirabox' ) || '',\n            index   = 0,\n            active  = $.envirabox.getInstance();\n\n        e.preventDefault();\n\n        // Avoid opening multiple times\n        if ( active && active.current.opts.$orig.is( target ) ) {\n            return;\n        }\n\n        // Get all related items and find index for clicked one\n        if ( value ) {\n            items = items.length ? items.filter( '[data-envirabox=\"' + value + '\"]' ) : $( '[data-envirabox=\"' + value + '\"]' );\n            index = items.index( target );\n\n            // Sometimes current item can not be found\n            // (for example, when slider clones items)\n            if ( index < 0 ) {\n                index = 0;\n            }\n\n        } else {\n            items = [ target ];\n        }\n\n        $.envirabox.open( items, opts, index );\n    }\n\n    // Create a jQuery plugin\n    // ======================\n    $.fn.envirabox = function (options) {\n\n        var selector;\n\n        options  = options || {};\n        selector = options.selector || false;\n\n        if ( selector ) {\n\n            $( 'body' ).off( 'click.eb-start', selector ).on( 'click.eb-start', selector, {\n                options : options\n            }, _run );\n\n        } else {\n\n            this.off( 'click.eb-start' ).on( 'click.eb-start', {\n                items   : this,\n                options : options\n            }, _run);\n\n        }\n\n        return this;\n    };\n\n}( window, document, window.jQuery || jQuery ));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox.js","// ==========================================================================\n//\n// FullScreen\n// Adds fullscreen functionality\n//\n// ==========================================================================\n;(function (document, $) {\n\t'use strict';\n\n\t// Collection of methods supported by user browser\n\tvar fn = (function () {\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// new WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// old WebKit (Safari 5.1)\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar val;\n\t\tvar ret = {};\n\t\tvar i, j;\n\n\t\tfor ( i = 0; i < fnMap.length; i++ ) {\n\t\t\tval = fnMap[ i ];\n\n\t\t\tif ( val && val[ 1 ] in document ) {\n\t\t\t\tfor ( j = 0; j < val.length; j++ ) {\n\t\t\t\t\tret[ fnMap[ 0 ][ j ] ] = val[ j ];\n\t\t\t\t}\n\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\t// If browser does not have Full Screen API, then simply unset default button template and stop\n\tif ( !fn ) {\n\n\t\tif ( $ && $.envirabox ) {\n\t\t\t$.envirabox.defaults.btnTpl.fullScreen = false;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tvar FullScreen = {\n\n\t\trequest : function ( elem ) {\n\n\t\t\telem = elem || document.documentElement;\n\n\t\t\telem[ fn.requestFullscreen ]( elem.ALLOW_KEYBOARD_INPUT );\n\n\t\t},\n\t\texit : function () {\n\n\t\t\tdocument[ fn.exitFullscreen ]();\n\n\t\t},\n\t\ttoggle : function ( elem ) {\n\n\t\t\telem = elem || document.documentElement;\n\n\t\t\tif ( this.isFullscreen() ) {\n\t\t\t\tthis.exit();\n\n\t\t\t} else {\n\t\t\t\tthis.request( elem );\n\t\t\t}\n\n\t\t},\n\t\tisFullscreen : function()  {\n\n\t\t\treturn Boolean( document[ fn.fullscreenElement ] );\n\n\t\t},\n\t\tenabled : function()  {\n\n\t\t\treturn Boolean( document[ fn.fullscreenEnabled ] );\n\n\t\t}\n\t};\n\n\t$(document).on({\n\t\t'onInit.eb' : function(e, instance) {\n\t\t\tvar $container;\n\n\t\t\tvar $button = instance.$refs.toolbar.find('[data-envirabox-fullscreen]');\n\n\t\t\tif ( instance && !instance.FullScreen && instance.group[ instance.currIndex ].opts.fullScreen ) {\n\t\t\t\t$container = instance.$refs.container;\n\n\t\t\t\t$container.on('click.eb-fullscreen', '[data-envirabox-fullscreen]', function(e) {\n\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tFullScreen.toggle( $container[ 0 ] );\n\n\t\t\t\t});\n\n\t\t\t\tif ( instance.opts.fullScreen && instance.opts.fullScreen.autoStart === true ) {\n\t\t\t\t\tFullScreen.request( $container[ 0 ] );\n\t\t\t\t}\n\n\t\t\t\t// Expose API\n\t\t\t\tinstance.FullScreen = FullScreen;\n\n\t\t\t} else {\n\t\t\t\t$button.hide();\n\t\t\t}\n\n\t\t},\n\n\t\t'afterKeydown.eb' : function(e, instance, current, keypress, keycode) {\n\n\t\t\t// \"P\" or Spacebar\n\t\t\tif ( instance && instance.FullScreen && keycode === 70 ) {\n\t\t\t\tkeypress.preventDefault();\n\n\t\t\t\tinstance.FullScreen.toggle( instance.$refs.container[ 0 ] );\n\t\t\t}\n\n\t\t},\n\n\t\t'beforeClose.eb' : function( instance ) {\n\t\t\tif ( instance && instance.FullScreen ) {\n\t\t\t\tFullScreen.exit();\n\t\t\t}\n\t\t}\n\t});\n\n\t$(document).on(fn.fullscreenchange, function() {\n\t\tvar instance = $.envirabox.getInstance();\n\n\t\t// If image is zooming, then force to stop and reposition properly\n\t\tif ( instance.current && instance.current.type === 'image' && instance.isAnimating ) {\n\t\t\tinstance.current.$content.css( 'transition', 'none' );\n\n\t\t\tinstance.isAnimating = false;\n\n\t\t\tinstance.update( true, true, 0 );\n\t\t}\n\n\t\tinstance.trigger('onFullscreenChange', FullScreen.isFullscreen() );\n\n\t});\n\n}(document, window.jQuery));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-fullscreen.js","// ==========================================================================\n//\n// Media\n// Adds additional media type support\n//\n// ==========================================================================\n;(function ($) {\n\n\t'use strict';\n\n\t// Formats matching url to final form\n\n\tvar format = function (url, rez, params) {\n\t\tif ( !url ) {\n\t\t\treturn;\n\t\t}\n\n\t\tparams = params || '';\n\n\t\tif ( $.type(params) === \"object\" ) {\n\t\t\tparams = $.param(params, true);\n\t\t}\n\n\t\t$.each(rez, function (key, value) {\n\t\t\turl = url.replace('$' + key, value || '');\n\t\t});\n\n\t\tif (params.length) {\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + params;\n\t\t}\n\n\t\treturn url;\n\t};\n\n\t// Object containing properties for each media type\n\n\tvar defaults = {\n\t\tyoutube_playlist : {\n\t\t\tmatcher : /^http:\\/\\/(?:www\\.)?youtube\\.com\\/watch\\?((v=[^&\\s]*&list=[^&\\s]*)|(list=[^&\\s]*&v=[^&\\s]*))(&[^&\\s]*)*$/,\n\t\t\tparams  : {\n\t\t\t\tautoplay : 1,\n\t\t\t\tautohide : 1,\n\t\t\t\tfs  : 1,\n\t\t\t\trel : 0,\n\t\t\t\thd  : 1,\n\t\t\t\twmode : 'transparent',\n\t\t\t\tenablejsapi : 1,\n\t\t\t\thtml5 : 1\n\t\t\t},\n\t\t\tparamPlace : 8,\n\t\t\ttype  : 'iframe',\n\t\t\turl   : '//www.youtube.com/embed/videoseries?list=$4',\n\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\n\t\t},\n\n\t\tyoutube : {\n\t\t\tmatcher : /(youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(watch\\?(.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(.*)|[\\w-]{11}|\\?listType=(.*)&list=(.*))(.*)/i,\n\t\t\tparams  : {\n\t\t\t\tautoplay : 1,\n\t\t\t\tautohide : 1,\n\t\t\t\tfs  : 1,\n\t\t\t\trel : 0,\n\t\t\t\thd  : 1,\n\t\t\t\twmode : 'transparent',\n\t\t\t\tenablejsapi : 1,\n\t\t\t\thtml5 : 1\n\t\t\t},\n\t\t\tparamPlace : 8,\n\t\t\ttype  : 'iframe',\n\t\t\turl   : '//www.youtube.com/embed/$4',\n\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\n\t\t},\n\n\t\tvimeo : {\n\t\t\tmatcher : /^.+vimeo.com\\/(.*\\/)?([\\d]+)(.*)?/,\n\t\t\tparams  : {\n\t\t\t\tautoplay : 1,\n\t\t\t\thd : 1,\n\t\t\t\tshow_title    : 1,\n\t\t\t\tshow_byline   : 1,\n\t\t\t\tshow_portrait : 0,\n\t\t\t\tfullscreen    : 1,\n\t\t\t\tapi : 1\n\t\t\t},\n\t\t\tparamPlace : 3,\n\t\t\ttype : 'iframe',\n\t\t\turl : '//player.vimeo.com/video/$2'\n\t\t},\n\n\t\tmetacafe : {\n\t\t\tmatcher : /metacafe.com\\/watch\\/(\\d+)\\/(.*)?/,\n\t\t\ttype    : 'iframe',\n\t\t\turl     : '//www.metacafe.com/embed/$1/?ap=1'\n\t\t},\n\n\t\tdailymotion : {\n\t\t\tmatcher : /dailymotion.com\\/video\\/(.*)\\/?(.*)/,\n\t\t\tparams : {\n\t\t\t\tadditionalInfos : 0,\n\t\t\t\tautoStart : 1\n\t\t\t},\n\t\t\ttype : 'iframe',\n\t\t\turl  : '//www.dailymotion.com/embed/video/$1'\n\t\t},\n\n\t\tfacebook : {\n\t\t\tmatcher : /facebook.com\\/facebook\\/videos\\/(.*)\\/?(.*)/,\n\t\t\ttype : 'genericDiv',\n\t\t\tsubtype: 'facebook',\n\t\t\turl  : '//www.facebook.com/facebook/videos/$1'\n\t\t},\n\n\t\tinstagram : {\n\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/p\\/([a-zA-Z0-9_\\-]+)\\/?/i,\n\t\t\ttype    : 'image',\n\t\t\turl     : '//$1/p/$2/media/?size=l'\n\t\t},\n\n\t\tinstagram_tv : {\n\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/tv\\/([a-zA-Z0-9_\\-]+)\\/?/i,\n\t\t\ttype    : 'iframe',\n\t\t\turl     : '//$1/p/$2/media/?size=l'\n    },\n\n\t\twistia : {\n\t\t\tmatcher : /wistia.com\\/medias\\/(.*)\\/?(.*)/,\n\t\t\ttype    : 'iframe',\n\t\t\turl     : '//fast.wistia.net/embed/iframe/$1'\n\t\t},\n\n\t\t// Example: //player.twitch.tv/?video=270862436\n\t\ttwitch : {\n\t\t\tmatcher : /player.twitch.tv\\/[\\\\?&]video=([^&#]*)/,\n\t\t\ttype : 'iframe',\n\t\t\turl  : '//player.twitch.tv/?video=$1'\n\t\t},\n\n\t\t// Example: //videopress.com/v/DK5mLrbr    ?at=1374&loop=1&autoplay=1\n\t\tvideopress : {\n\t\t\tmatcher : /videopress.com\\/v\\/(.*)\\/?(.*)/,\n\t\t\ttype : 'iframe',\n\t\t\turl  : '//videopress.com/embed/$1'\n\t\t},\n\n\t\t// Examples:\n\t\t// http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16\n\t\t// https://www.google.com/maps/@37.7852006,-122.4146355,14.65z\n\t\t// https://www.google.com/maps/place/Googleplex/@37.4220041,-122.0833494,17z/data=!4m5!3m4!1s0x0:0x6c296c66619367e0!8m2!3d37.4219998!4d-122.0840572\n\t\tgmap_place : {\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(((maps\\/(place\\/(.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(\\?ll=))(.*)?/i,\n\t\t\ttype    : 'iframe',\n\t\t\turl     : function (rez) {\n\t\t\t\treturn '//maps.google.' + rez[2] + '/?ll=' + ( rez[9] ? rez[9] + '&z=' + Math.floor(  rez[10]  ) + ( rez[12] ? rez[12].replace(/^\\//, \"&\") : '' )  : rez[12] ) + '&output=' + ( rez[12] && rez[12].indexOf('layer=c') > 0 ? 'svembed' : 'embed' );\n\t\t\t}\n\t\t},\n\n\t\t// Examples:\n\t\t// https://www.google.com/maps/search/Empire+State+Building/\n\t\t// https://www.google.com/maps/search/?api=1&query=centurylink+field\n\t\t// https://www.google.com/maps/search/?api=1&query=47.5951518,-122.3316393\n\t\tgmap_search : {\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(maps\\/search\\/)(.*)/i,\n\t\t\ttype    : 'iframe',\n\t\t\turl     : function (rez) {\n\t\t\t\treturn '//maps.google.' + rez[2] + '/maps?q=' + rez[5].replace('query=', 'q=').replace('api=1', '') + '&output=embed';\n\t\t\t}\n\t\t}\n\t};\n\n\t$(document).on('onInit.eb', function (e, instance) {\n\n\t\t$.each(instance.group, function( i, item ) {\n\n\t\t\tvar url  = item.src || '',\n\t\t\t\ttype = false,\n\t\t\t\tsubtype = false,\n\t\t\t\tmedia,\n\t\t\t\tthumb,\n\t\t\t\trez,\n\t\t\t\tparams,\n\t\t\t\turlParams,\n\t\t\t\to,\n\t\t\t\tprovider;\n\n\t\t\t// Skip items that already have content type\n\t\t\tif ( item.type ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmedia = $.extend( true, {}, defaults, item.opts.media );\n\n\t\t\t// Look for any matching media type\n\t\t\t$.each(media, function ( n, el ) {\n\t\t\t\trez = url.match(el.matcher);\n\t\t\t\to   = {};\n\t\t\t\tprovider = n;\n\n\t\t\t\t// alert (url + ' ' + provider + ' ' + rez);\n\n\t\t\t\tif (!rez) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttype = el.type;\n\t\t\t\tsubtype = el.subtype;\n\n\t\t\t\tif ( el.paramPlace && rez[ el.paramPlace ] ) {\n\t\t\t\t\turlParams = rez[ el.paramPlace ];\n\n\t\t\t\t\tif ( urlParams[ 0 ] == '?' ) {\n\t\t\t\t\t\turlParams = urlParams.substring(1);\n\t\t\t\t\t}\n\n\t\t\t\t\turlParams = urlParams.split('&');\n\n\t\t\t\t\tfor ( var m = 0; m < urlParams.length; ++m ) {\n\t\t\t\t\t\tvar p = urlParams[ m ].split('=', 2);\n\n\t\t\t\t\t\tif ( p.length == 2 ) {\n\t\t\t\t\t\t\to[ p[0] ] = decodeURIComponent( p[1].replace(/\\+/g, \" \") );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tparams = $.extend( true, {}, el.params, item.opts[ n ], o );\n\n\t\t\t\turl   = $.type(el.url) === \"function\" ? el.url.call(this, rez, params, item) : format(el.url, rez, params);\n\t\t\t\tthumb = $.type(el.thumb) === \"function\" ? el.thumb.call(this, rez, params, item) : format(el.thumb, rez);\n\n\t\t\t\tif ( provider === 'vimeo' ) {\n\t\t\t\t\turl = url.replace('&%23', '#');\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\t// If it is found, then change content type and update the url\n\n\t\t\tif ( type ) {\n\t\t\t\titem.src  = url;\n\t\t\t\titem.type = type;\n\t\t\t\titem.subtype = subtype;\n\n\t\t\t\tif ( !item.opts.thumb && !( item.opts.$thumb && item.opts.$thumb.length ) ) {\n\t\t\t\t\titem.opts.thumb = thumb;\n\t\t\t\t}\n\n\t\t\t\tif ( type === 'iframe' ) {\n\t\t\t\t\t$.extend(true, item.opts, {\n\t\t\t\t\t\tiframe : {\n\t\t\t\t\t\t\tpreload : false,\n\t\t\t\t\t\t\tprovider: provider,\n\t\t\t\t\t\t\tattr : {\n\t\t\t\t\t\t\t\tscrolling : \"no\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\titem.contentProvider = provider;\n\n\t\t\t\t\titem.opts.slideClass += ' envirabox-slide--' + ( provider == 'gmap_place' || provider == 'gmap_search' ? 'map' : 'video' );\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// If no content type is found, then set it to `image` as fallback\n\t\t\t\titem.type = 'image';\n\t\t\t\t\n\t\t\t}\n\n\t\t});\n\n\t});\n\n}(window.jQuery));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-media.js",";(function (document, $) {\n\t'use strict';\n\n\tvar prevTime = new Date().getTime();\n\n    $(document).on({\n        'onInit.eb' : function( e, instance, current ) {\n\t\t\tinstance.$refs.stage.on('mousewheel DOMMouseScroll wheel MozMousePixelScroll', function(e) {\n\t\t\t\tvar current  = instance.current,\n\t\t\t\t\tcurrTime = new Date().getTime();\n\n\t\t\t\tif ( instance.group.length < 1 || current.opts.wheel === false || ( current.opts.wheel === 'auto' && current.type !== 'image' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\n\t\t\t\tif ( current.$slide.hasClass( 'envirabox-animated' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te = e.originalEvent || e;\n\n\t\t\t\tif ( currTime - prevTime < 250 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tprevTime = currTime;\n\n\t\t\t\tinstance[ ( -e.deltaY || -e.deltaX || e.wheelDelta || -e.detail ) < 0 ? 'next' : 'previous' ]();\n\n\t\t\t});\n\t\t}\n    });\n\n}( document, window.jQuery || jQuery ));\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-wheel.js","// ==========================================================================\n//\n// Guestures\n// Adds touch guestures, handles click and tap events\n//\n// ==========================================================================\n;(function (window, document, $) {\n\t'use strict';\n\n\tvar requestAFrame = (function () {\n        return window.requestAnimationFrame ||\n                window.webkitRequestAnimationFrame ||\n                window.mozRequestAnimationFrame ||\n                window.oRequestAnimationFrame ||\n                // if all else fails, use setTimeout\n                function (callback) {\n                    return window.setTimeout(callback, 1000 / 60);\n                };\n    })();\n\n\n    var cancelAFrame = (function () {\n        return window.cancelAnimationFrame ||\n                window.webkitCancelAnimationFrame ||\n                window.mozCancelAnimationFrame ||\n                window.oCancelAnimationFrame ||\n                function (id) {\n                    window.clearTimeout(id);\n                };\n    })();\n\n\n\tvar pointers = function( e ) {\n\t\tvar result = [];\n\n\t\te = e.originalEvent || e || window.e;\n\t\te = e.touches && e.touches.length ? e.touches : ( e.changedTouches && e.changedTouches.length ? e.changedTouches : [ e ] );\n\n\t\tfor ( var key in e ) {\n\n\t\t\tif ( e[ key ].pageX ) {\n\t\t\t\tresult.push( { x : e[ key ].pageX, y : e[ key ].pageY } );\n\n\t\t\t} else if ( e[ key ].clientX ) {\n\t\t\t\tresult.push( { x : e[ key ].clientX, y : e[ key ].clientY } );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tvar distance = function( point2, point1, what ) {\n\t\tif ( !point1 || !point2 ) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif ( what === 'x' ) {\n\t\t\treturn point2.x - point1.x;\n\n\t\t} else if ( what === 'y' ) {\n\t\t\treturn point2.y - point1.y;\n\t\t}\n\n\t\treturn Math.sqrt( Math.pow( point2.x - point1.x, 2 ) + Math.pow( point2.y - point1.y, 2 ) );\n\t};\n\n\tvar isClickable = function( $el ) {\n\n\t\tif ( $el.is('a,area,button,[role=\"button\"],input,label,select,summary,textarea') || $.isFunction( $el.get(0).onclick ) || $el.data('selectable') ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check for attributes like data-envirabox-next or data-envirabox-close\n\t\tfor ( var i = 0, atts = $el[0].attributes, n = atts.length; i < n; i++ ) {\n            if ( atts[i].nodeName.substr(0, 14) === 'data-envirabox-' ) {\n                return true;\n            }\n        }\n\n\t    return false;\n\t};\n\n\tvar hasScrollbars = function( el ) {\n\t\tvar overflowY = window.getComputedStyle( el )['overflow-y'];\n\t\tvar overflowX = window.getComputedStyle( el )['overflow-x'];\n\n\t\tvar vertical   = (overflowY === 'scroll' || overflowY === 'auto') && el.scrollHeight > el.clientHeight;\n\t\tvar horizontal = (overflowX === 'scroll' || overflowX === 'auto') && el.scrollWidth > el.clientWidth;\n\n\t\treturn vertical || horizontal;\n\t};\n\n\tvar isScrollable = function ( $el ) {\n\t\tvar rez = false;\n\n\t\twhile ( true ) {\n\t\t\trez = hasScrollbars( $el.get(0) );\n\n\t\t\tif ( rez ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t$el = $el.parent();\n\n\t\t\tif ( !$el.length || $el.hasClass( 'envirabox-stage' ) || $el.is( 'body' ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn rez;\n\t};\n\n\n\tvar Guestures = function ( instance ) {\n\t\tvar self = this;\n\n\t\tself.instance = instance;\n\n\t\tself.$bg        = instance.$refs.bg;\n\t\tself.$stage     = instance.$refs.stage;\n\t\tself.$container = instance.$refs.container;\n\n\t\tself.destroy();\n\n\t\tself.$container.on( 'touchstart.eb.touch mousedown.eb.touch', $.proxy(self, 'ontouchstart') );\n\t};\n\n\tGuestures.prototype.destroy = function() {\n\t\tthis.$container.off( '.eb.touch' );\n\t};\n\n\tGuestures.prototype.ontouchstart = function( e ) {\n\t\tvar self = this;\n\n\t\tvar $target  = $( e.target );\n\t\tvar instance = self.instance;\n\t\tvar current  = instance.current;\n\t\tvar $content = current.$content;\n\n\t\tvar isTouchDevice = ( e.type == 'touchstart' );\n\n\t\t// Do not respond to both events\n\t\tif ( isTouchDevice ) {\n\t        self.$container.off( 'mousedown.eb.touch' );\n\t    }\n\n\t\t// Ignore clicks while zooming or closing\n\t\tif ( !current || self.instance.isAnimating || self.instance.isClosing ) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Ignore right click\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ignore taping on links, buttons, input elements\n\t\tif ( !$target.length || isClickable( $target ) || isClickable( $target.parent() ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ignore clicks on the scrollbar\n\t\tif ( e.originalEvent.clientX > $target[0].clientWidth + $target.offset().left ) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.startPoints = pointers( e );\n\n\t\t// Prevent zooming if already swiping\n\t\tif ( !self.startPoints || ( self.startPoints.length > 1 && instance.isSliding ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.$target  = $target;\n\t\tself.$content = $content;\n\t\tself.canTap   = true;\n\t\tself.opts     = current.opts.touch;\n\n\t\t$(document).off( '.eb.touch' );\n\n\t\t$(document).on( isTouchDevice ? 'touchend.eb.touch touchcancel.eb.touch' : 'mouseup.eb.touch mouseleave.eb.touch',  $.proxy(self, \"ontouchend\"));\n\t\t$(document).on( isTouchDevice ? 'touchmove.eb.touch' : 'mousemove.eb.touch',  $.proxy(self, \"ontouchmove\"));\n\n\t\tif ( !(self.opts || instance.canPan() ) || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\n\n\t\t\t// Prevent ghosting\n\t\t\tif ( $target.is('img') ) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\te.stopPropagation();\n\n\t\tif ( !( $.envirabox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) ) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tself.canvasWidth  = Math.round( current.$slide[0].clientWidth );\n\t\tself.canvasHeight = Math.round( current.$slide[0].clientHeight );\n\n\t\tself.startTime = new Date().getTime();\n\t\tself.distanceX = self.distanceY = self.distance = 0;\n\n\t\tself.isPanning = false;\n\t\tself.isSwiping = false;\n\t\tself.isZooming = false;\n\n\t\tself.sliderStartPos  = self.sliderLastPos || { top: 0, left: 0 };\n\t\tself.contentStartPos = $.envirabox.getTranslate( self.$content );\n\t\tself.contentLastPos  = null;\n\n\t\tif ( self.startPoints.length === 1 && !self.isZooming ) {\n\t\t\tself.canTap = !instance.isSliding;\n\n\t\t\tif ( current.type === 'image' && ( self.contentStartPos.width > self.canvasWidth + 1 || self.contentStartPos.height > self.canvasHeight + 1 ) ) {\n\n\t\t\t\t$.envirabox.stop( self.$content );\n\n\t\t\t\tself.$content.css( 'transition-duration', '0ms' );\n\n\t\t\t\tself.isPanning = true;\n\n\t\t\t} else {\n\n\t\t\t\tself.isSwiping = true;\n\t\t\t}\n\n\t\t\tself.$container.addClass('envirabox-controls--isGrabbing');\n\t\t}\n\n\t\tif ( self.startPoints.length === 2 && !instance.isAnimating && !current.hasError && current.type === 'image' && ( current.isLoaded || current.$ghost ) ) {\n\t\t\tself.isZooming = true;\n\n\t\t\tself.isSwiping = false;\n\t\t\tself.isPanning = false;\n\n\t\t\t$.envirabox.stop( self.$content );\n\n\t\t\tself.$content.css( 'transition-duration', '0ms' );\n\n\t\t\tself.centerPointStartX = ( ( self.startPoints[0].x + self.startPoints[1].x ) * 0.5 ) - $(window).scrollLeft();\n\t\t\tself.centerPointStartY = ( ( self.startPoints[0].y + self.startPoints[1].y ) * 0.5 ) - $(window).scrollTop();\n\n\t\t\tself.percentageOfImageAtPinchPointX = ( self.centerPointStartX - self.contentStartPos.left ) / self.contentStartPos.width;\n\t\t\tself.percentageOfImageAtPinchPointY = ( self.centerPointStartY - self.contentStartPos.top  ) / self.contentStartPos.height;\n\n\t\t\tself.startDistanceBetweenFingers = distance( self.startPoints[0], self.startPoints[1] );\n\t\t}\n\n\t};\n\n\tGuestures.prototype.ontouchmove = function( e ) {\n\n\t\tvar self = this;\n\n\t\tself.newPoints = pointers( e );\n\n\t\tif ( $.envirabox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) {\n\t\t\te.stopPropagation();\n\n\t\t\tself.canTap = false;\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !( self.opts || self.instance.canPan() ) || !self.newPoints || !self.newPoints.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.distanceX = distance( self.newPoints[0], self.startPoints[0], 'x' );\n\t\tself.distanceY = distance( self.newPoints[0], self.startPoints[0], 'y' );\n\n\t\tself.distance = distance( self.newPoints[0], self.startPoints[0] );\n\n\t\t// Skip false ontouchmove events (Chrome)\n\t\tif ( self.distance > 0 ) {\n\n\t\t\tif ( !( self.$target.is( self.$stage ) || self.$stage.find( self.$target ).length ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tif ( self.isSwiping ) {\n\t\t\t\tself.onSwipe();\n\n\t\t\t} else if ( self.isPanning ) {\n\t\t\t\tself.onPan();\n\n\t\t\t} else if ( self.isZooming ) {\n\t\t\t\tself.onZoom();\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tGuestures.prototype.onSwipe = function() {\n\n\t\tvar self = this;\n\n\t\tvar swiping = self.isSwiping;\n\t\tvar left    = self.sliderStartPos.left || 0;\n\t\tvar angle;\n\n\t\tif ( swiping === true ) {\n\n\t\t\tif ( Math.abs( self.distance ) > 10 )  {\n\n\t\t\t\tself.canTap = false;\n\n\t\t\t\tif ( self.instance.group.length < 2 && self.opts.vertical ) {\n\t\t\t\t\tself.isSwiping  = 'y';\n\n\t\t\t\t} else if ( self.instance.isSliding || self.opts.vertical === false || ( self.opts.vertical === 'auto' && $( window ).width() > 800 ) ) {\n\t\t\t\t\tself.isSwiping  = 'x';\n\n\t\t\t\t} else {\n\t\t\t\t\tangle = Math.abs( Math.atan2( self.distanceY, self.distanceX ) * 180 / Math.PI );\n\n\t\t\t\t\tself.isSwiping = ( angle > 45 && angle < 135 ) ? 'y' : 'x';\n\t\t\t\t}\n\n\t\t\t\tself.instance.isSliding = self.isSwiping;\n\n\t\t\t\t// Reset points to avoid jumping, because we dropped first swipes to calculate the angle\n\t\t\t\tself.startPoints = self.newPoints;\n\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\n\t\t\t\t\t$.envirabox.stop( slide.$slide );\n\n\t\t\t\t\tslide.$slide.css( 'transition-duration', '0ms' );\n\n\t\t\t\t\tslide.inTransition = false;\n\n\t\t\t\t\tif ( slide.pos === self.instance.current.pos ) {\n\t\t\t\t\t\tself.sliderStartPos.left = $.envirabox.getTranslate( slide.$slide ).left;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//self.instance.current.isMoved = true;\n\n\t\t\t\t// Stop slideshow\n\t\t\t\tif ( self.instance.SlideShow && self.instance.SlideShow.isActive ) {\n\t\t\t\t\tself.instance.SlideShow.stop();\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( swiping == 'x' ) {\n\n\t\t\t\t// Sticky edges\n\t\t\t\tif ( self.distanceX > 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === 0 && !self.instance.current.opts.loop ) ) ) {\n\t\t\t\t\tleft = left + Math.pow( self.distanceX, 0.8 );\n\n\t\t\t\t} else if ( self.distanceX < 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === self.instance.group.length - 1 && !self.instance.current.opts.loop ) ) ) {\n\t\t\t\t\tleft = left - Math.pow( -self.distanceX, 0.8 );\n\n\t\t\t\t} else {\n\t\t\t\t\tleft = left + self.distanceX;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tself.sliderLastPos = {\n\t\t\t\ttop  : swiping == 'x' ? 0 : self.sliderStartPos.top + self.distanceY,\n\t\t\t\tleft : left\n\t\t\t};\n\n\t\t\tif ( self.requestId ) {\n\t\t\t\tcancelAFrame( self.requestId );\n\n\t\t\t\tself.requestId = null;\n\t\t\t}\n\n\t\t\tself.requestId = requestAFrame(function() {\n\n\t\t\t\tif ( self.sliderLastPos ) {\n\t\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\n\t\t\t\t\t\tvar pos = slide.pos - self.instance.currPos;\n\n\t\t\t\t\t\t$.envirabox.setTranslate( slide.$slide, {\n\t\t\t\t\t\t\ttop  : self.sliderLastPos.top,\n\t\t\t\t\t\t\tleft : self.sliderLastPos.left + ( pos * self.canvasWidth ) + ( pos * slide.opts.gutter )\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tself.$container.addClass( 'envirabox-is-sliding' );\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t};\n\n\tGuestures.prototype.onPan = function() {\n\n\t\tvar self = this;\n\n\t\tvar newOffsetX, newOffsetY, newPos;\n\n\t\tself.canTap = false;\n\n\t\tif ( self.contentStartPos.width > self.canvasWidth ) {\n\t\t\tnewOffsetX = self.contentStartPos.left + self.distanceX;\n\n\t\t} else {\n\t\t\tnewOffsetX = self.contentStartPos.left;\n\t\t}\n\n\t\tnewOffsetY = self.contentStartPos.top + self.distanceY;\n\n\t\tnewPos = self.limitMovement( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\n\n\t\tnewPos.scaleX = self.contentStartPos.scaleX;\n\t\tnewPos.scaleY = self.contentStartPos.scaleY;\n\n\t\tself.contentLastPos = newPos;\n\n\t\tif ( self.requestId ) {\n\t\t\tcancelAFrame( self.requestId );\n\n\t\t\tself.requestId = null;\n\t\t}\n\n\t\tself.requestId = requestAFrame(function() {\n\t\t\t$.envirabox.setTranslate( self.$content, self.contentLastPos );\n\t\t});\n\t};\n\n\t// Make panning sticky to the edges\n\tGuestures.prototype.limitMovement = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\n\n\t\tvar self = this;\n\n\t\tvar minTranslateX, minTranslateY, maxTranslateX, maxTranslateY;\n\n\t\tvar canvasWidth  = self.canvasWidth;\n\t\tvar canvasHeight = self.canvasHeight;\n\n\t\tvar currentOffsetX = self.contentStartPos.left;\n\t\tvar currentOffsetY = self.contentStartPos.top;\n\n\t\tvar distanceX = self.distanceX;\n\t\tvar distanceY = self.distanceY;\n\n\t\t// Slow down proportionally to traveled distance\n\n\t\tminTranslateX = Math.max(0, canvasWidth  * 0.5 - newWidth  * 0.5 );\n\t\tminTranslateY = Math.max(0, canvasHeight * 0.5 - newHeight * 0.5 );\n\n\t\tmaxTranslateX = Math.min( canvasWidth  - newWidth,  canvasWidth  * 0.5 - newWidth  * 0.5 );\n\t\tmaxTranslateY = Math.min( canvasHeight - newHeight, canvasHeight * 0.5 - newHeight * 0.5 );\n\n\t\tif ( newWidth > canvasWidth ) {\n\n\t\t\t//   ->\n\t\t\tif ( distanceX > 0 && newOffsetX > minTranslateX ) {\n\t\t\t\tnewOffsetX = minTranslateX - 1 + Math.pow( -minTranslateX + currentOffsetX + distanceX, 0.8 ) || 0;\n\t\t\t}\n\n\t\t\t//    <-\n\t\t\tif ( distanceX  < 0 && newOffsetX < maxTranslateX ) {\n\t\t\t\tnewOffsetX = maxTranslateX + 1 - Math.pow( maxTranslateX - currentOffsetX - distanceX, 0.8 ) || 0;\n\t\t\t}\n\n\t\t}\n\n\t\tif ( newHeight > canvasHeight ) {\n\n\t\t\t//   \\/\n\t\t\tif ( distanceY > 0 && newOffsetY > minTranslateY ) {\n\t\t\t\tnewOffsetY = minTranslateY - 1 + Math.pow(-minTranslateY + currentOffsetY + distanceY, 0.8 ) || 0;\n\t\t\t}\n\n\t\t\t//   /\\\n\t\t\tif ( distanceY < 0 && newOffsetY < maxTranslateY ) {\n\t\t\t\tnewOffsetY = maxTranslateY + 1 - Math.pow ( maxTranslateY - currentOffsetY - distanceY, 0.8 ) || 0;\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttop  : newOffsetY,\n\t\t\tleft : newOffsetX\n\t\t};\n\n\t};\n\n\n\tGuestures.prototype.limitPosition = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\n\n\t\tvar self = this;\n\n\t\tvar canvasWidth  = self.canvasWidth;\n\t\tvar canvasHeight = self.canvasHeight;\n\n\t\tif ( newWidth > canvasWidth ) {\n\t\t\tnewOffsetX = newOffsetX > 0 ? 0 : newOffsetX;\n\t\t\tnewOffsetX = newOffsetX < canvasWidth - newWidth ? canvasWidth - newWidth : newOffsetX;\n\n\t\t} else {\n\n\t\t\t// Center horizontally\n\t\t\tnewOffsetX = Math.max( 0, canvasWidth / 2 - newWidth / 2 );\n\n\t\t}\n\n\t\tif ( newHeight > canvasHeight ) {\n\t\t\tnewOffsetY = newOffsetY > 0 ? 0 : newOffsetY;\n\t\t\tnewOffsetY = newOffsetY < canvasHeight - newHeight ? canvasHeight - newHeight : newOffsetY;\n\n\t\t} else {\n\n\t\t\t// Center vertically\n\t\t\tnewOffsetY = Math.max( 0, canvasHeight / 2 - newHeight / 2 );\n\n\t\t}\n\n\t\treturn {\n\t\t\ttop  : newOffsetY,\n\t\t\tleft : newOffsetX\n\t\t};\n\n\t};\n\n\tGuestures.prototype.onZoom = function() {\n\n\t\tvar self = this;\n\n\t\t// Calculate current distance between points to get pinch ratio and new width and height\n\n\t\tvar currentWidth  = self.contentStartPos.width;\n\t\tvar currentHeight = self.contentStartPos.height;\n\n\t\tvar currentOffsetX = self.contentStartPos.left;\n\t\tvar currentOffsetY = self.contentStartPos.top;\n\n\t\tvar endDistanceBetweenFingers = distance( self.newPoints[0], self.newPoints[1] );\n\n\t\tvar pinchRatio = endDistanceBetweenFingers / self.startDistanceBetweenFingers;\n\n\t\tvar newWidth  = Math.floor( currentWidth  * pinchRatio );\n\t\tvar newHeight = Math.floor( currentHeight * pinchRatio );\n\n\t\t// This is the translation due to pinch-zooming\n\t\tvar translateFromZoomingX = (currentWidth  - newWidth)  * self.percentageOfImageAtPinchPointX;\n\t\tvar translateFromZoomingY = (currentHeight - newHeight) * self.percentageOfImageAtPinchPointY;\n\n\t\t//Point between the two touches\n\n\t\tvar centerPointEndX = ((self.newPoints[0].x + self.newPoints[1].x) / 2) - $(window).scrollLeft();\n\t\tvar centerPointEndY = ((self.newPoints[0].y + self.newPoints[1].y) / 2) - $(window).scrollTop();\n\n\t\t// And this is the translation due to translation of the centerpoint\n\t\t// between the two fingers\n\n\t\tvar translateFromTranslatingX = centerPointEndX - self.centerPointStartX;\n\t\tvar translateFromTranslatingY = centerPointEndY - self.centerPointStartY;\n\n\t\t// The new offset is the old/current one plus the total translation\n\n\t\tvar newOffsetX = currentOffsetX + ( translateFromZoomingX + translateFromTranslatingX );\n\t\tvar newOffsetY = currentOffsetY + ( translateFromZoomingY + translateFromTranslatingY );\n\n\t\tvar newPos = {\n\t\t\ttop    : newOffsetY,\n\t\t\tleft   : newOffsetX,\n\t\t\tscaleX : self.contentStartPos.scaleX * pinchRatio,\n\t\t\tscaleY : self.contentStartPos.scaleY * pinchRatio\n\t\t};\n\n\t\tself.canTap = false;\n\n\t\tself.newWidth  = newWidth;\n\t\tself.newHeight = newHeight;\n\n\t\tself.contentLastPos = newPos;\n\n\t\tif ( self.requestId ) {\n\t\t\tcancelAFrame( self.requestId );\n\n\t\t\tself.requestId = null;\n\t\t}\n\n\t\tself.requestId = requestAFrame(function() {\n\t\t\t$.envirabox.setTranslate( self.$content, self.contentLastPos );\n\t\t});\n\n\t};\n\n\tGuestures.prototype.ontouchend = function( e ) {\n\n\t\tvar self = this;\n\t\tvar dMs  = Math.max( (new Date().getTime() ) - self.startTime, 1);\n\n\t\tvar swiping = self.isSwiping;\n\t\tvar panning = self.isPanning;\n\t\tvar zooming = self.isZooming;\n\n\t\tself.endPoints = pointers( e );\n\n\t\tself.$container.removeClass( 'envirabox-controls--isGrabbing' );\n\n\t\t$(document).off( '.eb.touch' );\n\n\t\tif ( self.requestId ) {\n\t\t\tcancelAFrame( self.requestId );\n\n\t\t\tself.requestId = null;\n\t\t}\n\n\t\tself.isSwiping = false;\n\t\tself.isPanning = false;\n\t\tself.isZooming = false;\n\n\t\tif ( self.canTap )  {\n\t\t\treturn self.onTap( e );\n\t\t}\n\n\t\tself.speed = 366;\n\n\t\t// Speed in px/ms\n\t\tself.velocityX = self.distanceX / dMs * 0.5;\n\t\tself.velocityY = self.distanceY / dMs * 0.5;\n\n\t\tself.speedX = Math.max( self.speed * 0.5, Math.min( self.speed * 1.5, ( 1 / Math.abs( self.velocityX ) ) * self.speed ) );\n\n\t\tif ( panning ) {\n\t\t\tself.endPanning();\n\n\t\t} else if ( zooming ) {\n\t\t\tself.endZooming();\n\n\t\t} else {\n\t\t\tself.endSwiping( swiping );\n\t\t}\n\n\t\treturn;\n\t};\n\n\tGuestures.prototype.endSwiping = function( swiping ) {\n\n\t\tvar self = this;\n\t\tvar ret = false;\n\n\t\tself.instance.isSliding = false;\n\t\tself.sliderLastPos      = null;\n\n\t\t// Close if swiped vertically / navigate if horizontally\n\t\tif ( swiping == 'y' && Math.abs( self.distanceY ) > 50 ) {\n\n\t\t\t// Continue vertical movement\n\t\t\t$.envirabox.animate( self.instance.current.$slide, {\n\t\t\t\ttop     : self.sliderStartPos.top + self.distanceY + ( self.velocityY * 150 ),\n\t\t\t\topacity : 0\n\t\t\t}, 150 );\n\n\t\t\tret = self.instance.close( true, 300 );\n\n\t\t} else if ( swiping == 'x' && self.distanceX > 50 && self.instance.group.length > 1 ) {\n\t\t\tret = self.instance.previous( self.speedX );\n\n\t\t} else if ( swiping == 'x' && self.distanceX < -50  && self.instance.group.length > 1 ) {\n\t\t\tret = self.instance.next( self.speedX );\n\t\t}\n\n\t\tif ( ret === false && ( swiping == 'x' || swiping == 'y' ) ) {\n\t\t\tself.instance.jumpTo( self.instance.current.index, 150 );\n\t\t}\n\n\t\tself.$container.removeClass( 'envirabox-is-sliding' );\n\n\t};\n\n\t// Limit panning from edges\n\t// ========================\n\n\tGuestures.prototype.endPanning = function() {\n\n\t\tvar self = this;\n\t\tvar newOffsetX, newOffsetY, newPos;\n\n\t\tif ( !self.contentLastPos ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( self.opts.momentum === false ) {\n\t\t\tnewOffsetX = self.contentLastPos.left;\n\t\t\tnewOffsetY = self.contentLastPos.top;\n\n\t\t} else {\n\n\t\t\t// Continue movement\n\t\t\tnewOffsetX = self.contentLastPos.left + ( self.velocityX * self.speed );\n\t\t\tnewOffsetY = self.contentLastPos.top  + ( self.velocityY * self.speed );\n\t\t}\n\n\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\n\n\t\t newPos.width  = self.contentStartPos.width;\n\t\t newPos.height = self.contentStartPos.height;\n\n\t\t$.envirabox.animate( self.$content, newPos, 330 );\n\t};\n\n\n\tGuestures.prototype.endZooming = function() {\n\n\t\tvar self = this;\n\n\t\tvar current = self.instance.current;\n\n\t\tvar newOffsetX, newOffsetY, newPos, reset;\n\n\t\tvar newWidth  = self.newWidth;\n\t\tvar newHeight = self.newHeight;\n\n\t\tif ( !self.contentLastPos ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnewOffsetX = self.contentLastPos.left;\n\t\tnewOffsetY = self.contentLastPos.top;\n\n\t\treset = {\n\t\t    top    : newOffsetY,\n\t\t    left   : newOffsetX,\n\t\t    width  : newWidth,\n\t\t    height : newHeight,\n\t\t\tscaleX : 1,\n\t\t\tscaleY : 1\n\t   };\n\n\t   // Reset scalex/scaleY values; this helps for perfomance and does not break animation\n\t   $.envirabox.setTranslate( self.$content, reset );\n\n\t\tif ( newWidth < self.canvasWidth && newHeight < self.canvasHeight ) {\n\t\t\tself.instance.scaleToFit( 150 );\n\n\t\t} else if ( newWidth > current.width || newHeight > current.height ) {\n\t\t\tself.instance.scaleToActual( self.centerPointStartX, self.centerPointStartY, 150 );\n\n\t\t} else {\n\n\t\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, newWidth, newHeight );\n\n\t\t\t// Switch from scale() to width/height or animation will not work correctly\n\t\t\t$.envirabox.setTranslate( self.content, $.envirabox.getTranslate( self.$content ) );\n\n\t\t\t$.envirabox.animate( self.$content, newPos, 150 );\n\t\t}\n\n\t};\n\n\tGuestures.prototype.onTap = function(e) {\n\t\tvar self    = this;\n\t\tvar $target = $( e.target );\n\n\t\tvar instance = self.instance;\n\t\tvar current  = instance.current;\n\n\t\tvar endPoints = ( e && pointers( e ) ) || self.startPoints;\n\n\t\tvar tapX = endPoints[0] ? endPoints[0].x - self.$stage.offset().left : 0;\n\t\tvar tapY = endPoints[0] ? endPoints[0].y - self.$stage.offset().top  : 0;\n\n\t\tvar where;\n\n\t\tvar process = function ( prefix ) {\n\n\t\t\tvar action = current.opts[ prefix ];\n\n\t\t\tif ( $.isFunction( action ) ) {\n\t\t\t\taction = action.apply( instance, [ current, e ] );\n\t\t\t}\n\n\t\t\tif ( !action) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase \"close\" :\n\n\t\t\t\t\tinstance.close( self.startEvent );\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"toggleControls\" :\n\n\t\t\t\t\tinstance.toggleControls( true );\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"next\" :\n\n\t\t\t\t\tinstance.next();\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"nextOrClose\" :\n\n\t\t\t\t\tif ( instance.group.length > 1 ) {\n\t\t\t\t\t\tinstance.next();\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinstance.close( self.startEvent );\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"zoom\" :\n\n\t\t\t\t\tif ( current.type == 'image' && ( current.isLoaded || current.$ghost ) ) {\n\n\t\t\t\t\t\tif ( instance.canPan() ) {\n\t\t\t\t\t\t\tinstance.scaleToFit();\n\n\t\t\t\t\t\t} else if ( instance.isScaledDown() ) {\n\t\t\t\t\t\t\tinstance.scaleToActual( tapX, tapY );\n\n\t\t\t\t\t\t} else if ( instance.group.length < 2 ) {\n\t\t\t\t\t\t\tinstance.close( self.startEvent );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t};\n\n\t\t// Ignore right click\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Skip if current slide is not in the center\n\t\tif ( instance.isSliding ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Skip if clicked on the scrollbar\n\t\tif ( tapX > $target[0].clientWidth + $target.offset().left ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check where is clicked\n\t\tif ( $target.is( '.envirabox-bg,.envirabox-inner,.envirabox-outer,.envirabox-container' ) ) {\n\t\t\twhere = 'Outside';\n\n\t\t} else if ( $target.is( '.envirabox-slide' ) ) {\n\t\t\twhere = 'Slide';\n\n\t\t} else if  ( instance.current.$content && instance.current.$content.has( e.target ).length ) {\n\t\t    where = 'Content';\n\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if this is a double tap\n\t\tif ( self.tapped ) {\n\n\t\t\t// Stop previously created single tap\n\t\t\tclearTimeout( self.tapped );\n\t\t\tself.tapped = null;\n\n\t\t\t// Skip if distance between taps is too big\n\t\t\tif ( Math.abs( tapX - self.tapX ) > 50 || Math.abs( tapY - self.tapY ) > 50 || instance.isSliding ) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t// OK, now we assume that this is a double-tap\n\t\t\tprocess( 'dblclick' + where );\n\n\t\t} else {\n\n\t\t\t// Single tap will be processed if user has not clicked second time within 300ms\n\t\t\t// or there is no need to wait for double-tap\n\t\t\tself.tapX = tapX;\n\t\t\tself.tapY = tapY;\n\n\t\t\tif ( current.opts[ 'dblclick' + where ] && current.opts[ 'dblclick' + where ] !== current.opts[ 'click' + where ] ) {\n\t\t\t\tself.tapped = setTimeout(function() {\n\t\t\t\t\tself.tapped = null;\n\n\t\t\t\t\tprocess( 'click' + where );\n\n\t\t\t\t}, 300);\n\n\t\t\t} else {\n\t\t\t\tprocess( 'click' + where );\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t$(document).on('onActivate.eb', function (e, instance) {\n\t\tif ( instance && !instance.Guestures ) {\n\t\t\tinstance.Guestures = new Guestures( instance );\n\t\t}\n\t});\n\n\t$(document).on('beforeClose.eb', function (e, instance) {\n\t\tif ( instance && instance.Guestures ) {\n\t\t\tinstance.Guestures.destroy();\n\t\t}\n\t});\n\n\n}( window, document, window.jQuery || jQuery ));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-guestures.js","// ==========================================================================\n//\n// Thumbs\n// Displays thumbnails in a grid\n//\n// ==========================================================================\n;(function (document, $) {\n\t'use strict';\n\n\tvar FancyThumbs = function( instance ) {\n\t\tthis.instance = instance;\n\t\tthis.init();\n\t};\n\n\t$.extend( FancyThumbs.prototype, {\n\n\t\t$button     : null,\n\t\t$grid       : null,\n\t\t$list       : null,\n\t\tisVisible   : false,\n\n\t\tinit : function() {\n\t\t\tvar self = this;\n\n\t\t\tvar first  = self.instance.group[0],\n\t\t\t\tsecond = self.instance.group[1];\n\n\t\t\tself.$button = self.instance.$refs.toolbar.find( '[data-envirabox-thumbs]' );\n\n\t\t\tif ( self.instance.group.length > 1 && self.instance.group[ self.instance.currIndex ].opts.thumbs && (\n\t\t            ( first.type == 'image'  || first.opts.thumb  || first.opts.$thumb ) &&\n\t\t            ( second.type == 'image' || second.opts.thumb || second.opts.$thumb )\n\t\t\t)) {\n\n\t\t\t\tself.$button.on('click', function() {\n\t\t\t\t\tself.toggle();\n\t\t\t\t});\n\n\t\t\t\tself.isActive = true;\n\n\t\t\t} else {\n\t\t\t\tself.$button.hide();\n\n\t\t\t\tself.isActive = false;\n\t\t\t}\n\n\t\t},\n\n\t\tcreate : function() {\n\t\t\tvar instance = this.instance,\n\t\t\t\tlist,\n\t\t\t\tsrc;\n\n\t\t\tthis.$grid = $('<div class=\"envirabox-thumbs envirabox-thumbs-'+instance.opts.thumbs.position+'\"></div>').appendTo( instance.$refs.container );\n\n\t\t\tlist = '<ul>';\n\n\t\t\t$.each(instance.group, function( i, item ) {\n\n\t\t\t\tsrc = item.opts.thumb || ( item.opts.$thumb ? item.opts.$thumb.attr('src') : null );\n\n\t\t\t\tif ( !src && item.type === 'image' ) {\n\t\t\t\t\tsrc = item.src;\n\t\t\t\t}\n\n\t\t\t\tif ( src && src.length ) {\n\t\t\t\t\tlist += '<li data-index=\"' + i + '\"  tabindex=\"0\" class=\"envirabox-thumbs-loading\"><img data-src=\"' + src + '\" /></li>';\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tlist += '</ul>';\n\n\t\t\tthis.$list = $( list ).appendTo( this.$grid ).on('click', 'li', function() {\n\t\t\t\tinstance.jumpTo( $(this).data('index') );\n\t\t\t});\n\n\t\t\tthis.$list.find('img').hide().one('load', function() {\n\n\t\t\t\tvar $parent     = $(this).parent().removeClass( 'envirabox-thumbs-loading' ),\n\t\t\t\t\tthumbWidth  = $(this).outerWidth(),\n\t\t\t\t\tthumbHeight = $(this).outerHeight(),\n\t\t\t\t\twidth,\n\t\t\t\t\theight,\n\t\t\t\t\twidthRatio,\n\t\t\t\t\theightRatio;\n\n\t\t\t\twidth  = this.naturalWidth  || this.width;\n\t\t\t\theight = this.naturalHeight || this.height;\n\n\t\t\t\t// Calculate thumbnail width/height and center it\n\n\t\t\t\twidthRatio  = width  / thumbWidth;\n\t\t\t\theightRatio = height / thumbHeight;\n\n\t\t\t\tif ( widthRatio >= 1 && heightRatio >= 1 ) {\n\t\t\t\t\tif (widthRatio > heightRatio) {\n\t\t\t\t\t\twidth  = width / heightRatio;\n\t\t\t\t\t\theight = thumbHeight;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidth  = thumbWidth;\n\t\t\t\t\t\theight = height / widthRatio;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$(this).css({\n\t\t\t\t\twidth         : Math.floor(width),\n\t\t\t\t\theight        : Math.floor(height),\n\t\t\t\t\t'margin-top'  : Math.min( 0, Math.floor(thumbHeight * 0.3 - height * 0.3 ) ),\n\t\t\t\t\t'margin-left' : Math.min( 0, Math.floor(thumbWidth  * 0.5 - width  * 0.5 ) )\n\t\t\t\t}).show();\n\n\t\t\t})\n\t\t\t.each(function() {\n\t\t\t\tthis.src = $( this ).data( 'src' );\n\t\t\t});\n\n\t\t},\n\n\t\tfocus : function() {\n\n\t\t\tif ( this.instance.current ) {\n\t\t\t\tthis.$list\n\t\t\t\t\t.children()\n\t\t\t\t\t.removeClass( 'envirabox-thumbs-active' )\n\t\t\t\t\t.filter( '[data-index=\"' + this.instance.current.index  + '\"]' )\n\t\t\t\t\t.addClass( 'envirabox-thumbs-active' )\n\t\t\t\t\t.focus();\n\t\t\t}\n\n\t\t},\n\n\t\tclose : function() {\n\t\t\tthis.$grid.hide();\n\t\t},\n\n\t\tupdate : function() {\n\n\t\t\tthis.instance.$refs.container.toggleClass( 'envirabox-show-thumbs', this.isVisible );\n\n\t\t\tif ( this.isVisible ) {\n\n\t\t\t\tif ( !this.$grid ) {\n\t\t\t\t\tthis.create();\n\t\t\t\t}\n\n\t\t\t\tthis.instance.trigger( 'onThumbsShow' );\n\n\t\t\t\tthis.focus();\n\n\t\t\t} else if ( this.$grid ) {\n\t\t\t\tthis.instance.trigger( 'onThumbsHide' );\n\t\t\t}\n\n\t\t\t// Update content position\n\t\t\tthis.instance.update();\n\n\t\t},\n\n\t\thide : function() {\n\t\t\tthis.isVisible = false;\n\t\t\tthis.update();\n\t\t},\n\n\t\tshow : function() {\n\t\t\tthis.isVisible = true;\n\t\t\tthis.update();\n\t\t},\n\n\t\ttoggle : function() {\n\t\t\tthis.isVisible = !this.isVisible;\n\t\t\tthis.update();\n\t\t}\n\n\t});\n\n\t$(document).on({\n\n\t\t'onInit.eb' : function(e, instance) {\n\t\t\tif ( instance && !instance.Thumbs ) {\n\t\t\t\tinstance.Thumbs = new FancyThumbs( instance );\n\t\t\t}\n\t\t},\n\n\t\t'beforeShow.eb' : function(e, instance, item, firstRun) {\n\t\t\tvar Thumbs = instance && instance.Thumbs;\n\n\t\t\tif ( !Thumbs || !Thumbs.isActive ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( item.modal ) {\n\t\t\t\tThumbs.$button.hide();\n\n\t\t\t\tThumbs.hide();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( firstRun && item.opts.thumbs.autoStart === true ) {\n\t\t\t\tThumbs.show();\n\t\t\t}\n\n\t\t\tif ( Thumbs.isVisible ) {\n\t\t\t\tThumbs.focus();\n\t\t\t}\n\t\t},\n\n\t\t'afterKeydown.eb' : function(e, instance, current, keypress, keycode) {\n\t\t\tvar Thumbs = instance && instance.Thumbs;\n\n\t\t\t// \"G\"\n\t\t\tif ( Thumbs && Thumbs.isActive && keycode === 71 ) {\n\t\t\t\tkeypress.preventDefault();\n\n\t\t\t\tThumbs.toggle();\n\t\t\t}\n\t\t},\n\n\t\t'beforeClose.eb' : function( e, instance ) {\n\t\t\tvar Thumbs = instance && instance.Thumbs;\n\n\t\t\tif ( Thumbs && Thumbs.isVisible && instance.opts.thumbs.hideOnClose !== false ) {\n\t\t\t\tThumbs.close();\n\t\t\t}\n\t\t}\n\n\t});\n\n}(document, window.jQuery));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-thumbs.js","// ==========================================================================\n//\n// SlideShow\n// Enables slideshow functionality\n//\n// Example of usage:\n// $.envirabox.getInstance().SlideShow.start()\n//\n// ==========================================================================\n;(function (document, $) {\n\t'use strict';\n\n\tvar SlideShow = function( instance ) {\n\t\tthis.instance = instance;\n\t\tthis.init();\n\t};\n\n\t$.extend( SlideShow.prototype, {\n\t\ttimer    : null,\n\t\tisActive : false,\n\t\t$button  : null,\n\t\tspeed    : 3000,\n\n\t\tinit : function() {\n\t\t\tvar self = this;\n\n\t\t\tself.$button = $('[data-envirabox-play]').on('click', function() {\n\t\t\t\tself.toggle();\n\t\t\t});\n\n\t\t\tif ( self.instance.group.length < 2 || !self.instance.group[ self.instance.currIndex ].opts.slideShow ) {\n\t\t\t\tself.$button.hide();\n\t\t\t}\n\t\t},\n\n\t\tset : function() {\n\t\t\tvar self = this;\n\n\t\t\t// Check if reached last element\n\t\t\tif ( self.instance && self.instance.current && (self.instance.current.opts.loop || self.instance.currIndex < self.instance.group.length - 1 )) {\n\t\t\t\tself.timer = setTimeout(function() {\n\t\t\t\t\tself.instance.next();\n\n\t\t\t\t}, self.instance.current.opts.slideShow.speed || self.speed);\n\n\t\t\t} else {\n\t\t\t\tself.stop();\n\t\t\t\tself.instance.idleSecondsCounter = 0;\n\t\t\t\tself.instance.showControls();\n\t\t\t}\n\n\t\t},\n\n\t\tclear : function() {\n\t\t\tvar self = this;\n\n\t\t\tclearTimeout( self.timer );\n\n\t\t\tself.timer = null;\n\t\t},\n\n\t\tstart : function() {\n\t\t\tvar self = this;\n\t\t\tvar current = self.instance.current;\n\n\t\t\tif ( self.instance && current && ( current.opts.loop || current.index < self.instance.group.length - 1 )) {\n\n\t\t\t\tself.isActive = true;\n\n\t\t\t\tself.$button\n\t\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_STOP )\n\t\t\t\t\t.addClass( 'envirabox-button--pause' );\n\t\t\t\tself.$button.parent().addClass( 'envirabox-button--pause' );\n\t\t\t\tif ( current.isComplete ) {\n\t\t\t\t\tself.set();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tstop : function() {\n\t\t\tvar self = this;\n\t\t\tvar current = self.instance.current;\n\n\t\t\tself.clear();\n\n\t\t\tself.$button\n\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_START )\n\t\t\t\t.removeClass( 'envirabox-button--pause' );\n\t\t\t\tself.$button.parent().removeClass( 'envirabox-button--pause' );\n\n\t\t\tself.isActive = false;\n\t\t},\n\n\t\ttoggle : function() {\n\t\t\tvar self = this;\n\n\t\t\tif ( self.isActive ) {\n\t\t\t\tself.stop();\n\n\t\t\t} else {\n\t\t\t\tself.start();\n\t\t\t}\n\t\t}\n\n\t});\n\n\t$(document).on({\n\t\t'onInit.eb' : function(e, instance) {\n\t\t\tif ( instance && !instance.SlideShow ) {\n\t\t\t\tinstance.SlideShow = new SlideShow( instance );\n\t\t\t}\n\t\t},\n\n\t\t'beforeShow.eb' : function(e, instance, current, firstRun) {\n\t\t\tvar SlideShow = instance && instance.SlideShow;\n\n\t\t\tif ( firstRun ) {\n\n\t\t\t\tif ( SlideShow && current.opts.slideShow.autoStart ) {\n\t\t\t\t\tSlideShow.start();\n\t\t\t\t}\n\n\t\t\t} else if ( SlideShow && SlideShow.isActive )  {\n\t\t\t\tSlideShow.clear();\n\t\t\t}\n\t\t},\n\n\t\t'afterShow.eb' : function(e, instance, current) {\n\t\t\tvar SlideShow = instance && instance.SlideShow;\n\n\t\t\tif ( SlideShow && SlideShow.isActive ) {\n\t\t\t\tSlideShow.set();\n\t\t\t}\n\t\t},\n\n\t\t'afterKeydown.eb' : function(e, instance, current, keypress, keycode) {\n\t\t\tvar SlideShow = instance && instance.SlideShow;\n\n\t\t\t// \"P\" or Spacebar\n\t\t\tif ( SlideShow && current.opts.slideShow && ( keycode === 80 || keycode === 32 ) && !$(document.activeElement).is( 'button,a,input' ) ) {\n\t\t\t\tkeypress.preventDefault();\n\n\t\t\t\tSlideShow.toggle();\n\t\t\t}\n\t\t},\n\n\t\t'beforeClose.eb onDeactivate.eb' : function(e, instance) {\n\t\t\tvar SlideShow = instance && instance.SlideShow;\n\n\t\t\tif ( SlideShow ) {\n\t\t\t\tSlideShow.stop();\n\t\t\t}\n\t\t}\n\t});\n\n\t// Page Visibility API to pause slideshow when window is not active\n\t$(document).on(\"visibilitychange\", function() {\n\t\tvar instance  = $.envirabox.getInstance();\n\t\tvar SlideShow = instance && instance.SlideShow;\n\n\t\tif ( SlideShow && SlideShow.isActive ) {\n\t\t\tif ( document.hidden ) {\n\t\t\t\tSlideShow.clear();\n\n\t\t\t} else {\n\t\t\t\tSlideShow.set();\n\t\t\t}\n\t\t}\n\t});\n\n}(document, window.jQuery));\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/envirabox-slideshow.js","import enviraLazy from './lib/enviraLazy.js';\n\nclass Envira {\n\n\t/**\n\t * Constructor function for Envira.\n\t *\n\t * @since 1.7.1\n\t */\n\tconstructor( id, data, images, lightbox) {\n\n\t\tvar self = this;\n\n\t\t//Setup our Vars\n\t\tself.data = data;\n\t\tself.images = images;\n\t\tself.id = id;\n\t\tself.envirabox_config = lightbox;\n\t\tself.initImage = false;\n\n\t\t//Log if ENVIRA_DEBUG enabled\n\t\tself.log(self.data);\n\t\tself.log(self.images);\n\t\tself.log(self.envirabox_config);\n\t\tself.log(self.id);\n\n\t\t//self init\n\t\tself.init();\n\n\t}\n\n\t/**\n\t * Initizlize the proper scripts based on settings.\n\t *\n\t * @since 1.7.1\n\t */\n\tinit() {\n\n\t\tvar self = this;\n\n\t\t//Justified Gallery Setup\n\t\tif (self.get_config('columns') == 0) {\n\n\t\t\tself.justified();\n\n\t\t\tif (self.get_config('lazy_loading')) {\n\n\t\t\t\t$(document).on('envira_pagination_ajax_load_completed', function() {\n\n\t\t\t\t\t$('#envira-gallery-' + self.id).on('jg.complete', function(e) {\n\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tself.load_images();\n\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\tself.load_images();\n\n\t\t\t}\n\n\t\t\tif (self.get_config('justified_gallery_theme')) {\n\n\t\t\t\t//self.overlay_themes();\n\n\t\t\t}\n\n\t\t\t$(document).trigger('envira_gallery_api_justified', self.data);\n\n\t\t}\n\n\t\t//Lazy loading setup\n\t\tif ( self.get_config('lazy_loading') ) {\n\n\t\t\tself.load_images();\n\n\t\t\t$(window).scroll(function(e) {\n\n\t\t\t\tself.load_images();\n\n\t\t\t});\n\n\t\t}\n\n\t\t//Enviratope Setup\n\t\tif ( parseInt( self.get_config('columns') ) > 0 && self.get_config('isotope') ) {\n\n\t\t\tself.enviratopes();\n\t\t\t//Lazy loading setup\n\t\t\tif (self.get_config('lazy_loading')) {\n\n\t\t\t\t$( '#envira-gallery-' + self.id ).one('layoutComplete', function(e, laidOutItems) {\n\n\t\t\t\t\tself.load_images();\n\n\t\t\t\t});\n\n\t\t\t}\n\t\t} else if (  parseInt( self.get_config('columns') ) > 0) {\n\n\t\t\tself.load_images();\n\n\t\t}\n\n\t\t//Lightbox setup\n\t\tif (self.get_config('lightbox_enabled') || self.get_config('lightbox') ) {\n\n\t\t\tself.lightbox();\n\n\t\t}\n\n\t\t$(document).trigger('envira_gallery_api_init', self);\n\n\t}\n\n\t/**\n\t * LazyLoading\n\t *\n\t * @since 1.7.1\n\t */\n\tload_images() {\n\n\t\tvar self = this;\n\n\t\tself.log('running: ' + '#envira-gallery-' + self.id );\n\n\t\tenviraLazy.run('#envira-gallery-' + self.id );\n\n\t\tif ( $('#envira-gallery-' + self.id).hasClass('enviratope') ) {\n\n\t\t\t$('#envira-gallery-' + self.id).enviraImagesLoaded()\n\t\t\t\t.done(function() {\n\n\t\t\t\t\tsetTimeout(\n\t\t\t\t\t  function()\n\t\t\t\t\t  {\n\t\t\t\t\t    $('#envira-gallery-' + self.id).enviratope('layout');\n\t\t\t\t\t\tself.log('done: ' + '#envira-gallery-' + self.id );\n\t\t\t\t\t  }, 500);\n\n\n\t\t\t\t})\n\t\t\t\t.progress(function() {\n\t\t\t\t\t$('#envira-gallery-' + self.id).enviratope('layout');\n\t\t\t\t\tself.log('progress: ' + '#envira-gallery-' + self.id );\n\t\t\t\t});\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Outputs the gallery init script in the footer.\n\t *\n\t * @since 1.7.1\n\t */\n\tjustified() {\n\n\t\tvar self = this;\n\n\t\t$('#envira-gallery-' + self.id).enviraJustifiedGallery({\n\t\t\trowHeight: self.is_mobile() ? this.get_config('mobile_justified_row_height') : this.get_config('justified_row_height'),\n\t\t\tmaxRowHeight: -1,\n\t\t\twaitThumbnailsLoad: true,\n\t\t\tselector: '> div > div',\n\t\t\tlastRow: this.get_config('justified_last_row'),\n\t\t\tborder: 0,\n\t\t\tmargins: this.get_config('justified_margins'),\n\n\n\t\t});\n\n\t\t$(document).trigger('envira_gallery_api_start_justified', self );\n\n\t\t$('#envira-gallery-' + this.id).css('opacity', '1');\n\n\t}\n\n\n\tjustified_norewind() {\n\n\t\t$('#envira-gallery-' + self.id).enviraJustifiedGallery('norewind');\n\n\t}\n\t/**\n\t * Outputs the gallery init script in the footer.\n\t *\n\t * @since 1.7.1\n\t */\n\tenviratopes() {\n\n\t\t\tvar self = this;\n\n\n\t\t\tvar envira_isotopes_config = {\n\n\t\t\t\titemSelector: '.envira-gallery-item',\n\t\t\t\tmasonry: {\n\t\t\t\t\tcolumnWidth: '.envira-gallery-item'\n\t\t\t\t}\n\n\t\t\t};\n\t\t\t$(document).trigger('envira_gallery_api_enviratope_config', [ self ] );\n\n\t\t\t// Initialize Isotope\n\t\t\t$('#envira-gallery-' + self.id).enviratope( envira_isotopes_config );\n\t\t\t// Re-layout Isotope when each image loads\n\t\t\t$('#envira-gallery-' + self.id).enviraImagesLoaded()\n\t\t\t\t.done(function() {\n\t\t\t\t\t$('#envira-gallery-' + self.id).enviratope('layout');\n\t\t\t\t})\n\t\t\t\t.progress(function() {\n\t\t\t\t\t$('#envira-gallery-' + self.id).enviratope('layout');\n\t\t\t\t});\n\t\t\t$(document).trigger('envira_gallery_api_enviratope', [ self ] );\n\n\t\t}\n\t/**\n\t * Outputs the gallery init script in the footer.\n\t *\n\t * @since 1.7.1\n\t */\n\tlightbox() {\n\n\t\tvar self             = this,\n\t\t\ttouch            = self.get_config('mobile_touchwipe') ? { vertical: true, momentum: true } : false,\n\t\t\tthumbs           = self.get_config('thumbnails') ? { autoStart: true, hideOnClose: true, position: self.get_lightbox_config('thumbs_position') } : false,\n\t\t\tslideshow        = self.get_config('slideshow') ? { autoStart: self.get_config('autoplay'),speed: self.get_config('ss_speed') } : false,\n\t\t\tfullscreen       = self.get_config('fullscreen') && self.get_config('open_fullscreen') ? { autoStart: true } : true,\n\t\t\tanimationEffect  = self.get_config('lightbox_open_close_effect') == 'zomm-in-out' ? 'zoom-in-out' : self.get_config('lightbox_open_close_effect'),\n\t\t\ttransitionEffect = self.get_config('effect') == 'zomm-in-out' ? 'zoom' : self.get_config('effect'),\n\t\t\tlightbox_images  = [],\n\t\t\toverlay_divs     = '';\n\t\t\tself.lightbox_options = {\n\t\t\t\tselector:           '[data-envirabox=\"' + self.id + '\"]',\n\t\t\t\tloop:               self.get_config('loop'), // Enable infinite gallery navigation\n\t\t\t\tmargin:             self.get_lightbox_config('margins'), // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\n\t\t\t\tgutter:             self.get_lightbox_config('gutter'), // Horizontal space between slides\n\t\t\t\tkeyboard:           self.get_config('keyboard'), // Enable keyboard navigation\n\t\t\t\tarrows:             self.get_lightbox_config('arrows'), // Should display navigation arrows at the screen edges\n\t\t\t\tarrow_position:     self.get_lightbox_config('arrow_position'),\n\t\t\t\tinfobar:            self.get_lightbox_config('infobar'), // Should display infobar (counter and arrows at the top)\n\t\t\t\ttoolbar:            self.get_lightbox_config('toolbar'), // Should display toolbar (buttons at the top)\n\t\t\t\tidleTime:           self.get_lightbox_config('idle_time') ? self.get_lightbox_config('idle_time') : false, // by default there shouldn't be any, otherwise value is in seconds\n\t\t\t\tsmallBtn:           self.get_lightbox_config('show_smallbtn'),\n\t\t\t\tprotect:            false, // Disable right-click and use simple image protection for images\n\t\t\t\timage:              { preload: false },\n\t\t\t\tanimationEffect:    animationEffect,\n\t\t\t\tanimationDuration:  300, // Duration in ms for open/close animation\n\t\t\t    btnTpl : {\n\t\t\t        smallBtn   :        self.get_lightbox_config('small_btn_template'),\n\t\t\t\t},\n\t\t\t\tzoomOpacity:        'auto',\n\t\t\t\ttransitionEffect:   transitionEffect, // Transition effect between slides\n\t\t\t\ttransitionDuration: 200, // Duration in ms for transition animation\n\t\t\t\tbaseTpl:            self.get_lightbox_config('base_template'), // Base template for layout\n\t\t\t\tspinnerTpl:         '<div class=\"envirabox-loading\"></div>', // Loading indicator template\n\t\t\t\terrorTpl:           self.get_lightbox_config('error_template'), // Error message template\n\t\t\t\tfullScreen:         self.get_config('fullscreen') ? fullscreen : false,\n\t\t\t\ttouch:              touch, // Set `touch: false` to disable dragging/swiping\n\t\t\t\thash:               false,\n\t\t\t\tinsideCap:          self.get_lightbox_config('inner_caption'),\n\t\t\t\tcapPosition:        self.get_lightbox_config('caption_position'),\n\t\t\t\tmedia : {\n\t\t\t        youtube : {\n\t\t\t            params : {\n\t\t\t                autoplay : 0\n\t\t\t            }\n\t\t\t        }\n\t\t\t    },\n\t\t\t    wheel:              self.get_config('mousewheel') ? 'auto' : false,\n\t\t\t\tslideShow:          slideshow,\n\t\t\t\tthumbs:             thumbs,\n\t\t        mobile : {\n\t\t            clickContent : function( current, event ) {\n\t\t                return current.type === 'image' ? 'toggleControls' : false;\n\t\t            },\n\t\t            clickSlide : function( current, event ) {\n\t\t                return current.type === 'image' ? 'toggleControls' : 'close';\n\t\t            },\n\t\t            dblclickContent : false,\n\t\t            dblclickSlide :false,\n\t\t        },\n\t\t\t\t// Clicked on the content\n\t\t\t\tclickContent:   self.get_lightbox_config('click_content') ? self.get_lightbox_config('click_content') : 'toggleControls', // clicked on the image itself\n        // Clicked on the content\n      //  clickContent : function( current, event ) {\n        //    return current.type === 'image' ? 'zoom' : false;\n        //},\n\t\t\t\tclickSlide:     self.get_lightbox_config('click_slide')   ? self.get_lightbox_config('click_slide') : 'close', // clicked on the slide\n\t\t\t\tclickOutside:   self.get_lightbox_config('click_outside') ? self.get_lightbox_config('click_outside') : 'toggleControls', // clicked on the background (backdrop) element\n\n\t\t        // Same as previous two, but for double click\n\t\t        dblclickContent : false,\n\t\t        dblclickSlide   : false,\n\t\t        dblclickOutside : false,\n\n\t\t        // Video settings\n\t\t\t\tvideoPlayPause    \t : self.get_config('videos_playpause') ? true : false,\n\t\t\t\tvideoProgressBar  \t : self.get_config('videos_progress') ? true : false,\n\t\t\t\tvideoPlaybackTime  \t : self.get_config('videos_current') ? true : false,\n\t\t\t\tvideoVideoLength  \t : self.get_config('videos_duration') ? true : false,\n\t\t\t\tvideoVolumeControls  : self.get_config('videos_volume') ? true : false,\n\t\t\t\tvideoControlBar  \t : self.get_config('videos_controls') ? true : false,\n\t\t\t\tvideoFullscreen  \t : self.get_config('videos_fullscreen') ? true : false,\n\t\t\t\tvideoDownload  \t \t : self.get_config('videos_download') ? true : false,\t\t\t\t\n\n\t\t\t\t// Callbacks\n\t\t\t\t//==========\n\t\t\t\tonInit: function(instance, current) {\n\n\t\t\t\t\tself.initImage = true;\n\n\t\t\t\t\t$( document ).trigger( 'envirabox_api_on_init', [ self, instance, current ]  );\n\n\t\t\t\t},\n\n\t\t\t\tbeforeLoad: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_before_load', [ self, instance, current ]  );\n\n\t\t\t\t},\n\n\t\t\t\tafterLoad: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_after_load', [ self, instance, current ]  );\n\n\t\t\t\t},\n\n\t\t\t\tbeforeShow: function(instance, current) {\n\n\t\t\t\t\tconsole.log ('current');\n\t\t\t\t\tconsole.log ( current );\n\t\t\t\t\tconsole.log ('self');\n\t\t\t\t\tconsole.log ( self );\n\n\t\t\t\t\tif ( self.data.lightbox_theme == 'base' && overlay_divs == '' && $('.envirabox-position-overlay').length > 0 ) {\n\t\t\t\t\t\toverlay_divs = $('.envirabox-position-overlay');\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log ('overlay_divs');\n\t\t\t\t\tconsole.log ( overlay_divs );\n\n\t\t\t\t\tself.initImage = false;\n\n\t\t\t\t\t$(document).trigger('envirabox_api_before_show', [ self, instance, current ]  );\n\n\t\t\t\t},\n\t\t\t\tafterShow: function(instance, current) {\n\n\t\t\t\t\tif ( prepend == undefined || prepend_cap == undefined){\n\n\t\t\t\t\t\tvar prepend     = false,\n\t\t\t\t\t\t\tprepend_cap = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( prepend != true ){\n\n\t\t\t\t\t\t$('.envirabox-position-overlay').each(function(){\n\t\t\t\t\t\t\t$(this).prependTo( current.$content );\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tprepend = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* support older galleries or if someone overrides the keyboard configuration via a filter, etc. */\n\n\t\t\t\t\tif( self.get_config('keyboard') !== undefined && self.get_config('keyboard') === 0 ) {\n\n\t\t\t\t\t\t$(window).keypress(function(event){\n\n\t\t\t\t\t\t    if([32, 37, 38, 39, 40].indexOf(event.keyCode) > -1) {\n\t\t\t\t\t\t        event.preventDefault();\n\t\t\t\t\t\t    }\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t\t/* legacy theme we hide certain elements initially to prevent user seeing them for a second in the upper left until the CSS fully loads */\n\t\t\t\t\t$('.envirabox-caption').show();\n\t\t\t\t\t$('.envirabox-navigation').show();\n\t\t\t\t\t$('.envirabox-navigation-inside').show();\n\n\t\t\t\t\t/* if there's overlay divs to show, show them (applies again only to legacy) */\n\n\t\t\t\t\tconsole.log ('aftershow overlay_divs');\n\t\t\t\t\tconsole.log ( overlay_divs );\n\t\t\t\t\tconsole.log ('aftershow check');\n\t\t\t\t\tconsole.log ( $('.envirabox-image-wrap').length );\n\n\t\t\t\t\tif ( overlay_divs !== undefined && overlay_divs != '' && $('.envirabox-slide--current .envirabox-image-wrap').length > 0 ) {\n\t\t\t\t\t\t$( '.envirabox-image-wrap' ).prepend( overlay_divs );\n\t\t\t\t\t} else if ( overlay_divs !== undefined && overlay_divs != '' && $('.envirabox-slide--current .envirabox-content').length > 0 ) {\n\t\t\t\t\t\t$( '.envirabox-content' ).prepend( overlay_divs );\n\t\t\t\t\t}\n\n\t\t\t\t\t$(document).trigger('envirabox_api_after_show', [ self, instance, current ] );\n\n\t\t\t\t},\n\n\t\t\t\tbeforeClose: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_before_close', [ self, instance, current ]  );\n\n\t\t\t\t},\n\t\t\t\tafterClose: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_after_close', [ self, instance, current ]  );\n\n\t\t\t\t},\n\n\t\t\t\tonActivate: function(instance, current) {\n\n\t\t\t\t\t$( document ).trigger('envirabox_api_on_activate', [ self, instance, current ] );\n\n\t\t\t\t},\n\t\t\t\tonDeactivate: function( instance, current ) {\n\n\t\t\t\t\t$( document ).trigger('envirabox_api_on_deactivate', [ self, instance, current ] );\n\n\t\t\t\t},\n\n\t\t\t};\n\t\t// Mobile Overrides\n\t\tif ( self.is_mobile() ){\n\n\t\t\tif ( self.get_config('mobile_thumbnails') !== 1 ) {\n\t\t\t\tself.lightbox_options.thumbs = false;\n\t\t\t}\n\n\t\t}\n\t\t// Load from json object if load all images is ture\n\t\tif ( self.get_lightbox_config( 'load_all') ) {\n\n\t\t\t$.each( self.images, function(i){\n\n\t\t\t\tlightbox_images.push( this );\n\n\t\t\t});\n\n\n\t\t} else {\n\n\t\t\tlet $images = $('.envira-gallery-' + self.id );\n\n\t\t\t$.each( $images, function(i){\n\t\t\t\tlightbox_images.push( this );\n\t\t\t});\n\n\n\t\t}\n\n\t\t$('#envira-gallery-wrap-' + self.id + ' .envira-gallery-link' ).on(\"click\", function(e){\n\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tvar index   = $(this).find('img').data('envira-index'),\n\t\t\t\tsrc     = $(this).find('img').attr('src'),\n\t\t\t\tfound   = false;\n\n\t\t\t// Override index if sorting is random or pagination is on\n\t\t\tif ( self.get_config( 'pagination') === 1 || self.get_config( 'sort_order' ) == \"1\" || index === 0 ) {\n\n\t\t\t\tObject.entries(lightbox_images).forEach((entry) => {\n\t\t\t\t\tconst [key, value] = entry;\n\t\t\t\t\tif ( value.src == src ) {\n\t\t\t\t\t\tindex = key;\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tif ( found !== true ) {\n\n\t\t\t\t\tObject.entries(lightbox_images).forEach((entry) => {\n\t\t\t\t\t\tconst [key, value] = entry;\n\t\t\t\t\t\tif ( value.src == $(this).attr('href') ) {\n\t\t\t\t\t\t\tindex = key;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\t$.envirabox.open( lightbox_images, self.lightbox_options, index );\n\n\t\t});\n\n\t\t$(document).trigger('envirabox_lightbox_api', self );\n\n\t}\n\n\t/**\n\t * Get a config option based off of a key.\n\t *\n\t * @since 1.7.1\n\t */\n\tget_config(key) {\n\n\t\treturn this.data[key];\n\n\t}\n\n\t/**\n\t * Helper method to get config by key.\n\t *\n\t * @since 1.7.1\n\t */\n\tget_lightbox_config(key) {\n\n\t\treturn this.envirabox_config[key];\n\n\t}\n\n\t/**\n\t * Helper method to get image from id\n\t *\n\t * @since 1.7.1\n\t */\n\tget_image(id) {\n\n\t\treturn this.images[id];\n\n\t}\n\tis_mobile(){\n\t\tif( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t/**\n\t * Helper method for logging if ENVIRA_DEBUG is true.\n\t *\n\t * @since 1.7.1\n\t */\n\tlog(log) {\n\n\t\t//Bail if debug or log is not set.\n\t\tif (envira_gallery.debug == undefined || !envira_gallery.debug || log == undefined) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tconsole.log(log);\n\n\t}\n\n}\n\nmodule.exports = Envira;\n\n\n// WEBPACK FOOTER //\n// ./assets/js/gallery-init.js","/*\n * Responsively Lazy\n * http://ivopetkov.com/b/lazy-load-responsive-images/\n * Copyright 2015-2016, Ivo Petkov\n * Free to use under the MIT license.\n */\nvar\tenviraLazy = (function () {\n\n    var hasWebPSupport = false,\n    \twindowWidth = null,\n    \twindowHeight = null,\n    \tjustifiedReady = false,\n    \tgalleryClass = false,\n    \thasIntersectionObserverSupport = typeof IntersectionObserver !== 'undefined';\n\n    var isVisible = function (element) {\n\n        if (windowWidth === null) {\n\n            windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n            windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\n            if (windowWidth === null) {\n                return false;\n            }\n        }\n\n        var rect = element.getBoundingClientRect();\n\n        var elementTop = rect.top;\n        var elementLeft = rect.left;\n        var elementWidth = rect.width;\n        var elementHeight = rect.height;\n        var test = elementTop < windowHeight && elementTop + elementHeight > 0 && elementLeft < windowWidth && elementLeft + elementWidth > 0;\n\n        if ( test === false ) {\n        }\n        return test;\n\n\n    };\n\n    jQuery.fn.exists = function(){return this.length>0;}\n\n    var updateElement = function (container, element) {\n        var options = element.getAttribute('data-envira-srcset');\n        if (options !== null) {\n            options = options.trim();\n            if (options.length > 0) {\n                options = options.split(',');\n                var temp = [];\n                var optionsCount = options.length;\n                for (var j = 0; j < optionsCount; j++) {\n                    var option = options[j].trim();\n                    if (option.length === 0) {\n                        continue;\n                    }\n                    var spaceIndex = option.lastIndexOf(' ');\n                    if (spaceIndex === -1) {\n                        var optionImage = option;\n                        var optionWidth = 999998;\n                    } else {\n                        var optionImage = option.substr(0, spaceIndex);\n                        var optionWidth = parseInt(option.substr(spaceIndex + 1, option.length - spaceIndex - 2), 10);\n                    }\n                    var add = false;\n                    if (optionImage.indexOf('.webp', optionImage.length - 5) !== -1) {\n                        if (hasWebPSupport) {\n                            add = true;\n                        }\n                    } else {\n                        add = true;\n                    }\n                    if (add) {\n                        temp.push([optionImage, optionWidth]);\n                    }\n                }\n                temp.sort(function (a, b) {\n                    if (a[1] < b[1]) {\n                        return -1;\n                    }\n                    if (a[1] > b[1]) {\n                        return 1;\n                    }\n                    if (a[1] === b[1]) {\n                        if (b[0].indexOf('.webp', b[0].length - 5) !== -1) {\n                            return 1;\n                        }\n                        if (a[0].indexOf('.webp', a[0].length - 5) !== -1) {\n                            return -1;\n                        }\n                    }\n                    return 0;\n                });\n                options = temp;\n            } else {\n                options = [];\n            }\n        } else {\n            options = [];\n        }\n\n        var containerWidth = container.offsetWidth * window.devicePixelRatio;\n\n        var bestSelectedOption = null;\n        var optionsCount = options.length;\n        for (var j = 0; j < optionsCount; j++) {\n            var optionData = options[j];\n            if (optionData[1] >= containerWidth) {\n                bestSelectedOption = optionData;\n                break;\n            } else {\n\n            }\n        }\n\n        if (bestSelectedOption === null) {\n            bestSelectedOption = [element.getAttribute('data-envira-src'), 999999];\n        }\n\n        if (typeof container.lastSetOption === 'undefined') {\n            container.lastSetOption = ['', 0];\n        }\n        if (container.lastSetOption[1] < bestSelectedOption[1]) {\n            var fireEvent = container.lastSetOption[1] === 0;\n            var url = bestSelectedOption[0];\n            var image = new Image();\n            image.addEventListener('load', function () {\n                element.setAttribute('srcset', url);\n                element.setAttribute('src', url);\n                if (fireEvent) {\n                    var handler = container.getAttribute('data-onlazyload');\n                    if (handler !== null) {\n                        (new Function(handler).bind(container))();\n                    }\n                }\n            }, false);\n            image.addEventListener('error', function () {\n                container.lastSetOption = ['', 0];\n            }, false);\n\n            image.onload = function () {\n\n                if ( container.getAttribute('class') == 'envira-lazy' && $(container).not( \"img\" ) ) {\n                    // this is a legacy layout\n                    var the_image = container.firstElementChild;\n                    var the_container = container;\n                    var image_id = the_image.id;\n                    var image_src = the_image.src;\n                    var gallery_id = jQuery(the_image).data('envira-gallery-id');\n                    var naturalWidth = this.naturalWidth;\n                    var naturalHeight = this.naturalHeight;\n                } else {\n                    // we are going with the automatic\n                    var the_image = image;\n                    var the_container = container;\n                    var image_id = container.id;\n                    var image_src = container.src;\n                    var gallery_id = jQuery(container).data('envira-gallery-id');\n                    var naturalWidth = this.naturalWidth;\n                    var naturalHeight = this.naturalHeight;\n\n                }\n\n                /* type check */\n\n                if ( gallery_id === undefined || gallery_id === null ) {\n                    gallery_id = 0;\n                }\n\n                jQuery( document ).trigger( {\n                    type:           'envira_image_lazy_load_complete',\n                    container:      the_container,\n                    image_src:      image_src,\n                    image_id:       image_id,\n                    gallery_id:     gallery_id,\n                    naturalWidth:   naturalWidth,\n                    naturalHeight:  naturalHeight,\n                } );\n\n            }\n            image.onerror = function () {\n               console.error(\"Cannot load image\");\n               //do something else...\n            }\n\n            // Null assignment could have been for IE, but shows as 404 in Safari web console (although everything else is fine).\n            // This should be confirmed to be working, then removed (Chrome/Firefox testing looks ok)\n            // image.src = null;\n            image.src = url;\n\n            container.lastSetOption = bestSelectedOption;\n\n        }\n    };\n\n    var updateWindowSize = function () {\n\n        windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n        windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\n    };\n\n    var setGalleryClass = function ( theClass ) {\n        galleryClass = theClass;\n        alert ('setting - ' + galleryClass);\n    }\n\n    var run = function ( galleryClass ) {\n\n        if ( typeof galleryClass === 'undefined' ) {\n            return;\n        }\n\n        var update = function (elements, unknownHeight) {\n            var elementsCount = elements.length;\n            for (var i = 0; i < elementsCount; i++) {\n                var element = elements[i];\n                var container = unknownHeight ? element : element.parentNode;\n                if ( isVisible(container) === true ) {\n                    updateElement(container, element);\n                }\n            }\n        };\n        if ( galleryClass ) {\n\n            if ( typeof galleryClass !== 'string' ) {\n\n                return;\n\n            }\n\n            if ( envira_gallery.ll_delay === 'undefined' || envira_gallery.ll_initial === false || envira_gallery.ll_initial === 'undefined' ) {\n\n                /* if we can't locate these vars, at least define the delay - there is no delay, super fast */\n                envira_gallery.ll_delay = 0;\n\n            }\n\n\n            var myVar = setTimeout(function () {\n\n                if ( jQuery( galleryClass + ' div.envira-lazy > img').exists() ) {\n                    // alert('1');\n                    update(document.querySelectorAll(galleryClass + ' div.envira-lazy > img'), false);\n                } else if ( jQuery(  galleryClass + ' img.envira-lazy').exists() ) {\n                    // alert('2');\n                    update(document.querySelectorAll(galleryClass + ' img.envira-lazy'), true);\n                }\n\n                envira_gallery.ll_initial == true; // ok, we did the initial load so now delay can happen\n\n            }, envira_gallery.ll_delay );\n\n\n\n\n        }\n        //update(document.querySelectorAll('img.envira-lazy'), true);\n    };\n\n    if ('srcset' in document.createElement('img') && typeof window.devicePixelRatio !== 'undefined' && typeof window.addEventListener !== 'undefined' && typeof document.querySelectorAll !== 'undefined') {\n\n        updateWindowSize();\n\n        var image = new Image();\n        image.src = 'data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEADMDOJaQAA3AA/uuuAAA=';\n        image.onload = image.onerror = function () {\n            hasWebPSupport = image.width === 2;\n            if (hasIntersectionObserverSupport) {\n\n                var updateIntersectionObservers = function () {\n                    var elements = document.querySelectorAll('.envira-lazy');\n                    var elementsCount = elements.length;\n                    for (var i = 0; i < elementsCount; i++) {\n                        var element = elements[i];\n                        if (typeof element.responsivelyLazyObserverAttached === 'undefined') {\n                            element.responsivelyLazyObserverAttached = true;\n                            intersectionObserver.observe(element);\n                        }\n                    }\n                };\n\n                var intersectionObserver = new IntersectionObserver(function (entries) {\n                    for (var i in entries) {\n                        var entry = entries[i];\n                        if (entry.intersectionRatio > 0) {\n                            var target = entry.target;\n                            if (target.tagName.toLowerCase() !== 'img') {\n                                var img = target.querySelector('img');\n                                if (img !== null) {\n                                    updateElement(target, img);\n                                }\n                            } else {\n                                updateElement(target, target);\n                            }\n                        }\n                    }\n                });\n\n                run();\n\n            } else {\n\n                var requestAnimationFrameFunction = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) {\n                    window.setTimeout(callback, 1000 / 60);\n                };\n\n                var hasChange = true;\n                var runIfHasChange = function () {\n                    if ( hasChange ) {\n                        hasChange = false;\n                        // run();\n                    }\n                    requestAnimationFrameFunction.call(null, runIfHasChange);\n                };\n\n\n\n                var setChanged = function () {\n                    hasChange = true;\n                    runIfHasChange();\n                };\n\n                var updateParentNodesScrollListeners = function () {\n                    var elements = document.querySelectorAll('.envira-lazy');\n                    var elementsCount = elements.length;\n                    for (var i = 0; i < elementsCount; i++) {\n                        var parentNode = elements[i].parentNode;\n                        while (parentNode && parentNode.tagName.toLowerCase() !== 'html') {\n                            if (typeof parentNode.responsivelyLazyScrollAttached === 'undefined') {\n                                parentNode.responsivelyLazyScrollAttached = true;\n                                parentNode.addEventListener('scroll', setChanged);\n                            }\n                            parentNode = parentNode.parentNode;\n                        }\n                    }\n                };\n\n                //runIfHasChange();\n\n            }\n\n            var attachEvents = function () {\n                if (hasIntersectionObserverSupport) {\n                    var resizeTimeout = null;\n                }\n                window.addEventListener('resize', function () {\n                    updateWindowSize();\n                    if (hasIntersectionObserverSupport) {\n                        window.clearTimeout(resizeTimeout);\n                        resizeTimeout = window.setTimeout(function () {\n                            run();\n                        }, 300);\n                    } else {\n                        setChanged();\n                    }\n                });\n                if (hasIntersectionObserverSupport) {\n                    window.addEventListener('load', run);\n                    updateIntersectionObservers();\n                } else {\n                    window.addEventListener('scroll', setChanged);\n                    window.addEventListener('load', setChanged);\n                    updateParentNodesScrollListeners();\n                }\n                if (typeof MutationObserver !== 'undefined') {\n                    var observer = new MutationObserver(function () {\n                        if (hasIntersectionObserverSupport) {\n                            updateIntersectionObservers();\n                            run();\n                        } else {\n                            updateParentNodesScrollListeners();\n                            setChanged();\n                        }\n                    });\n                    observer.observe(document.querySelector('body'), {childList: true, subtree: true});\n                }\n            };\n\n            if (document.readyState === 'loading') {\n                document.addEventListener('DOMContentLoaded', attachEvents);\n            } else {\n                attachEvents();\n            }\n        };\n    }\n\n    return {\n        'run': run,\n        'isVisible': isVisible,\n        'setGalleryClass': setGalleryClass\n    };\n\n}());\nwindow.enviraLazy = enviraLazy;\n\nmodule.exports = enviraLazy;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/lib/enviraLazy.js","class Envira_Link {\n\n    constructor( data, images, lightbox) {\n\n        var self = this;\n\n\t\t//Setup our Vars\n\t\tself.data = data;\n\t\tself.images = images;\n\t\tself.id = this.get_config('gallery_id');\n\t\tself.envirabox_config = lightbox;\n\n\t\t//Log if ENVIRA_DEBUG enabled\n\t\tself.log(self.data);\n\t\tself.log(self.images);\n\t\tself.log(self.envirabox_config);\n\t\tself.log(self.id);\n\n        self.init();\n\n    }\n\n    init() {\n\n\t\tvar self = this;\n\n\t\tself.lightbox();\n\n    }\n\n\t/**\n\t * Outputs the gallery init script in the footer.\n\t *\n\t * @since 1.7.1\n\t */\n\tlightbox() {\n\n\t\tvar self            = this,\n\t\t\ttouch           = self.get_config('mobile_touchwipe') ? { vertical: true, momentum: true } : false,\n\t\t\tthumbs          = self.get_config('thumbnails') ? { autoStart: true, hideOnClose: true, position: self.get_lightbox_config('thumbs_position') } : false,\n\t\t\tslideshow       = self.get_config('slideshow') ? { autoStart: self.get_config('autoplay'),speed: self.get_config('ss_speed') } : false,\n\t\t\tfullscreen      = self.get_config('fullscreen') && self.get_config('open_fullscreen') ? { autoStart: true } : true,\n\t\t\tanimationEffect  = self.get_config('lightbox_open_close_effect') == 'zomm-in-out' ? 'zoom-in-out' : self.get_config('lightbox_open_close_effect'),\n\t\t\ttransitionEffect = self.get_config('effect') == 'zomm-in-out' ? 'zoom' : self.get_config('effect'),\n\t\t\tlightbox_images  = [];\n\t\t\tself.lightbox_options = {\n\t\t\t\tselector:           '[data-envirabox=\"' + self.id + '\"]',\n\t\t\t\tloop:               self.get_config('loop'), // Enable infinite gallery navigation\n\t\t\t\tmargin:             self.get_lightbox_config('margins'), // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\n\t\t\t\tgutter:             self.get_lightbox_config('gutter'), // Horizontal space between slides\n\t\t\t\tkeyboard:           self.get_config('keyboard'), // Enable keyboard navigation\n\t\t\t\tarrows:             self.get_lightbox_config('arrows'), // Should display navigation arrows at the screen edges\n\t\t\t\tarrow_position:     self.get_lightbox_config('arrow_position'),\n\t\t\t\tinfobar:            self.get_lightbox_config('infobar'), // Should display infobar (counter and arrows at the top)\n\t\t\t\ttoolbar:            self.get_lightbox_config('toolbar'), // Should display toolbar (buttons at the top)\n\t\t\t\tidleTime:           60, // Detect \"idle\" time in seconds\n\t\t\t\tsmallBtn:           self.get_lightbox_config('show_smallbtn'),\n\t\t\t\tprotect:            false, // Disable right-click and use simple image protection for images\n\t\t\t\timage:              { preload: false },\n\t\t\t\tanimationEffect:    animationEffect,\n\t\t\t\tanimationDuration:  300, // Duration in ms for open/close animation\n\t\t\t    btnTpl : {\n\t\t\t        smallBtn   :        self.get_lightbox_config('small_btn_template'),\n\t\t\t\t},\n\t\t\t\tzoomOpacity:        'auto',\n\t\t\t\ttransitionEffect:   transitionEffect, // Transition effect between slides\n\t\t\t\ttransitionDuration: 200, // Duration in ms for transition animation\n\t\t\t\tbaseTpl:            self.get_lightbox_config('base_template'), // Base template for layout\n\t\t\t\tspinnerTpl:         '<div class=\"envirabox-loading\"></div>', // Loading indicator template\n\t\t\t\terrorTpl:           self.get_lightbox_config('error_template'), // Error message template\n\t\t\t\tfullScreen:         self.get_config('fullscreen') ? fullscreen : false,\n\t\t\t\ttouch:              touch, // Set `touch: false` to disable dragging/swiping\n\t\t\t\thash:               false,\n\t\t\t\tinsideCap:          self.get_lightbox_config('inner_caption'),\n\t\t\t    media : {\n\t\t\t        youtube : {\n\t\t\t            params : {\n\t\t\t                autoplay : 0\n\t\t\t            }\n\t\t\t        }\n\t\t\t    },\n\t\t\t    wheel:              self.get_config('mousewheel') ? 'auto' : false,\n\t\t\t\tslideShow:          slideshow,\n\t\t\t\tthumbs:             thumbs,\n\t\t        mobile : {\n\t\t            clickContent : function( current, event ) {\n\t\t                return current.type === 'image' ? 'toggleControls' : false;\n\t\t            },\n\t\t            clickSlide : function( current, event ) {\n\t\t                return current.type === 'image' ? 'toggleControls' : 'close';\n\t\t            },\n\t\t            dblclickContent : false,\n\t\t            dblclickSlide :false,\n\t\t        },\n\t\t\t\t// Clicked on the content\n\t\t\t\tclickContent: false,\n\t\t\t\tclickSlide: 'toggleControls', // Clicked on the slide\n\t\t\t\tclickOutside: 'close', // Clicked on the background (backdrop) element\n\n\t\t        // Same as previous two, but for double click\n\t\t        dblclickContent : false,\n\t\t        dblclickSlide   : false,\n\t\t        dblclickOutside : false,\n\n\t\t\t\t// Callbacks\n\t\t\t\t//==========\n\t\t\t\tonInit: function(instance, current) {\n\n\t\t\t\t\t$( document ).trigger( 'envirabox_api_on_init', [ self, instance, current ]  );\n\t\t\t\t},\n\n\t\t\t\tbeforeLoad: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_before_load', [ self, instance, current ]  );\n\n\t\t\t\t},\n\t\t\t\tafterLoad: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_after_load', [ self, instance, current ]  );\n\n\t\t\t\t},\n\n\t\t\t\tbeforeShow: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_before_show', [ self, instance, current ]  );\n\n\t\t\t\t},\n\t\t\t\tafterShow: function(instance, current) {\n\n\t\t\t\t\tif ( prepend == undefined || prepend_cap == undefined){\n\n\t\t\t\t\t\tvar prepend     = false,\n\t\t\t\t\t\t\tprepend_cap = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( prepend != true ){\n\n\t\t\t\t\t\t$('.envirabox-position-overlay').each(function(){\n\t\t\t\t\t\t\t$(this).prependTo( current.$content );\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tprepend = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* support older galleries or if someone overrides the keyboard configuration via a filter, etc. */\n\t\t\t\t\t\n\t\t\t\t\tif( self.get_config('keyboard') !== undefined && self.get_config('keyboard') === 0 ) {\n\n\t\t\t\t\t\t$(window).keypress(function(event){\n\n\t\t\t\t\t\t    if([32, 37, 38, 39, 40].indexOf(event.keyCode) > -1) {\n\t\t\t\t\t\t        event.preventDefault();\n\t\t\t\t\t\t    }\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t\t/* legacy theme we hide certain elements initially to prevent user seeing them for a second in the upper left until the CSS fully loads */\n\t\t\t\t\t$('.envirabox-caption').show();\n\t\t\t\t\t$('.envirabox-navigation').show();\n\t\t\t\t\t$('.envirabox-navigation-inside').show();\n\n\t\t\t\t\t$(document).trigger('envirabox_api_after_show', [ self, instance, current ] );\n\n\t\t\t\t},\n\n\t\t\t\tbeforeClose: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_before_close', [ self, instance, current ]  );\n\n\t\t\t\t},\n\t\t\t\tafterClose: function(instance, current) {\n\n\t\t\t\t\t$(document).trigger('envirabox_api_after_close', [ self, instance, current ]  );\n\n\t\t\t\t},\n\n\t\t\t\tonActivate: function(instance, current) {\n\n\t\t\t\t\t$( document ).trigger('envirabox_api_on_activate', [ self, instance, current ] );\n\n\t\t\t\t},\n\t\t\t\tonDeactivate: function( instance, current ) {\n\n\t\t\t\t\t$( document ).trigger('envirabox_api_on_deactivate', [ self, instance, current ] );\n\n\t\t\t\t},\n\n\t\t\t};\n\n\t\t$(document).trigger( 'envirabox_options', self );\n\n\t\t// Mobile Overrides\n\t\tif ( self.is_mobile() ){\n\n\t\t\tif ( self.get_config('mobile_thumbnails') !== 1 ) {\n\t\t\t\tself.lightbox_options.thumbs = false;\n\t\t\t}\n\n\t\t}\n\n\t\t$.each( self.images, function(i){\n\n\t\t\tlightbox_images.push( this );\n\n\t\t\t/* is video? */\n\t\t\t\n\t\t\tvar video_defaults = {\n\t\t\t\tyoutube : {\n\t\t\t\t\tmatcher : /(youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(watch\\?(.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(.*)|[\\w-]{11}|\\?listType=(.*)&list=(.*))(.*)/i,\n\t\t\t\t\tparamPlace : 8,\n\t\t\t\t\ttype  : 'iframe',\n\t\t\t\t\turl   : '//www.youtube.com/embed/$4',\n\t\t\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\n\t\t\t\t},\n\n\t\t\t\tvimeo : {\n\t\t\t\t\tmatcher : /^.+vimeo.com\\/(.*\\/)?([\\d]+)(.*)?/,\n\t\t\t\t\tparamPlace : 3,\n\t\t\t\t\ttype : 'iframe',\n\t\t\t\t\turl : '//player.vimeo.com/video/$2'\n\t\t\t\t},\n\n\t\t\t\tmetacafe : {\n\t\t\t\t\tmatcher : /metacafe.com\\/watch\\/(\\d+)\\/(.*)?/,\n\t\t\t\t\ttype    : 'iframe',\n\t\t\t\t\turl     : '//www.metacafe.com/embed/$1/?ap=1'\n\t\t\t\t},\n\n\t\t\t\tdailymotion : {\n\t\t\t\t\tmatcher : /dailymotion.com\\/video\\/(.*)\\/?(.*)/,\n\t\t\t\t\ttype : 'iframe',\n\t\t\t\t\turl  : '//www.dailymotion.com/embed/video/$1'\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tinstagram : {\n\t\t\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/p\\/([a-zA-Z0-9_\\-]+)\\/?/i,\n\t\t\t\t\ttype    : 'image',\n\t\t\t\t\turl     : '//$1/p/$2/media/?size=l'\n\t\t\t\t},\n\n\t\t\t};\n\n\t\t\tvar media = $.extend( true, {}, video_defaults );\n\t\t\tvar url = this.link;\n\n\t\t\t// Look for any matching media type\n\t\t\t$.each(media, function ( n, el ) {\n\t\t\t\t\n\t\t\t\tvar rez = url.match(el.matcher);\n\n\t\t\t\tif (!rez) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.video = true;\n\t\t\t\tthis.src = this.link;\n\n\t\t\t});\n\n\n\n\t\t\tconsole.log('pushing');\n\t\t\tconsole.log(this);\n\n\t\t});\n\n\t\tconsole.log(self.id);\n\t\tconsole.log('self.id');\n\n        $('#envira-links-' + self.id ).on( 'click', function(e){\n\n\t        e.preventDefault();\n\t\t\te.stopPropagation();\n\n\t\t\tvar $this               = $( this ),\n\t\t\t\timages              = [],\n\t\t\t\t$envira_images      = $this.data('gallery-images'),\n\t\t\t\tsorted_ids          = $this.data('gallery-sort-ids'), // sort by sort ids, not by output of gallery-images, because retaining object key order between unserialisation and serialisation in JavaScript is never guaranteed.\n\t\t\t\tsorting_factor      = sorted_ids !== undefined && self.data.gallery_sort == 'gallery' ? 'id' : 'image',\n\t\t\t\tsorting_factor_data = sorted_ids !== undefined && self.data.gallery_sort == 'gallery' ? sorted_ids : $envira_images,\t\t\t\t\n\t\t\t\tactive              = $.envirabox.getInstance();\n\n\n\t\t\t\t// backup plan in case there isn't sorted_ids, we keep the lightbox_images even though this is probably not sorted\n\t\t\t\tif ( sorted_ids !== undefined && sorted_ids != '' ) {\n\n\t\t\t\t\tlightbox_images = [];\n\n\t\t\t\t\t$.each( sorted_ids, function( i, val ){\n\t\t\t\t\t\tlightbox_images.push( sorting_factor_data[val] );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t\tif ( active ) {\n\t\t\t\t\tconsole.log('envirabox.getInstance ACTIVE');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\tconsole.log('lightbox_images');\n\t\t\tconsole.log(lightbox_images);\n\n\t\t\t$.envirabox.open( lightbox_images, self.lightbox_options );\n\n        });\n\n\n\n\n\t}\n\n\t/**\n\t * Get a config option based off of a key.\n\t *\n\t * @since 1.7.1\n\t */\n\tget_config(key) {\n\n\t\tvar self = this;\n\n\t\treturn self.data[key];\n\n\t}\n\n\t/**\n\t * Helper method to get config by key.\n\t *\n\t * @since 1.7.1\n\t */\n\tget_lightbox_config(key) {\n\n\t\tvar self = this;\n\n\t\treturn self.envirabox_config[key];\n\n\t}\n\n\t/**\n\t * Helper method to get image from id\n\t *\n\t * @since 1.7.1\n\t */\n\tget_image(id) {\n\n\t\tvar self = this;\n\n\t\treturn self.images[id];\n\n\t}\n\tis_mobile(){\n\t\tif( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t/**\n\t * Helper method for logging if ENVIRA_DEBUG is true.\n\t *\n\t * @since 1.7.1\n\t */\n\tlog(log) {\n\n\t\t//Bail if debug or log is not set.\n\t\tif (envira_gallery.debug == undefined || !envira_gallery.debug || log == undefined) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tconsole.log(log);\n\n\t}\n\n}\n\nmodule.exports = Envira_Link;\n\n\n// WEBPACK FOOTER //\n// ./assets/js/gallery-link.js"],"sourceRoot":""}